<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/62_statistics-contract-types | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_62_statistics-contract-types.html">design/62_statistics-contract-types</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="statistics--contract-types" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Statistics &amp; Contract Types<a href="#statistics--contract-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page documents the statistics models and event contract types used throughout Backtest Kit. Statistics models aggregate and analyze signal data from backtests, live trading, and walker comparisons. Contract types define the payload structures emitted by event subjects during execution.</p>
<p>For information about the event system architecture and listeners, see <a href="design_14_architecture-deep-dive.html">Event System Architecture</a>. For details on the reporting classes that generate these statistics, see <a href="design_56_api-reference.html">Reporting Classes API</a>.</p>
<hr>
<a id="statistics-models-overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Statistics Models Overview<a href="#statistics-models-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Statistics models are immutable data structures returned by <code>getData()</code> methods on reporting classes. They contain aggregated metrics, raw event lists, and derived calculations for performance analysis.</p>
<a id="statistics-model-hierarchy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Model Hierarchy<a href="#statistics-model-hierarchy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/62_statistics-contract-types_0.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="backteststatisticsmodel" class="tsd-anchor"></a><h2 class="tsd-anchor-link">BacktestStatisticsModel<a href="#backteststatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contains comprehensive performance metrics calculated from closed backtest signals. All numeric values use null-safe math: calculations return <code>null</code> if result is NaN, Infinity, or division by zero occurs.</p>
<a id="structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>signalList</code></td>
<td><code>IStrategyTickResultClosed[]</code></td>
<td>Array of all closed signals with full details (price, PNL, timestamps)</td>
</tr>
<tr>
<td><code>totalSignals</code></td>
<td><code>number</code></td>
<td>Total number of closed signals</td>
</tr>
<tr>
<td><code>winCount</code></td>
<td><code>number</code></td>
<td>Number of winning signals (PNL &gt; 0)</td>
</tr>
<tr>
<td><code>lossCount</code></td>
<td><code>number</code></td>
<td>Number of losing signals (PNL &lt; 0)</td>
</tr>
<tr>
<td><code>winRate</code></td>
<td><code>number | null</code></td>
<td>Win rate as percentage (0-100). Higher is better.</td>
</tr>
<tr>
<td><code>avgPnl</code></td>
<td><code>number | null</code></td>
<td>Average PNL per signal as percentage. Higher is better.</td>
</tr>
<tr>
<td><code>totalPnl</code></td>
<td><code>number | null</code></td>
<td>Cumulative PNL across all signals as percentage. Higher is better.</td>
</tr>
<tr>
<td><code>stdDev</code></td>
<td><code>number | null</code></td>
<td>Standard deviation of returns (volatility metric). Lower is better.</td>
</tr>
<tr>
<td><code>sharpeRatio</code></td>
<td><code>number | null</code></td>
<td>Risk-adjusted return (avgPnl / stdDev). Higher is better.</td>
</tr>
<tr>
<td><code>annualizedSharpeRatio</code></td>
<td><code>number | null</code></td>
<td>Annualized Sharpe Ratio (sharpeRatio × √365). Higher is better.</td>
</tr>
<tr>
<td><code>certaintyRatio</code></td>
<td><code>number | null</code></td>
<td>Ratio of average win to average loss magnitude (avgWin / |avgLoss|). Higher is better.</td>
</tr>
<tr>
<td><code>expectedYearlyReturns</code></td>
<td><code>number | null</code></td>
<td>Projected yearly returns based on average trade duration and PNL. Higher is better.</td>
</tr>
</tbody>
</table>
<a id="key-metrics-explained" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Metrics Explained<a href="#key-metrics-explained" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Sharpe Ratio</strong>: Measures risk-adjusted returns. Calculated as <code>avgPnl / stdDev</code>. A higher Sharpe ratio indicates better risk-adjusted performance. Typical interpretations:</p>
<ul>
<li>&lt; 1.0: Poor risk-adjusted returns</li>
<li>1.0 - 2.0: Good risk-adjusted returns</li>
<li>&gt; 2.0: Excellent risk-adjusted returns</li>
</ul>
<p><strong>Certainty Ratio</strong>: Compares the magnitude of average wins to average losses. Formula: <code>avgWin / |avgLoss|</code>. A ratio &gt; 1.0 means wins are larger than losses on average. Combined with win rate, provides insight into strategy asymmetry.</p>
<p><strong>Expected Yearly Returns</strong>: Extrapolates returns to annual basis using average signal duration. Assumes consistent signal generation rate throughout the year.</p>
<a id="usage-example" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Get statistics</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total signals: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalSignals</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Win rate: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Sharpe Ratio: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total PNL: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Null-safe access for derived metrics</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> &gt; </span><span class="hl-6">1.5</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Good risk-adjusted performance!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Access raw signal data</span><br/><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">signalList</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">signal</span><span class="hl-1"> </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Signal </span><span class="hl-7">${</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">pnl</span><span class="hl-9">.</span><span class="hl-4">pnlPercentage</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="livestatisticsmodel" class="tsd-anchor"></a><h2 class="tsd-anchor-link">LiveStatisticsModel<a href="#livestatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Identical structure to <code>BacktestStatisticsModel</code> but aggregates signals from live trading execution. Generated by <code>LiveMarkdownService</code> which subscribes to <code>signalLiveEmitter</code>.</p>
<p>The key difference from backtest statistics is the data source: live statistics reflect real-time trading results with actual market execution, while backtest statistics are simulated.</p>
<a id="usage-example-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Live</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Start live trading</span><br/><span class="hl-4">Live</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Later, get live statistics</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Live</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Live trading results:`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total signals: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalSignals</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Win rate: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total PNL: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="walkerstatisticsmodel" class="tsd-anchor"></a><h2 class="tsd-anchor-link">WalkerStatisticsModel<a href="#walkerstatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Aggregates results from walker comparisons, ranking multiple strategies by a chosen optimization metric. Extends <code>WalkerCompleteContract</code> with additional strategy comparison data.</p>
<a id="structure-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/62_statistics-contract-types_1.svg" alt="Mermaid Diagram"></p>
<a id="istrategyresult" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IStrategyResult<a href="#istrategyresult" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each strategy in the walker comparison produces an <code>IStrategyResult</code>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy identifier</td>
</tr>
<tr>
<td><code>stats</code></td>
<td><code>BacktestStatisticsModel</code></td>
<td>Complete backtest statistics for this strategy</td>
</tr>
<tr>
<td><code>metricValue</code></td>
<td><code>number | null</code></td>
<td>Value of the optimization metric used for ranking</td>
</tr>
</tbody>
</table>
<a id="walkermetric-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">WalkerMetric Types<a href="#walkermetric-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">type</span><span class="hl-1"> </span><span class="hl-11">WalkerMetric</span><span class="hl-1"> = </span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;sharpeRatio&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;annualizedSharpeRatio&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;winRate&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;totalPnl&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;certaintyRatio&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;avgPnl&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;expectedYearlyReturns&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>All metrics are maximized - higher values rank better. The <code>metric</code> field in <code>WalkerStatisticsModel</code> indicates which metric was used for comparison.</p>
<a id="usage-example-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Walker</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Run walker comparison</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;strategy-comparison&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Get walker results</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;strategy-comparison&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Compared </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalStrategies</span><span class="hl-7">}</span><span class="hl-2"> strategies`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best strategy: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Analyze all strategies</span><br/><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">strategyResults</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1"> </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">metricValue</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Win rate: </span><span class="hl-7">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Sharpe: </span><span class="hl-7">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Access best strategy details</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">bestStats</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best strategy total PNL: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">bestStats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="auxiliary-statistics-models" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Auxiliary Statistics Models<a href="#auxiliary-statistics-models" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="schedulestatisticsmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ScheduleStatisticsModel<a href="#schedulestatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tracks scheduled signal lifecycle: creation, activation, and cancellation events.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eventList</code></td>
<td><code>ScheduledEvent[]</code></td>
<td>All scheduled/opened/cancelled events with timestamps</td>
</tr>
<tr>
<td><code>totalEvents</code></td>
<td><code>number</code></td>
<td>Total number of events (scheduled + opened + cancelled)</td>
</tr>
<tr>
<td><code>totalScheduled</code></td>
<td><code>number</code></td>
<td>Number of signals created in scheduled state</td>
</tr>
<tr>
<td><code>totalOpened</code></td>
<td><code>number</code></td>
<td>Number of scheduled signals that activated</td>
</tr>
<tr>
<td><code>totalCancelled</code></td>
<td><code>number</code></td>
<td>Number of scheduled signals that cancelled before activation</td>
</tr>
<tr>
<td><code>cancellationRate</code></td>
<td><code>number | null</code></td>
<td>Percentage of scheduled signals that cancelled (0-100). Lower is better.</td>
</tr>
<tr>
<td><code>activationRate</code></td>
<td><code>number | null</code></td>
<td>Percentage of scheduled signals that opened (0-100). Higher is better.</td>
</tr>
<tr>
<td><code>avgWaitTime</code></td>
<td><code>number | null</code></td>
<td>Average time in minutes that cancelled signals waited before cancellation</td>
</tr>
<tr>
<td><code>avgActivationTime</code></td>
<td><code>number | null</code></td>
<td>Average time in minutes that opened signals waited before activation</td>
</tr>
</tbody>
</table>
<p><strong>ScheduledEvent Structure:</strong></p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">ScheduledEvent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">timestamp</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;           </span><span class="hl-5">// Event timestamp in milliseconds</span><br/><span class="hl-1">  </span><span class="hl-4">action</span><span class="hl-1">: </span><span class="hl-2">&quot;scheduled&quot;</span><span class="hl-1"> | </span><span class="hl-2">&quot;opened&quot;</span><span class="hl-1"> | </span><span class="hl-2">&quot;cancelled&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">signalId</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">position</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">note</span><span class="hl-1">?: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">currentPrice</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">priceOpen</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;           </span><span class="hl-5">// Scheduled entry price</span><br/><span class="hl-1">  </span><span class="hl-4">takeProfit</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">stopLoss</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">closeTimestamp</span><span class="hl-1">?: </span><span class="hl-11">number</span><span class="hl-1">;     </span><span class="hl-5">// Only for cancelled/opened</span><br/><span class="hl-1">  </span><span class="hl-4">duration</span><span class="hl-1">?: </span><span class="hl-11">number</span><span class="hl-1">;           </span><span class="hl-5">// Only for cancelled/opened (minutes)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="riskstatisticsmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">RiskStatisticsModel<a href="#riskstatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tracks risk validation rejections with grouping by symbol and strategy.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eventList</code></td>
<td><code>RiskEvent[]</code></td>
<td>All risk rejection events with full context</td>
</tr>
<tr>
<td><code>totalRejections</code></td>
<td><code>number</code></td>
<td>Total number of signals rejected due to risk limits</td>
</tr>
<tr>
<td><code>bySymbol</code></td>
<td><code>Record&lt;string, number&gt;</code></td>
<td>Rejection count grouped by symbol</td>
</tr>
<tr>
<td><code>byStrategy</code></td>
<td><code>Record&lt;string, number&gt;</code></td>
<td>Rejection count grouped by strategy</td>
</tr>
</tbody>
</table>
<p><strong>RiskEvent Structure:</strong></p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">RiskEvent</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">timestamp</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">pendingSignal</span><span class="hl-1">: </span><span class="hl-11">ISignalDto</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">currentPrice</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">activePositionCount</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">comment</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;              </span><span class="hl-5">// Rejection reason from validation note</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="partialstatisticsmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">PartialStatisticsModel<a href="#partialstatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Aggregates partial profit/loss milestone events for unrealized P&amp;L tracking.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>profitEvents</code></td>
<td><code>PartialProfitContract[]</code></td>
<td>All profit milestone events</td>
</tr>
<tr>
<td><code>lossEvents</code></td>
<td><code>PartialLossContract[]</code></td>
<td>All loss milestone events</td>
</tr>
<tr>
<td><code>totalProfitEvents</code></td>
<td><code>number</code></td>
<td>Total count of profit milestones reached</td>
</tr>
<tr>
<td><code>totalLossEvents</code></td>
<td><code>number</code></td>
<td>Total count of loss milestones reached</td>
</tr>
<tr>
<td><code>byLevel</code></td>
<td><code>Record&lt;PartialLevel, number&gt;</code></td>
<td>Event count grouped by percentage level (10, 20, 30, etc.)</td>
</tr>
</tbody>
</table>
<a id="performancestatisticsmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">PerformanceStatisticsModel<a href="#performancestatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Aggregates execution timing metrics for profiling and bottleneck detection.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>events</code></td>
<td><code>PerformanceContract[]</code></td>
<td>All performance measurement events</td>
</tr>
<tr>
<td><code>totalEvents</code></td>
<td><code>number</code></td>
<td>Total count of performance events</td>
</tr>
<tr>
<td><code>byMetricType</code></td>
<td><code>Record&lt;PerformanceMetricType, {...}&gt;</code></td>
<td>Statistics grouped by operation type</td>
</tr>
</tbody>
</table>
<p>Each metric type aggregation includes:</p>
<ul>
<li><code>count</code>: Number of measurements</li>
<li><code>totalDuration</code>: Sum of all durations (ms)</li>
<li><code>avgDuration</code>: Average duration (ms)</li>
<li><code>minDuration</code>: Minimum duration (ms)</li>
<li><code>maxDuration</code>: Maximum duration (ms)</li>
</ul>
<a id="heatmapstatisticsmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">HeatmapStatisticsModel<a href="#heatmapstatisticsmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Provides portfolio-wide aggregated statistics across multiple symbols and strategies.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rows</code></td>
<td><code>IHeatmapRow[]</code></td>
<td>Array of heatmap rows (one per symbol-strategy combination)</td>
</tr>
<tr>
<td><code>totalRows</code></td>
<td><code>number</code></td>
<td>Total number of rows</td>
</tr>
<tr>
<td>Additional aggregated statistics</td>
<td>Various</td>
<td>Cross-symbol aggregations</td>
</tr>
</tbody>
</table>
<hr>
<a id="event-contract-types" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Contract Types<a href="#event-contract-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Contract types define the payload structures emitted by event subjects. These types ensure type-safe event handling through discriminated unions and strict interfaces.</p>
<a id="contract-type-to-emitter-mapping" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Contract Type to Emitter Mapping<a href="#contract-type-to-emitter-mapping" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/62_statistics-contract-types_2.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="donecontract" class="tsd-anchor"></a><h2 class="tsd-anchor-link">DoneContract<a href="#donecontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Emitted when execution completes in any mode (backtest, live, walker). Provides final execution context.</p>
<a id="structure-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol that completed</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy that completed execution</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange used for execution</td>
</tr>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code></td>
<td>Frame used (empty string for live mode)</td>
</tr>
</tbody>
</table>
<a id="emitters" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Emitters<a href="#emitters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><code>doneBacktestSubject</code>: Emitted by <code>Backtest.background()</code> on completion</li>
<li><code>doneLiveSubject</code>: Emitted by <code>Live.background()</code> on graceful shutdown</li>
<li><code>doneWalkerSubject</code>: Emitted by <code>Walker.background()</code> on completion</li>
</ul>
<a id="usage-example-3" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenDoneBacktest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">listenDoneBacktest</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Backtest completed for </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Strategy: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Exchange: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">exchangeName</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Frame: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">frameName</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="performancecontract" class="tsd-anchor"></a><h2 class="tsd-anchor-link">PerformanceContract<a href="#performancecontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Emitted during execution to track timing metrics for profiling and bottleneck detection.</p>
<a id="structure-3" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td>When the metric was recorded (milliseconds since epoch)</td>
</tr>
<tr>
<td><code>previousTimestamp</code></td>
<td><code>number | null</code></td>
<td>Timestamp of previous event (null for first event)</td>
</tr>
<tr>
<td><code>metricType</code></td>
<td><code>PerformanceMetricType</code></td>
<td>Type of operation being measured</td>
</tr>
<tr>
<td><code>duration</code></td>
<td><code>number</code></td>
<td>Duration of the operation in milliseconds</td>
</tr>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy executing the operation</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange used</td>
</tr>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code></td>
<td>Frame used (empty string for live mode)</td>
</tr>
</tbody>
</table>
<a id="performancemetrictype" class="tsd-anchor"></a><h3 class="tsd-anchor-link">PerformanceMetricType<a href="#performancemetrictype" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">type</span><span class="hl-1"> </span><span class="hl-11">PerformanceMetricType</span><span class="hl-1"> = </span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;backtest_total&quot;</span><span class="hl-1">      </span><span class="hl-5">// Total backtest duration from start to finish</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;backtest_timeframe&quot;</span><span class="hl-1">  </span><span class="hl-5">// Duration to process a single timeframe iteration</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;backtest_signal&quot;</span><span class="hl-1">     </span><span class="hl-5">// Duration to process a signal (tick + getNextCandles + backtest)</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;live_tick&quot;</span><span class="hl-1">;          </span><span class="hl-5">// Duration of a single live tick iteration</span>
</code><button type="button">Copy</button></pre>

<a id="usage-example-4" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenPerformance</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">slowOperations</span><span class="hl-1"> = </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">&lt;</span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-11">number</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-0">listenPerformance</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricType</span><span class="hl-7">}</span><span class="hl-2">] </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">duration</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">ms`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Track slow operations</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">duration</span><span class="hl-1"> &gt; </span><span class="hl-6">100</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">key</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">:</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricType</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">slowOperations</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1">, (</span><span class="hl-4">slowOperations</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1">) || </span><span class="hl-6">0</span><span class="hl-1">) + </span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Calculate time between events</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">previousTimestamp</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">timeSinceLastEvent</span><span class="hl-1"> = </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">timestamp</span><span class="hl-1"> - </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">previousTimestamp</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Time since last event: </span><span class="hl-7">${</span><span class="hl-4">timeSinceLastEvent</span><span class="hl-7">}</span><span class="hl-2">ms`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="progress-contract-types" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Contract Types<a href="#progress-contract-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="progressbacktestcontract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ProgressBacktestContract<a href="#progressbacktestcontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Emitted during backtest execution to track frame processing progress.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair being backtested</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy executing</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange used</td>
</tr>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code></td>
<td>Frame being processed</td>
</tr>
<tr>
<td><code>processedFrames</code></td>
<td><code>number</code></td>
<td>Number of timeframes processed so far</td>
</tr>
<tr>
<td><code>totalFrames</code></td>
<td><code>number</code></td>
<td>Total number of timeframes to process</td>
</tr>
<tr>
<td><code>progress</code></td>
<td><code>number</code></td>
<td>Progress ratio (0.0 to 1.0)</td>
</tr>
</tbody>
</table>
<a id="progresswalkercontract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ProgressWalkerContract<a href="#progresswalkercontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Emitted during walker execution to track strategy comparison progress.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair being tested</td>
</tr>
<tr>
<td><code>walkerName</code></td>
<td><code>WalkerName</code></td>
<td>Walker executing</td>
</tr>
<tr>
<td><code>processedStrategies</code></td>
<td><code>number</code></td>
<td>Number of strategies tested so far</td>
</tr>
<tr>
<td><code>totalStrategies</code></td>
<td><code>number</code></td>
<td>Total number of strategies to test</td>
</tr>
<tr>
<td><code>progress</code></td>
<td><code>number</code></td>
<td>Progress ratio (0.0 to 1.0)</td>
</tr>
</tbody>
</table>
<a id="progressoptimizercontract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ProgressOptimizerContract<a href="#progressoptimizercontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Emitted during optimizer execution to track data source processing.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair being analyzed</td>
</tr>
<tr>
<td><code>optimizerName</code></td>
<td><code>string</code></td>
<td>Optimizer executing</td>
</tr>
<tr>
<td><code>processedSources</code></td>
<td><code>number</code></td>
<td>Number of data sources processed</td>
</tr>
<tr>
<td><code>totalSources</code></td>
<td><code>number</code></td>
<td>Total number of data sources</td>
</tr>
<tr>
<td><code>progress</code></td>
<td><code>number</code></td>
<td>Progress ratio (0.0 to 1.0)</td>
</tr>
</tbody>
</table>
<hr>
<a id="walkercontract" class="tsd-anchor"></a><h2 class="tsd-anchor-link">WalkerContract<a href="#walkercontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Emitted during walker execution after each strategy completes. Provides incremental comparison results.</p>
<a id="structure-4" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair being tested</td>
</tr>
<tr>
<td><code>walkerName</code></td>
<td><code>WalkerName</code></td>
<td>Walker executing</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange used</td>
</tr>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code></td>
<td>Frame used</td>
</tr>
<tr>
<td><code>metric</code></td>
<td><code>WalkerMetric</code></td>
<td>Optimization metric being used</td>
</tr>
<tr>
<td><code>totalStrategies</code></td>
<td><code>number</code></td>
<td>Total strategies to test</td>
</tr>
<tr>
<td><code>strategiesTested</code></td>
<td><code>number</code></td>
<td>Strategies tested so far</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Current strategy that just completed</td>
</tr>
<tr>
<td><code>metricValue</code></td>
<td><code>number | null</code></td>
<td>Metric value for current strategy</td>
</tr>
<tr>
<td><code>bestStrategy</code></td>
<td><code>StrategyName | null</code></td>
<td>Best strategy so far</td>
</tr>
<tr>
<td><code>bestMetric</code></td>
<td><code>number | null</code></td>
<td>Best metric value so far</td>
</tr>
</tbody>
</table>
<a id="usage-example-5" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenWalker</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">listenWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategiesTested</span><span class="hl-7">}</span><span class="hl-2">/</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">totalStrategies</span><span class="hl-7">}</span><span class="hl-2">] </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricValue</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">) </span><span class="hl-1">||</span><span class="hl-9"> </span><span class="hl-2">&quot;N/A&quot;</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Best so far: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2"> (</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">) </span><span class="hl-1">||</span><span class="hl-9"> </span><span class="hl-2">&quot;N/A&quot;</span><span class="hl-7">}</span><span class="hl-2">)`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="walkercompletecontract" class="tsd-anchor"></a><h2 class="tsd-anchor-link">WalkerCompleteContract<a href="#walkercompletecontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Emitted when walker completes all strategy comparisons. Contains final results summary.</p>
<a id="structure-5" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>walkerName</code></td>
<td><code>WalkerName</code></td>
<td>Walker that completed</td>
</tr>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair tested</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange used</td>
</tr>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code></td>
<td>Frame used</td>
</tr>
<tr>
<td><code>metric</code></td>
<td><code>WalkerMetric</code></td>
<td>Optimization metric used</td>
</tr>
<tr>
<td><code>totalStrategies</code></td>
<td><code>number</code></td>
<td>Total strategies tested</td>
</tr>
<tr>
<td><code>bestStrategy</code></td>
<td><code>StrategyName | null</code></td>
<td>Best performing strategy</td>
</tr>
<tr>
<td><code>bestMetric</code></td>
<td><code>number | null</code></td>
<td>Best metric value achieved</td>
</tr>
<tr>
<td><code>bestStats</code></td>
<td><code>BacktestStatisticsModel | null</code></td>
<td>Full statistics for best strategy</td>
</tr>
</tbody>
</table>
<a id="usage-example-6" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenWalkerComplete</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">listenWalkerComplete</span><span class="hl-1">((</span><span class="hl-4">results</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-14">\n</span><span class="hl-2">=== Walker </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">walkerName</span><span class="hl-7">}</span><span class="hl-2"> Completed ===`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Symbol: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Tested </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">totalStrategies</span><span class="hl-7">}</span><span class="hl-2"> strategies`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-14">\n</span><span class="hl-2">Winner: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">bestStats</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-14">\n</span><span class="hl-2">Best Strategy Details:`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Win Rate: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Total PNL: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Sharpe Ratio: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-9">?.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="partial-event-contracts" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Partial Event Contracts<a href="#partial-event-contracts" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="partialprofitcontract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">PartialProfitContract<a href="#partialprofitcontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Emitted when a signal reaches a profit milestone (10%, 20%, 30%, etc.).</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>data</code></td>
<td><code>ISignalRow</code></td>
<td>Signal that reached milestone</td>
</tr>
<tr>
<td><code>currentPrice</code></td>
<td><code>number</code></td>
<td>Current market price</td>
</tr>
<tr>
<td><code>level</code></td>
<td><code>PartialLevel</code></td>
<td>Profit level reached (10, 20, 30, ..., 100)</td>
</tr>
<tr>
<td><code>backtest</code></td>
<td><code>boolean</code></td>
<td>True if backtest mode, false if live</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td>Event timestamp in milliseconds</td>
</tr>
</tbody>
</table>
<p><strong>PartialLevel Type:</strong></p>
<pre><code class="typescript"><span class="hl-7">type</span><span class="hl-1"> </span><span class="hl-11">PartialLevel</span><span class="hl-1"> = </span><span class="hl-6">10</span><span class="hl-1"> | </span><span class="hl-6">20</span><span class="hl-1"> | </span><span class="hl-6">30</span><span class="hl-1"> | </span><span class="hl-6">40</span><span class="hl-1"> | </span><span class="hl-6">50</span><span class="hl-1"> | </span><span class="hl-6">60</span><span class="hl-1"> | </span><span class="hl-6">70</span><span class="hl-1"> | </span><span class="hl-6">80</span><span class="hl-1"> | </span><span class="hl-6">90</span><span class="hl-1"> | </span><span class="hl-6">100</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<a id="partiallosscontract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">PartialLossContract<a href="#partiallosscontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Emitted when a signal reaches a loss milestone (10%, 20%, 30%, etc.).</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>data</code></td>
<td><code>ISignalRow</code></td>
<td>Signal that reached milestone</td>
</tr>
<tr>
<td><code>currentPrice</code></td>
<td><code>number</code></td>
<td>Current market price</td>
</tr>
<tr>
<td><code>level</code></td>
<td><code>PartialLevel</code></td>
<td>Loss level reached (10, 20, 30, ..., 100)</td>
</tr>
<tr>
<td><code>backtest</code></td>
<td><code>boolean</code></td>
<td>True if backtest mode, false if live</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td>Event timestamp in milliseconds</td>
</tr>
</tbody>
</table>
<a id="usage-example-7" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenPartialProfit</span><span class="hl-1">, </span><span class="hl-4">listenPartialLoss</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Track profit milestones</span><br/><span class="hl-0">listenPartialProfit</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[PROFIT] </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">level</span><span class="hl-7">}</span><span class="hl-2">% profit reached`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Signal: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">data</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Price: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">currentPrice</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Track loss milestones</span><br/><span class="hl-0">listenPartialLoss</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[LOSS] </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">level</span><span class="hl-7">}</span><span class="hl-2">% loss reached`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Signal: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">data</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Price: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">currentPrice</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Consider risk management action at high loss levels</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">level</span><span class="hl-1"> &gt;= </span><span class="hl-6">30</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">`  High loss level! Consider intervention.`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="riskcontract" class="tsd-anchor"></a><h2 class="tsd-anchor-link">RiskContract<a href="#riskcontract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Emitted when a signal is rejected due to risk validation failure. Only rejection events are emitted (allowed signals do not emit).</p>
<a id="structure-6" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Structure<a href="#structure-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>pendingSignal</code></td>
<td><code>ISignalDto</code></td>
<td>Signal that was rejected</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy requesting the signal</td>
</tr>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code></td>
<td>Exchange name</td>
</tr>
<tr>
<td><code>currentPrice</code></td>
<td><code>number</code></td>
<td>Current market price at rejection</td>
</tr>
<tr>
<td><code>activePositionCount</code></td>
<td><code>number</code></td>
<td>Number of active positions at rejection time</td>
</tr>
<tr>
<td><code>comment</code></td>
<td><code>string</code></td>
<td>Rejection reason from validation note or &quot;N/A&quot;</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td>Event timestamp in milliseconds</td>
</tr>
</tbody>
</table>
<a id="usage-example-8" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenRisk</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">rejectionStats</span><span class="hl-1"> = </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">&lt;</span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-11">number</span><span class="hl-1">&gt;();</span><br/><br/><span class="hl-0">listenRisk</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[RISK REJECTED] </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Strategy: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Position: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">pendingSignal</span><span class="hl-9">.</span><span class="hl-4">position</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Active positions: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">activePositionCount</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Reason: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">comment</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Price: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">currentPrice</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Track rejection patterns</span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">key</span><span class="hl-1"> = </span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">:</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">comment</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">rejectionStats</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1">, (</span><span class="hl-4">rejectionStats</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1">) || </span><span class="hl-6">0</span><span class="hl-1">) + </span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Alert on high rejection counts</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">rejectionStats</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">key</span><span class="hl-1">)! &gt; </span><span class="hl-6">10</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">`  High rejection count for: </span><span class="hl-7">${</span><span class="hl-4">key</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="type-safety-and-null-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Type Safety and Null Handling<a href="#type-safety-and-null-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All statistics models follow consistent null-safety patterns:</p>
<ol>
<li><strong>Raw Data Lists</strong>: Always present, never null (e.g., <code>signalList</code>, <code>eventList</code>)</li>
<li><strong>Count Fields</strong>: Always present, never null (e.g., <code>totalSignals</code>, <code>winCount</code>)</li>
<li><strong>Derived Metrics</strong>: Nullable (e.g., <code>winRate</code>, <code>sharpeRatio</code>, <code>avgPnl</code>)</li>
</ol>
<a id="null-safe-math-implementation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Null-Safe Math Implementation<a href="#null-safe-math-implementation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Derived metrics return <code>null</code> when:</p>
<ul>
<li>Division by zero would occur</li>
<li>Result is NaN or Infinity</li>
<li>Insufficient data for calculation (e.g., standard deviation with &lt; 2 samples)</li>
</ul>
<p>This approach prevents misleading statistics and forces explicit null checks in consuming code:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Safe: Always available</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Processed </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalSignals</span><span class="hl-7">}</span><span class="hl-2"> signals`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Requires null check: Derived metric</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Sharpe Ratio: </span><span class="hl-7">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">3</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Sharpe Ratio: Insufficient data&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Safe pattern with nullish coalescing</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">displaySharpe</span><span class="hl-1"> = </span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1">?.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-6">3</span><span class="hl-1">) ?? </span><span class="hl-2">&quot;N/A&quot;</span><span class="hl-1">;</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Sharpe Ratio: </span><span class="hl-7">${</span><span class="hl-4">displaySharpe</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="statistics-generation-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Statistics Generation Flow<a href="#statistics-generation-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/62_statistics-contract-types_3.svg" alt="Mermaid Diagram"></p>
<p><strong>Flow Description:</strong></p>
<ol>
<li><strong>Execution</strong>: Strategy methods (<code>tick</code>, <code>backtest</code>) generate signal events</li>
<li><strong>Emission</strong>: Events emitted to appropriate subjects (mode-specific or global)</li>
<li><strong>Markdown Services</strong>: Subscribe to relevant emitters, accumulate events in memory</li>
<li><strong>Storage</strong>: Events stored in <code>ReportStorage</code> with 250-event limit per key</li>
<li><strong>API Access</strong>: <code>getData()</code> methods trigger statistics calculation from accumulated events</li>
<li><strong>Models</strong>: Markdown services compute derived metrics and return statistics models</li>
</ol>
<hr>
<a id="summary-table-contract-types" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Summary Table: Contract Types<a href="#summary-table-contract-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Contract Type</th>
<th>Emitter</th>
<th>Purpose</th>
<th>Key Fields</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>IStrategyTickResult</code></td>
<td><code>signalEmitter</code>, <code>signalBacktestEmitter</code>, <code>signalLiveEmitter</code></td>
<td>Signal lifecycle events</td>
<td><code>action</code>, <code>signal</code>, <code>currentPrice</code></td>
</tr>
<tr>
<td><code>DoneContract</code></td>
<td><code>doneLiveSubject</code>, <code>doneBacktestSubject</code>, <code>doneWalkerSubject</code></td>
<td>Execution completion</td>
<td><code>symbol</code>, <code>strategyName</code>, <code>exchangeName</code></td>
</tr>
<tr>
<td><code>ProgressBacktestContract</code></td>
<td><code>progressBacktestEmitter</code></td>
<td>Backtest frame progress</td>
<td><code>processedFrames</code>, <code>totalFrames</code>, <code>progress</code></td>
</tr>
<tr>
<td><code>ProgressWalkerContract</code></td>
<td><code>progressWalkerEmitter</code></td>
<td>Walker strategy progress</td>
<td><code>processedStrategies</code>, <code>totalStrategies</code>, <code>progress</code></td>
</tr>
<tr>
<td><code>ProgressOptimizerContract</code></td>
<td><code>progressOptimizerEmitter</code></td>
<td>Optimizer source progress</td>
<td><code>processedSources</code>, <code>totalSources</code>, <code>progress</code></td>
</tr>
<tr>
<td><code>PerformanceContract</code></td>
<td><code>performanceEmitter</code></td>
<td>Execution timing metrics</td>
<td><code>metricType</code>, <code>duration</code>, <code>timestamp</code></td>
</tr>
<tr>
<td><code>WalkerContract</code></td>
<td><code>walkerEmitter</code></td>
<td>Walker incremental results</td>
<td><code>strategyName</code>, <code>metricValue</code>, <code>bestStrategy</code></td>
</tr>
<tr>
<td><code>WalkerCompleteContract</code></td>
<td><code>walkerCompleteSubject</code></td>
<td>Walker final results</td>
<td><code>bestStrategy</code>, <code>bestMetric</code>, <code>bestStats</code></td>
</tr>
<tr>
<td><code>PartialProfitContract</code></td>
<td><code>partialProfitSubject</code></td>
<td>Profit milestones</td>
<td><code>level</code>, <code>data</code>, <code>currentPrice</code></td>
</tr>
<tr>
<td><code>PartialLossContract</code></td>
<td><code>partialLossSubject</code></td>
<td>Loss milestones</td>
<td><code>level</code>, <code>data</code>, <code>currentPrice</code></td>
</tr>
<tr>
<td><code>RiskContract</code></td>
<td><code>riskSubject</code></td>
<td>Risk rejections</td>
<td><code>pendingSignal</code>, <code>comment</code>, <code>activePositionCount</code></td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#statistics--contract-types"><span>Statistics &amp; <wbr/>Contract <wbr/>Types</span></a><ul><li><a href="#statistics-models-overview"><span>Statistics <wbr/>Models <wbr/>Overview</span></a></li><li><ul><li><a href="#statistics-model-hierarchy"><span>Statistics <wbr/>Model <wbr/>Hierarchy</span></a></li></ul></li><li><a href="#backteststatisticsmodel"><span>Backtest<wbr/>Statistics<wbr/>Model</span></a></li><li><ul><li><a href="#structure"><span>Structure</span></a></li><li><a href="#key-metrics-explained"><span>Key <wbr/>Metrics <wbr/>Explained</span></a></li><li><a href="#usage-example"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#livestatisticsmodel"><span>Live<wbr/>Statistics<wbr/>Model</span></a></li><li><ul><li><a href="#usage-example-1"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#walkerstatisticsmodel"><span>Walker<wbr/>Statistics<wbr/>Model</span></a></li><li><ul><li><a href="#structure-1"><span>Structure</span></a></li><li><a href="#istrategyresult"><span>IStrategy<wbr/>Result</span></a></li><li><a href="#walkermetric-types"><span>Walker<wbr/>Metric <wbr/>Types</span></a></li><li><a href="#usage-example-2"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#auxiliary-statistics-models"><span>Auxiliary <wbr/>Statistics <wbr/>Models</span></a></li><li><ul><li><a href="#schedulestatisticsmodel"><span>Schedule<wbr/>Statistics<wbr/>Model</span></a></li><li><a href="#riskstatisticsmodel"><span>Risk<wbr/>Statistics<wbr/>Model</span></a></li><li><a href="#partialstatisticsmodel"><span>Partial<wbr/>Statistics<wbr/>Model</span></a></li><li><a href="#performancestatisticsmodel"><span>Performance<wbr/>Statistics<wbr/>Model</span></a></li><li><a href="#heatmapstatisticsmodel"><span>Heatmap<wbr/>Statistics<wbr/>Model</span></a></li></ul></li><li><a href="#event-contract-types"><span>Event <wbr/>Contract <wbr/>Types</span></a></li><li><ul><li><a href="#contract-type-to-emitter-mapping"><span>Contract <wbr/>Type to <wbr/>Emitter <wbr/>Mapping</span></a></li></ul></li><li><a href="#donecontract"><span>Done<wbr/>Contract</span></a></li><li><ul><li><a href="#structure-2"><span>Structure</span></a></li><li><a href="#emitters"><span>Emitters</span></a></li><li><a href="#usage-example-3"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#performancecontract"><span>Performance<wbr/>Contract</span></a></li><li><ul><li><a href="#structure-3"><span>Structure</span></a></li><li><a href="#performancemetrictype"><span>Performance<wbr/>Metric<wbr/>Type</span></a></li><li><a href="#usage-example-4"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#progress-contract-types"><span>Progress <wbr/>Contract <wbr/>Types</span></a></li><li><ul><li><a href="#progressbacktestcontract"><span>Progress<wbr/>Backtest<wbr/>Contract</span></a></li><li><a href="#progresswalkercontract"><span>Progress<wbr/>Walker<wbr/>Contract</span></a></li><li><a href="#progressoptimizercontract"><span>Progress<wbr/>Optimizer<wbr/>Contract</span></a></li></ul></li><li><a href="#walkercontract"><span>Walker<wbr/>Contract</span></a></li><li><ul><li><a href="#structure-4"><span>Structure</span></a></li><li><a href="#usage-example-5"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#walkercompletecontract"><span>Walker<wbr/>Complete<wbr/>Contract</span></a></li><li><ul><li><a href="#structure-5"><span>Structure</span></a></li><li><a href="#usage-example-6"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#partial-event-contracts"><span>Partial <wbr/>Event <wbr/>Contracts</span></a></li><li><ul><li><a href="#partialprofitcontract"><span>Partial<wbr/>Profit<wbr/>Contract</span></a></li><li><a href="#partiallosscontract"><span>Partial<wbr/>Loss<wbr/>Contract</span></a></li><li><a href="#usage-example-7"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#riskcontract"><span>Risk<wbr/>Contract</span></a></li><li><ul><li><a href="#structure-6"><span>Structure</span></a></li><li><a href="#usage-example-8"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#type-safety-and-null-handling"><span>Type <wbr/>Safety and <wbr/>Null <wbr/>Handling</span></a></li><li><ul><li><a href="#null-safe-math-implementation"><span>Null-<wbr/>Safe <wbr/>Math <wbr/>Implementation</span></a></li></ul></li><li><a href="#statistics-generation-flow"><span>Statistics <wbr/>Generation <wbr/>Flow</span></a></li><li><a href="#summary-table-contract-types"><span>Summary <wbr/>Table: <wbr/>Contract <wbr/>Types</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
