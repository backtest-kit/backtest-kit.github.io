<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/02_key-features | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_02_key-features.html">design/02_key-features</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="key-features" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Key Features<a href="#key-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page provides a comprehensive overview of Backtest Kit's capabilities and architectural features. Each feature is described with its purpose, implementation approach, and references to the underlying code entities. For detailed implementation guides, see Getting Started <a href="design_04_getting-started.html">(2)</a>. For architectural deep dives, see Architecture Deep Dive <a href="design_14_architecture-deep-dive.html">(4)</a>.</p>
<hr>
<a id="core-architectural-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Core Architectural Features<a href="#core-architectural-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="look-ahead-bias-prevention" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Look-Ahead Bias Prevention<a href="#look-ahead-bias-prevention" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Backtest Kit architecturally eliminates look-ahead bias through its <strong>time execution engine</strong>. The system treats market data as an async stream of time, where each execution context carries temporal information that automatically constrains data access.</p>
<p><strong>Key Implementation:</strong></p>
<ul>
<li><code>ExecutionContextService</code> <code>src/lib/services/context/ExecutionContextService.ts:1-100</code> propagates temporal context using Node.js <code>AsyncLocalStorage</code></li>
<li><code>getCandles()</code> function <code>src/api/getCandles.ts:1-50</code> automatically filters data based on current execution timestamp</li>
<li>All strategy callbacks receive data UP TO the current moment, never future data</li>
</ul>
<p><strong>Technical Guarantee:</strong> The <code>when</code> parameter in execution context ensures that <code>getCandles(symbol, interval, limit)</code> only returns candles with <code>timestamp &lt;= when</code>. This makes look-ahead bias architecturally impossible without explicitly bypassing the context system.</p>
<p><img src="../media/02_key-features_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: Temporal Context Propagation for Look-Ahead Bias Prevention</strong></p>
<hr>
<a id="multi-mode-execution" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Multi-Mode Execution<a href="#multi-mode-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Three execution modes share identical signal logic while differing in orchestration:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Class</th>
<th>Logic Service</th>
<th>Purpose</th>
<th>Iteration Pattern</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Backtest</strong></td>
<td><code>Backtest</code></td>
<td><code>BacktestLogicPrivateService</code></td>
<td>Historical simulation</td>
<td>Finite generator over timeframes</td>
</tr>
<tr>
<td><strong>Live</strong></td>
<td><code>Live</code></td>
<td><code>LiveLogicPrivateService</code></td>
<td>Real-time trading</td>
<td>Infinite generator with sleep intervals</td>
</tr>
<tr>
<td><strong>Walker</strong></td>
<td><code>Walker</code></td>
<td><code>WalkerLogicPrivateService</code></td>
<td>Strategy comparison</td>
<td>Sequential backtest execution</td>
</tr>
</tbody>
</table>
<p><strong>Code Mapping:</strong></p>
<p><img src="../media/02_key-features_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: Three Execution Modes Sharing Core Strategy Logic</strong></p>
<p><strong>Mode-Specific Behaviors:</strong></p>
<ul>
<li><strong>Backtest</strong>: Uses <code>BacktestLogicPrivateService.generate()</code> <code>src/lib/services/logic/private/BacktestLogicPrivateService.ts:50-150</code> to iterate through historical timeframes. Fast-forward optimization skips frames while signals are active.</li>
<li><strong>Live</strong>: Uses <code>LiveLogicPrivateService.generate()</code> <code>src/lib/services/logic/private/LiveLogicPrivateService.ts:50-150</code> with infinite <code>while(true)</code> loop. Polls every <code>TICK_TTL</code> (61000ms). Persists signals for crash recovery.</li>
<li><strong>Walker</strong>: Uses <code>WalkerLogicPrivateService.generate()</code> <code>src/lib/services/logic/private/WalkerLogicPrivateService.ts:50-150</code> to run multiple backtests sequentially, collect statistics from <code>BacktestMarkdownService</code>, and compare using configurable metrics.</li>
</ul>
<hr>
<a id="validation--safety-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validation &amp; Safety Features<a href="#validation--safety-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="signal-validation-pipeline" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Signal Validation Pipeline<a href="#signal-validation-pipeline" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Every signal passes through seven validation stages before activation, enforced by <code>GLOBAL_CONFIG</code> parameters:</p>
<p><img src="../media/02_key-features_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: Seven-Stage Signal Validation Pipeline</strong></p>
<p><strong>Validation Implementation:</strong></p>
<ul>
<li>Stages 1-7: <code>ClientStrategy.prototype.tick</code> <code>src/client/ClientStrategy.ts:200-400</code> performs inline checks</li>
<li>Stage 4 (TP Distance): <code>CC_MIN_TAKEPROFIT_DISTANCE_PERCENT</code> default 0.21% ensures profits cover 0.1% fee + 0.1% slippage + margin <code>src/config/params.ts:20-30</code></li>
<li>Stage 7 (Anomalies): <code>ExchangeCoreService.prototype.getValidatedCandles</code> <code>src/lib/services/core/ExchangeCoreService.ts:50-150</code> checks for median price deviations</li>
<li>Risk Check: <code>ClientRisk.prototype.checkSignal</code> <code>src/client/ClientRisk.ts:100-200</code> executes custom validation functions</li>
</ul>
<p><strong>Configuration Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CC_MIN_TAKEPROFIT_DISTANCE_PERCENT</code></td>
<td>0.21%</td>
<td>Minimum profit to cover fees/slippage</td>
</tr>
<tr>
<td><code>CC_MAX_STOPLOSS_DISTANCE_PERCENT</code></td>
<td>15%</td>
<td>Maximum risk per trade</td>
</tr>
<tr>
<td><code>CC_MAX_SIGNAL_LIFETIME_MINUTES</code></td>
<td>720</td>
<td>Maximum signal duration (12 hours)</td>
</tr>
<tr>
<td><code>CC_PERCENT_FEE</code></td>
<td>0.1%</td>
<td>Trading fee percentage</td>
</tr>
<tr>
<td><code>CC_PERCENT_SLIPPAGE</code></td>
<td>0.1%</td>
<td>Expected slippage</td>
</tr>
</tbody>
</table>
<hr>
<a id="crash-safe-persistence" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Crash-Safe Persistence<a href="#crash-safe-persistence" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Live mode implements atomic persistence to prevent signal loss or duplication during system crashes:</p>
<p><strong>Architecture:</strong></p>
<ol>
<li><strong>Selective Persistence</strong>: Only <code>opened</code> signals are persisted. Scheduled signals remain ephemeral.</li>
<li><strong>Atomic Writes</strong>: <code>PersistSignalAdapter</code> <code>src/lib/services/persist/PersistSignalAdapter.ts:1-150</code> uses atomic file operations</li>
<li><strong>Recovery on Startup</strong>: <code>LiveLogicPrivateService</code> <code>src/lib/services/logic/private/LiveLogicPrivateService.ts:50-100</code> loads persisted signals via <code>waitForInit()</code></li>
<li><strong>Cleanup on Close</strong>: Signals deleted from storage when closed (TP/SL/time expired)</li>
</ol>
<p><strong>Implementation Classes:</strong></p>
<table>
<thead>
<tr>
<th>Class</th>
<th>Role</th>
<th>File</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>PersistSignalAdapter</code></td>
<td>File-based persistence implementation</td>
<td><code>src/lib/services/persist/PersistSignalAdapter.ts</code></td>
</tr>
<tr>
<td><code>PersistBase</code></td>
<td>Abstract persistence interface</td>
<td><code>src/interfaces/Persist.interface.ts</code></td>
</tr>
<tr>
<td><code>ClientStrategy.persistSignal</code></td>
<td>Save signal to storage</td>
<td><code>src/client/ClientStrategy.ts:500-550</code></td>
</tr>
<tr>
<td><code>ClientStrategy.loadPersistedSignal</code></td>
<td>Restore signal on startup</td>
<td><code>src/client/ClientStrategy.ts:550-600</code></td>
</tr>
</tbody>
</table>
<p><strong>Persistence Key Format:</strong></p>
<pre><code><span class="hl-4">persist_</span><span class="hl-1">{</span><span class="hl-4">symbol</span><span class="hl-1">}</span><span class="hl-4">_</span><span class="hl-1">{</span><span class="hl-4">strategyName</span><span class="hl-1">}</span><span class="hl-4">_</span><span class="hl-1">{</span><span class="hl-4">exchangeName</span><span class="hl-1">}.</span><span class="hl-4">json</span>
</code><button>Copy</button></pre>

<p>Example: <code>persist_BTCUSDT_myStrategy_binance.json</code></p>
<hr>
<a id="risk-management" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Risk Management<a href="#risk-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Risk management operates at three levels:</p>
<p><img src="../media/02_key-features_3.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: Three-Level Risk Management Architecture</strong></p>
<p><strong>Risk Schema Example:</strong></p>
<p>From <code>README.md:83-100</code>, a risk profile with 1% minimum TP and 2:1 R/R:</p>
<pre><code class="typescript"><span class="hl-0">addRisk</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">riskName:</span><span class="hl-1"> </span><span class="hl-2">&#39;demo&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">validations:</span><span class="hl-1"> [</span><br/><span class="hl-1">    </span><span class="hl-5">// TP at least 1%</span><br/><span class="hl-1">    ({ </span><span class="hl-4">pendingSignal</span><span class="hl-1">, </span><span class="hl-4">currentPrice</span><span class="hl-1"> }) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">tpDistance</span><span class="hl-1"> = </span><span class="hl-0">calculateTPDistance</span><span class="hl-1">(</span><span class="hl-4">pendingSignal</span><span class="hl-1">, </span><span class="hl-4">currentPrice</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">tpDistance</span><span class="hl-1"> &lt; </span><span class="hl-6">1</span><span class="hl-1">) </span><span class="hl-3">throw</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">`TP too close: </span><span class="hl-7">${</span><span class="hl-4">tpDistance</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">// R/R at least 2:1</span><br/><span class="hl-1">    ({ </span><span class="hl-4">pendingSignal</span><span class="hl-1">, </span><span class="hl-4">currentPrice</span><span class="hl-1"> }) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">rr</span><span class="hl-1"> = </span><span class="hl-0">calculateRiskReward</span><span class="hl-1">(</span><span class="hl-4">pendingSignal</span><span class="hl-1">, </span><span class="hl-4">currentPrice</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">rr</span><span class="hl-1"> &lt; </span><span class="hl-6">2</span><span class="hl-1">) </span><span class="hl-3">throw</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Error</span><span class="hl-1">(</span><span class="hl-2">&#39;Poor R/R ratio&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation:</strong></p>
<ul>
<li><code>ClientRisk.prototype.checkSignal</code> <code>src/client/ClientRisk.ts:100-150</code> executes validation array</li>
<li><code>MergeRisk</code> <code>src/client/MergeRisk.ts:1-100</code> combines multiple risk profiles using logical AND</li>
<li><code>RiskGlobalService</code> <code>src/lib/services/global/RiskGlobalService.ts</code> maintains portfolio-wide state</li>
</ul>
<hr>
<a id="integration--extensibility" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration &amp; Extensibility<a href="#integration--extensibility" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="llm-powered-strategy-generation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">LLM-Powered Strategy Generation<a href="#llm-powered-strategy-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The Optimizer system generates executable strategy code using LLM (Large Language Model) integration:</p>
<p><img src="../media/02_key-features_4.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: LLM-Powered Strategy Generation Workflow</strong></p>
<p><strong>Template Methods:</strong></p>
<p><code>OptimizerTemplateService</code> <code>src/lib/services/template/OptimizerTemplateService.ts:27-650</code> provides 11 code generation methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Purpose</th>
<th>Returns</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>getTopBanner</code></td>
<td>Imports and initialization</td>
<td>Shebang, imports, constants</td>
</tr>
<tr>
<td><code>getUserMessage</code></td>
<td>LLM user prompt</td>
<td>Data formatted for LLM</td>
</tr>
<tr>
<td><code>getAssistantMessage</code></td>
<td>LLM assistant response</td>
<td>Acknowledgment message</td>
</tr>
<tr>
<td><code>getWalkerTemplate</code></td>
<td>Walker configuration</td>
<td><code>addWalker()</code> call</td>
</tr>
<tr>
<td><code>getStrategyTemplate</code></td>
<td>Strategy with LLM logic</td>
<td><code>addStrategy()</code> with <code>getSignal()</code></td>
</tr>
<tr>
<td><code>getExchangeTemplate</code></td>
<td>CCXT integration</td>
<td><code>addExchange()</code> call</td>
</tr>
<tr>
<td><code>getFrameTemplate</code></td>
<td>Timeframe definition</td>
<td><code>addFrame()</code> call</td>
</tr>
<tr>
<td><code>getLauncherTemplate</code></td>
<td>Execution and listeners</td>
<td><code>Walker.background()</code> + listeners</td>
</tr>
<tr>
<td><code>getTextTemplate</code></td>
<td>Text generation helper</td>
<td><code>async text()</code> function</td>
</tr>
<tr>
<td><code>getJsonTemplate</code></td>
<td>JSON generation helper</td>
<td><code>async json()</code> function</td>
</tr>
<tr>
<td><code>getJsonDumpTemplate</code></td>
<td>Debug output helper</td>
<td><code>async dumpJson()</code> function</td>
</tr>
</tbody>
</table>
<p><strong>Generated Code Structure:</strong></p>
<p>From <code>src/lib/services/template/OptimizerTemplateService.ts:225-350</code>, the generated file contains:</p>
<ol>
<li>Imports (Ollama, CCXT, backtest-kit)</li>
<li>Helper functions (<code>text()</code>, <code>json()</code>, <code>dumpJson()</code>)</li>
<li>Exchange configuration</li>
<li>Training frames (one per training range)</li>
<li>Test frame (for validation)</li>
<li>Strategies (one per training range × data source)</li>
<li>Walker configuration</li>
<li>Launcher with event listeners</li>
</ol>
<p><strong>Example Integration:</strong></p>
<p>From <code>README.md:111-143</code>, using Optimizer in a strategy:</p>
<pre><code class="typescript"><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&#39;llm-strategy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&#39;5m&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">candles1h</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">getCandles</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">, </span><span class="hl-6">24</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">messages</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">getMessages</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, { </span><span class="hl-4">candles1h</span><span class="hl-1"> });</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">signal</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">json</span><span class="hl-1">(</span><span class="hl-4">messages</span><span class="hl-1">);  </span><span class="hl-5">// LLM generates signal</span><br/><span class="hl-1">    </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">dumpSignal</span><span class="hl-1">(</span><span class="hl-0">uuid</span><span class="hl-1">(), </span><span class="hl-4">messages</span><span class="hl-1">, </span><span class="hl-4">signal</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> { ...</span><span class="hl-4">signal</span><span class="hl-1">, </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-0">uuid</span><span class="hl-1">() };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="pluggable-data-sources" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Pluggable Data Sources<a href="#pluggable-data-sources" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Backtest Kit supports custom data sources through the <code>IExchangeSchema</code> interface:</p>
<p><strong>Required Methods:</strong></p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Signature</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>getCandles</code></td>
<td><code>(symbol, interval, since, limit) =&gt; ICandleData[]</code></td>
<td>Fetch OHLCV candles</td>
</tr>
<tr>
<td><code>formatPrice</code></td>
<td><code>(symbol, price) =&gt; string</code></td>
<td>Format price for display</td>
</tr>
<tr>
<td><code>formatQuantity</code></td>
<td><code>(symbol, quantity) =&gt; string</code></td>
<td>Format quantity for display</td>
</tr>
<tr>
<td><code>getAveragePrice</code></td>
<td><code>(symbol, interval) =&gt; number</code> (optional)</td>
<td>Get VWAP or last price</td>
</tr>
</tbody>
</table>
<p><strong>CCXT Integration Example:</strong></p>
<p>From <code>README.md:70-80</code>:</p>
<pre><code class="typescript"><span class="hl-0">addExchange</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&#39;binance&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getCandles</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">interval</span><span class="hl-1">, </span><span class="hl-4">since</span><span class="hl-1">, </span><span class="hl-4">limit</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">exchange</span><span class="hl-1"> = </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-4">ccxt</span><span class="hl-1">.</span><span class="hl-0">binance</span><span class="hl-1">();</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">ohlcv</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">exchange</span><span class="hl-1">.</span><span class="hl-0">fetchOHLCV</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">interval</span><span class="hl-1">, </span><span class="hl-4">since</span><span class="hl-1">.</span><span class="hl-0">getTime</span><span class="hl-1">(), </span><span class="hl-4">limit</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">ohlcv</span><span class="hl-1">.</span><span class="hl-0">map</span><span class="hl-1">(([</span><span class="hl-4">timestamp</span><span class="hl-1">, </span><span class="hl-4">open</span><span class="hl-1">, </span><span class="hl-4">high</span><span class="hl-1">, </span><span class="hl-4">low</span><span class="hl-1">, </span><span class="hl-4">close</span><span class="hl-1">, </span><span class="hl-4">volume</span><span class="hl-1">]) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">      ({ </span><span class="hl-4">timestamp</span><span class="hl-1">, </span><span class="hl-4">open</span><span class="hl-1">, </span><span class="hl-4">high</span><span class="hl-1">, </span><span class="hl-4">low</span><span class="hl-1">, </span><span class="hl-4">close</span><span class="hl-1">, </span><span class="hl-4">volume</span><span class="hl-1"> }));</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">formatPrice</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">price</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-4">price</span><span class="hl-1">.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-6">2</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">formatQuantity</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">quantity</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-4">quantity</span><span class="hl-1">.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-6">8</span><span class="hl-1">)</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation:</strong></p>
<ul>
<li><code>ClientExchange</code> <code>src/client/ClientExchange.ts:1-300</code> wraps exchange schema</li>
<li><code>ExchangeCoreService</code> <code>src/lib/services/core/ExchangeCoreService.ts:1-200</code> coordinates data fetching</li>
<li><code>ExchangeConnectionService</code> <code>src/lib/services/connection/ExchangeConnectionService.ts:1-100</code> caches exchange instances</li>
</ul>
<p><strong>Candle Validation:</strong></p>
<p><code>ExchangeCoreService.prototype.getValidatedCandles</code> <code>src/lib/services/core/ExchangeCoreService.ts:50-150</code> performs:</p>
<ol>
<li>Anomaly detection (price spikes beyond median)</li>
<li>Incomplete candle filtering (volume = 0 or prices missing)</li>
<li>Retry logic with exponential backoff</li>
</ol>
<hr>
<a id="event-driven-monitoring" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event-Driven Monitoring<a href="#event-driven-monitoring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The framework provides 13 event emitters for real-time monitoring:</p>
<p><img src="../media/02_key-features_5.svg" alt="Mermaid Diagram"></p>
<p><strong>Diagram: 13 Event Emitters for Monitoring</strong></p>
<p><strong>Event Categories:</strong></p>
<ol>
<li><strong>Signal Events</strong>: Three-tier emission (global, mode-specific) enables selective subscription</li>
<li><strong>Progress Events</strong>: Real-time progress tracking for long-running operations</li>
<li><strong>Completion Events</strong>: Mode-specific completion signals for cleanup/reporting</li>
<li><strong>Partial Events</strong>: Unrealized P&amp;L milestones (10%, 20%, 30%...)</li>
<li><strong>Risk Events</strong>: Signal rejection tracking</li>
<li><strong>System Events</strong>: Performance metrics and error handling</li>
</ol>
<p><strong>Public API Listeners:</strong></p>
<p>From <code>README.md:175-176</code>, listeners use <code>functools-kit</code> <code>queued</code> wrapper for sequential execution:</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Event</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>listenSignalBacktest</code></td>
<td><code>signalBacktestEmitter</code></td>
<td>Backtest signal events</td>
</tr>
<tr>
<td><code>listenSignalLive</code></td>
<td><code>signalLiveEmitter</code></td>
<td>Live signal events</td>
</tr>
<tr>
<td><code>listenDoneBacktest</code></td>
<td><code>doneBacktestSubject</code></td>
<td>Backtest completion</td>
</tr>
<tr>
<td><code>listenDoneLive</code></td>
<td><code>doneLiveSubject</code></td>
<td>Live completion</td>
</tr>
<tr>
<td><code>listenWalkerProgress</code></td>
<td><code>walkerEmitter</code></td>
<td>Walker progress updates</td>
</tr>
<tr>
<td><code>listenWalkerComplete</code></td>
<td><code>walkerCompleteSubject</code></td>
<td>Walker final results</td>
</tr>
<tr>
<td><code>listenPartialProfit</code></td>
<td><code>partialProfitSubject</code></td>
<td>Profit milestones</td>
</tr>
<tr>
<td><code>listenPartialLoss</code></td>
<td><code>partialLossSubject</code></td>
<td>Loss milestones</td>
</tr>
<tr>
<td><code>listenRisk</code></td>
<td><code>riskSubject</code></td>
<td>Risk validation failures</td>
</tr>
<tr>
<td><code>listenPerformance</code></td>
<td><code>performanceEmitter</code></td>
<td>Execution timing</td>
</tr>
<tr>
<td><code>listenError</code></td>
<td><code>errorEmitter</code></td>
<td>Non-fatal errors</td>
</tr>
<tr>
<td><code>listenExit</code></td>
<td><code>exitEmitter</code></td>
<td>Fatal errors</td>
</tr>
</tbody>
</table>
<p><strong>Markdown Services Integration:</strong></p>
<p>Markdown services <code>src/lib/services/markdown/</code> subscribe to emitters and accumulate events in <code>ReportStorage</code> (max 250 per key) for report generation.</p>
<hr>
<a id="performance--production-features" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Performance &amp; Production Features<a href="#performance--production-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="streaming-architecture" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Streaming Architecture<a href="#streaming-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Backtest Kit uses async generators for memory-efficient streaming:</p>
<p><strong>Generator Patterns:</strong></p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Generator Type</th>
<th>Memory Behavior</th>
<th>Early Termination</th>
</tr>
</thead>
<tbody>
<tr>
<td>Backtest</td>
<td>Finite</td>
<td>O(1) per frame</td>
<td><code>break</code> or return from loop</td>
</tr>
<tr>
<td>Live</td>
<td>Infinite</td>
<td>O(1) per tick</td>
<td>Set stop flag, wait for cleanup</td>
</tr>
<tr>
<td>Walker</td>
<td>Finite</td>
<td>O(strategies)</td>
<td><code>break</code> or return from loop</td>
</tr>
</tbody>
</table>
<p><strong>Implementation:</strong></p>
<p>From <code>src/lib/services/logic/private/BacktestLogicPrivateService.ts:50-150</code>, backtest uses:</p>
<pre><code class="typescript"><span class="hl-4">public</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> *</span><span class="hl-0">generate</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">context</span><span class="hl-1">: </span><span class="hl-4">IBacktestContext</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">frame</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">frames</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">this</span><span class="hl-1">.</span><span class="hl-4">strategyCoreService</span><span class="hl-1">.</span><span class="hl-0">tick</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">frame</span><span class="hl-1">.</span><span class="hl-4">when</span><span class="hl-1">, </span><span class="hl-7">true</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">yield</span><span class="hl-1"> </span><span class="hl-4">result</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-3">yield</span><span class="hl-1"> { </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&#39;done&#39;</span><span class="hl-1">, </span><span class="hl-4">data:</span><span class="hl-1"> </span><span class="hl-4">allClosedSignals</span><span class="hl-1"> };</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event-Driven vs. Pull-Based:</strong></p>
<p>From <code>README.md:201-224</code>, two equivalent consumption models:</p>
<pre><code class="typescript"><span class="hl-5">// Pull-based (async iterator)</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">event</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;BTCUSDT&#39;</span><span class="hl-1">, </span><span class="hl-4">config</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Process event</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Event-driven (background execution)</span><br/><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&#39;BTCUSDT&#39;</span><span class="hl-1">, </span><span class="hl-4">config</span><span class="hl-1">);</span><br/><span class="hl-0">listenSignalBacktest</span><span class="hl-1">(</span><span class="hl-4">event</span><span class="hl-1"> </span><span class="hl-7">=&gt;</span><span class="hl-1"> { </span><span class="hl-5">/* handle */</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="vwap-pricing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">VWAP Pricing<a href="#vwap-pricing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Volume Weighted Average Price ensures realistic entry/exit pricing:</p>
<p><strong>Calculation:</strong></p>
<p><code>ClientExchange.prototype.getVWAP</code> <code>src/client/ClientExchange.ts:150-200</code> computes:</p>
<pre><code><span class="hl-8">VWAP</span><span class="hl-1"> = </span><span class="hl-0">Σ</span><span class="hl-1">(</span><span class="hl-4">price</span><span class="hl-1"> × </span><span class="hl-4">volume</span><span class="hl-1">) / </span><span class="hl-0">Σ</span><span class="hl-1">(</span><span class="hl-4">volume</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<p>Using last <code>CC_AVG_PRICE_CANDLES_COUNT</code> (default: 5) 1-minute candles.</p>
<p><strong>Usage Points:</strong></p>
<ol>
<li><strong>Signal Activation</strong>: When <code>priceOpen</code> is reached, actual entry uses VWAP</li>
<li><strong>TP/SL Execution</strong>: Exit prices calculated from current VWAP</li>
<li><strong>Scheduled Signals</strong>: Check if <code>priceOpen</code> in [VWAP - tolerance, VWAP + tolerance]</li>
</ol>
<p><strong>Configuration:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CC_AVG_PRICE_CANDLES_COUNT</code></td>
<td>5</td>
<td>Number of 1m candles for VWAP</td>
</tr>
<tr>
<td><code>CC_SCHEDULED_PRICE_TOLERANCE_PERCENT</code></td>
<td>0.1%</td>
<td>Tolerance for scheduled activation</td>
</tr>
</tbody>
</table>
<hr>
<a id="self-hosted-deployment" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Self-Hosted Deployment<a href="#self-hosted-deployment" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Zero Vendor Lock-In:</strong></p>
<ul>
<li>No cloud dependencies</li>
<li>No third-party API requirements (except optional Ollama for LLM)</li>
<li>All data processing runs locally</li>
<li>Custom persistence backends supported</li>
</ul>
<p><strong>Dependencies:</strong></p>
<p>From <code>package.json:74-79</code>:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-13">&quot;di-kit&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;^1.0.18&quot;</span><span class="hl-1">,           </span><span class="hl-5">// Dependency injection</span><br/><span class="hl-1">  </span><span class="hl-13">&quot;di-scoped&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;^1.0.20&quot;</span><span class="hl-1">,        </span><span class="hl-5">// Scoped context management</span><br/><span class="hl-1">  </span><span class="hl-13">&quot;functools-kit&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;^1.0.94&quot;</span><span class="hl-1">,    </span><span class="hl-5">// Functional utilities (memoize, iterate)</span><br/><span class="hl-1">  </span><span class="hl-13">&quot;get-moment-stamp&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;^1.1.1&quot;</span><span class="hl-1">   </span><span class="hl-5">// Timestamp utilities</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Peer Dependencies:</strong></p>
<ul>
<li>TypeScript 5.0+ (development only)</li>
<li>Node.js 15+ (runtime)</li>
</ul>
<p><strong>Optional Integrations:</strong></p>
<ul>
<li>CCXT (exchange data)</li>
<li>Ollama (LLM strategies)</li>
<li>Redis (custom persistence)</li>
</ul>
<p><strong>Comparison to QuantConnect:</strong></p>
<p>From <code>README.md:226-236</code>:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Backtest Kit</th>
<th>QuantConnect</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Language</strong></td>
<td>TypeScript/JavaScript</td>
<td>C#</td>
</tr>
<tr>
<td><strong>Hosting</strong></td>
<td>Self-hosted</td>
<td>Cloud-based</td>
</tr>
<tr>
<td><strong>Data</strong></td>
<td>CCXT or custom</td>
<td>Proprietary</td>
</tr>
<tr>
<td><strong>Fees</strong></td>
<td>None</td>
<td>Subscription required</td>
</tr>
<tr>
<td><strong>Extensibility</strong></td>
<td>Full code access</td>
<td>Limited to API</td>
</tr>
</tbody>
</table>
<hr>
<a id="production-readiness" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Production Readiness<a href="#production-readiness" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="code-reusability" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Code Reusability<a href="#code-reusability" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>backtest</code> flag in <code>ExecutionContext</code> enables identical strategy code across modes:</p>
<pre><code class="typescript"><span class="hl-5">// Strategy code (same for backtest and live)</span><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&#39;my-strategy&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">candles</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">getCandles</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-2">&#39;1h&#39;</span><span class="hl-1">, </span><span class="hl-6">24</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-5">// Analysis logic here</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> { </span><span class="hl-4">position:</span><span class="hl-1"> </span><span class="hl-2">&#39;long&#39;</span><span class="hl-1">, ... };</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Backtest execution</span><br/><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;BTCUSDT&#39;</span><span class="hl-1">, { </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&#39;my-strategy&#39;</span><span class="hl-1">, ... });</span><br/><br/><span class="hl-5">// Live execution (same strategy)</span><br/><span class="hl-4">Live</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&#39;BTCUSDT&#39;</span><span class="hl-1">, { </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&#39;my-strategy&#39;</span><span class="hl-1">, ... });</span>
</code><button type="button">Copy</button></pre>

<p><strong>Behavioral Differences:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Backtest</th>
<th>Live</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Persistence</strong></td>
<td>In-memory only</td>
<td>Atomic file writes</td>
</tr>
<tr>
<td><strong>Emitters</strong></td>
<td><code>signalBacktestEmitter</code></td>
<td><code>signalLiveEmitter</code></td>
</tr>
<tr>
<td><strong>Time source</strong></td>
<td>Frame timestamps</td>
<td><code>new Date()</code></td>
</tr>
<tr>
<td><strong>Execution speed</strong></td>
<td>Fast-forward possible</td>
<td>Real-time only</td>
</tr>
</tbody>
</table>
<hr>
<a id="testing-coverage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Testing Coverage<a href="#testing-coverage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>From <code>README.md:243</code>:</p>
<ul>
<li>300+ unit and integration tests</li>
<li>Validation coverage</li>
<li>Recovery scenarios</li>
<li>Event emission verification</li>
<li>Report generation accuracy</li>
</ul>
<p><strong>Test Organization:</strong></p>
<p>Tests use <code>worker-testbed</code> <code>package.json:69</code> for isolated execution environments.</p>
<hr>
<a id="summary-table" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Summary Table<a href="#summary-table" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Feature Category</th>
<th>Key Components</th>
<th>Primary Files</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Time Engine</strong></td>
<td><code>ExecutionContextService</code>, <code>getCandles</code></td>
<td><code>src/lib/services/context/</code>, <code>src/api/getCandles.ts</code></td>
</tr>
<tr>
<td><strong>Validation</strong></td>
<td><code>ClientStrategy.tick</code>, <code>GLOBAL_CONFIG</code></td>
<td><code>src/client/ClientStrategy.ts</code>, <code>src/config/params.ts</code></td>
</tr>
<tr>
<td><strong>Persistence</strong></td>
<td><code>PersistSignalAdapter</code>, <code>PersistBase</code></td>
<td><code>src/lib/services/persist/</code></td>
</tr>
<tr>
<td><strong>Risk</strong></td>
<td><code>ClientRisk</code>, <code>RiskGlobalService</code></td>
<td><code>src/client/ClientRisk.ts</code>, <code>src/lib/services/global/RiskGlobalService.ts</code></td>
</tr>
<tr>
<td><strong>LLM Integration</strong></td>
<td><code>ClientOptimizer</code>, <code>OptimizerTemplateService</code></td>
<td><code>src/client/ClientOptimizer.ts</code>, <code>src/lib/services/template/OptimizerTemplateService.ts</code></td>
</tr>
<tr>
<td><strong>Events</strong></td>
<td>13 emitters in <code>emitters.ts</code></td>
<td><code>src/config/emitters.ts</code></td>
</tr>
<tr>
<td><strong>Reporting</strong></td>
<td>Markdown services, <code>ReportStorage</code></td>
<td><code>src/lib/services/markdown/</code></td>
</tr>
<tr>
<td><strong>Data Sources</strong></td>
<td><code>ClientExchange</code>, CCXT integration</td>
<td><code>src/client/ClientExchange.ts</code></td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#key-features"><span>Key <wbr/>Features</span></a><ul><li><a href="#core-architectural-features"><span>Core <wbr/>Architectural <wbr/>Features</span></a></li><li><ul><li><a href="#look-ahead-bias-prevention"><span>Look-<wbr/>Ahead <wbr/>Bias <wbr/>Prevention</span></a></li><li><a href="#multi-mode-execution"><span>Multi-<wbr/>Mode <wbr/>Execution</span></a></li></ul></li><li><a href="#validation--safety-features"><span>Validation &amp; <wbr/>Safety <wbr/>Features</span></a></li><li><ul><li><a href="#signal-validation-pipeline"><span>Signal <wbr/>Validation <wbr/>Pipeline</span></a></li><li><a href="#crash-safe-persistence"><span>Crash-<wbr/>Safe <wbr/>Persistence</span></a></li><li><a href="#risk-management"><span>Risk <wbr/>Management</span></a></li></ul></li><li><a href="#integration--extensibility"><span>Integration &amp; <wbr/>Extensibility</span></a></li><li><ul><li><a href="#llm-powered-strategy-generation"><span>LLM-<wbr/>Powered <wbr/>Strategy <wbr/>Generation</span></a></li><li><a href="#pluggable-data-sources"><span>Pluggable <wbr/>Data <wbr/>Sources</span></a></li><li><a href="#event-driven-monitoring"><span>Event-<wbr/>Driven <wbr/>Monitoring</span></a></li></ul></li><li><a href="#performance--production-features"><span>Performance &amp; <wbr/>Production <wbr/>Features</span></a></li><li><ul><li><a href="#streaming-architecture"><span>Streaming <wbr/>Architecture</span></a></li><li><a href="#vwap-pricing"><span>VWAP <wbr/>Pricing</span></a></li><li><a href="#self-hosted-deployment"><span>Self-<wbr/>Hosted <wbr/>Deployment</span></a></li></ul></li><li><a href="#production-readiness"><span>Production <wbr/>Readiness</span></a></li><li><ul><li><a href="#code-reusability"><span>Code <wbr/>Reusability</span></a></li><li><a href="#testing-coverage"><span>Testing <wbr/>Coverage</span></a></li></ul></li><li><a href="#summary-table"><span>Summary <wbr/>Table</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
