<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/22_exchange_functions | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_22_exchange_functions.html">design/22_exchange_functions</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="exchange-functions" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Exchange Functions<a href="#exchange-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page documents the exchange helper functions provided by the framework for working with exchange data within strategy code. The primary focus is on the formatting functions <code>formatPrice</code> and <code>formatQuantity</code>, which enable strategies to display prices and quantities according to exchange-specific precision rules.</p>
<p>For information about implementing custom exchange integrations, see <a href="design_86_custom_exchange_integration.html">Custom Exchange Integration</a>. For information about the Exchange client implementation, see <a href="design_34_clientexchange.html">ClientExchange</a>. For information about exchange schemas and registration, see <a href="design_26_exchange_schemas.html">Exchange Schemas</a>.</p>
<hr>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The framework exports six helper functions from <a href="">src/function/exchange.ts</a> that strategies can call to interact with exchange data:</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Category</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>formatPrice</code></td>
<td>Formatting</td>
<td>Format price values for display</td>
</tr>
<tr>
<td><code>formatQuantity</code></td>
<td>Formatting</td>
<td>Format quantity values for display</td>
</tr>
<tr>
<td><code>getCandles</code></td>
<td>Market Data</td>
<td>Fetch historical candle data</td>
</tr>
<tr>
<td><code>getAveragePrice</code></td>
<td>Price Calculation</td>
<td>Calculate VWAP from recent candles</td>
</tr>
<tr>
<td><code>getDate</code></td>
<td>Context</td>
<td>Get current execution timestamp</td>
</tr>
<tr>
<td><code>getMode</code></td>
<td>Context</td>
<td>Check if running in backtest mode</td>
</tr>
</tbody>
</table>
<p>All functions respect <strong>temporal isolation</strong> via <code>ExecutionContextService</code> and <strong>schema routing</strong> via <code>MethodContextService</code>, ensuring strategies access the correct exchange instance and cannot peek into future data during backtests.</p>
<hr>
<a id="formatting-functions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Formatting Functions<a href="#formatting-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The formatting functions delegate to exchange-specific implementations registered via <code>IExchangeSchema</code>. Each exchange defines its own precision rules (e.g., Bitcoin might display as &quot;50123.45&quot; while some altcoins use different decimal places).</p>
<a id="formatprice-function" class="tsd-anchor"></a><h3 class="tsd-anchor-link">formatPrice Function<a href="#formatprice-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">formatPrice</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-6">string</span><span class="hl-2">, </span><span class="hl-6">price</span><span class="hl-2">: </span><span class="hl-6">number</span><span class="hl-2">): </span><span class="hl-11">Promise</span><span class="hl-2">&lt;</span><span class="hl-6">string</span><span class="hl-2">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Formats a price value according to the exchange's precision rules for the specified trading pair.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>symbol</code>: Trading pair symbol (e.g., &quot;BTCUSDT&quot;)</li>
<li><code>price</code>: Raw price value to format</li>
</ul>
<p><strong>Returns</strong>: Promise resolving to formatted price string</p>
<p><strong>Example Usage</strong>:</p>
<pre><code class="typescript"><span class="hl-5">import</span><span class="hl-2"> { </span><span class="hl-6">formatPrice</span><span class="hl-2">, </span><span class="hl-6">getAveragePrice</span><span class="hl-2"> } </span><span class="hl-5">from</span><span class="hl-2"> </span><span class="hl-4">&quot;backtest-kit&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-3">function</span><span class="hl-2"> </span><span class="hl-1">myStrategy</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">currentPrice</span><span class="hl-2"> = </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-1">getAveragePrice</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">);</span><br/><span class="hl-2">  </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">formatted</span><span class="hl-2"> = </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-1">formatPrice</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">, </span><span class="hl-6">currentPrice</span><span class="hl-2">);</span><br/><span class="hl-2">  </span><span class="hl-6">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-4">`Current price: </span><span class="hl-3">${</span><span class="hl-6">formatted</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-2">); </span><span class="hl-0">// e.g., &quot;50123.45&quot;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Flow</strong>:</p>
<ol>
<li>Reads <code>exchangeName</code> from <code>MethodContextService.context</code></li>
<li>Routes to <code>ExchangeGlobalService.formatPrice()</code></li>
<li>Delegates to <code>ClientExchange.formatPrice()</code></li>
<li>Calls the <code>formatPrice</code> function from the registered <code>IExchangeSchema</code></li>
</ol>
<a id="formatquantity-function" class="tsd-anchor"></a><h3 class="tsd-anchor-link">formatQuantity Function<a href="#formatquantity-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">formatQuantity</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-6">string</span><span class="hl-2">, </span><span class="hl-6">quantity</span><span class="hl-2">: </span><span class="hl-6">number</span><span class="hl-2">): </span><span class="hl-11">Promise</span><span class="hl-2">&lt;</span><span class="hl-6">string</span><span class="hl-2">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Formats a quantity value according to the exchange's precision rules for the specified trading pair.</p>
<p><strong>Parameters</strong>:</p>
<ul>
<li><code>symbol</code>: Trading pair symbol (e.g., &quot;BTCUSDT&quot;)</li>
<li><code>quantity</code>: Raw quantity value to format</li>
</ul>
<p><strong>Returns</strong>: Promise resolving to formatted quantity string</p>
<p><strong>Example Usage</strong>:</p>
<pre><code class="typescript"><span class="hl-5">import</span><span class="hl-2"> { </span><span class="hl-6">formatQuantity</span><span class="hl-2"> } </span><span class="hl-5">from</span><span class="hl-2"> </span><span class="hl-4">&quot;backtest-kit&quot;</span><span class="hl-2">;</span><br/><br/><span class="hl-3">async</span><span class="hl-2"> </span><span class="hl-3">function</span><span class="hl-2"> </span><span class="hl-1">myStrategy</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">positionSize</span><span class="hl-2"> = </span><span class="hl-7">0.12345678</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">formatted</span><span class="hl-2"> = </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-1">formatQuantity</span><span class="hl-2">(</span><span class="hl-6">symbol</span><span class="hl-2">, </span><span class="hl-6">positionSize</span><span class="hl-2">);</span><br/><span class="hl-2">  </span><span class="hl-6">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-4">`Position size: </span><span class="hl-3">${</span><span class="hl-6">formatted</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-2">); </span><span class="hl-0">// e.g., &quot;0.1234&quot; (4 decimals)</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Flow</strong>: Same as <code>formatPrice</code>, but routes to the <code>formatQuantity</code> function from <code>IExchangeSchema</code>.</p>
<hr>
<a id="service-layer-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Service Layer Architecture<a href="#service-layer-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The diagram below shows how exchange helper functions integrate with the service layer and maintain temporal isolation.</p>
<p><strong>Diagram: Exchange Function Call Flow</strong></p>
<p><img src="../media/22_Exchange_Functions_0.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="market-data-access-functions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Market Data Access Functions<a href="#market-data-access-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These functions are documented in detail on separate pages but are mentioned here for completeness.</p>
<a id="getcandles" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getCandles<a href="#getcandles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Fetches historical candle data backwards from the current execution context time. Used for technical indicator calculations.</p>
<p>See detailed documentation for <code>getCandles</code> function reference.</p>
<p><strong>Key Features</strong>:</p>
<ul>
<li>Respects temporal isolation (cannot fetch future data in backtests)</li>
<li>Returns OHLCV data (<code>ICandleData[]</code>)</li>
<li>Delegates to exchange-specific implementation</li>
</ul>
<a id="getaverageprice" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getAveragePrice<a href="#getaverageprice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Calculates Volume Weighted Average Price (VWAP) from the last 5 one-minute candles. This is the price used for all entry/exit decisions in the framework to simulate realistic execution.</p>
<p>See detailed documentation for <code>getAveragePrice</code> function reference.</p>
<p><strong>Formula</strong>: VWAP = Σ(Typical Price × Volume) / Σ(Volume)<br>
where Typical Price = (High + Low + Close) / 3</p>
<hr>
<a id="context-utility-functions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Context Utility Functions<a href="#context-utility-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>These functions provide read access to the current execution context without requiring explicit parameter passing.</p>
<a id="getdate" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getDate<a href="#getdate" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">getDate</span><span class="hl-2">(): </span><span class="hl-6">Date</span>
</code><button type="button">Copy</button></pre>

<p>Returns the current execution timestamp from <code>ExecutionContextService</code>. In live mode, this is <code>Date.now()</code>. In backtest mode, this is the current candle timestamp being processed.</p>
<p><strong>Returns</strong>: Current execution timestamp as Date object</p>
<p><strong>Use Case</strong>: Logging, calculating time-based conditions, or debugging temporal issues.</p>
<a id="getmode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getMode<a href="#getmode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-1">getMode</span><span class="hl-2">(): </span><span class="hl-6">boolean</span>
</code><button type="button">Copy</button></pre>

<p>Returns whether the current execution is running in backtest mode (<code>true</code>) or live mode (<code>false</code>).</p>
<p><strong>Returns</strong>: Boolean indicating backtest mode</p>
<p><strong>Use Case</strong>: Conditional logic that should behave differently in live vs backtest (e.g., reduced logging in backtest).</p>
<hr>
<a id="temporal-isolation-mechanism" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Temporal Isolation Mechanism<a href="#temporal-isolation-mechanism" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The diagram below illustrates how temporal isolation is maintained when exchange functions are called during strategy execution.</p>
<p><strong>Diagram: Temporal Isolation in Exchange Functions</strong></p>
<p><img src="../media/22_Exchange_Functions_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Key Points</strong>:</p>
<ol>
<li>
<p><strong>Context Propagation</strong>: <code>ExecutionContextService</code> uses <code>AsyncLocalStorage</code> to propagate the current execution timestamp implicitly without manual parameter passing.</p>
</li>
<li>
<p><strong>Backwards Fetching</strong>: <code>ClientExchange.getCandles()</code> always fetches data <strong>backwards</strong> from the current <code>when</code> timestamp, preventing look-ahead bias.</p>
</li>
<li>
<p><strong>Forward Fetching (Backtest Only)</strong>: <code>ClientExchange.getNextCandles()</code> is used internally during backtests to fast-forward through candles but is not exposed to user strategy code.</p>
</li>
</ol>
<hr>
<a id="memoization-and-instance-management" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Memoization and Instance Management<a href="#memoization-and-instance-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>ExchangeConnectionService</code> uses memoization to cache <code>ClientExchange</code> instances, ensuring each symbol-exchange combination has a single shared instance across all strategy executions.</p>
<p><strong>Memoization Key Format</strong>: <code>{symbol}:{exchangeName}:{backtest ? 'backtest' : 'live'}</code></p>
<p><strong>Example</strong>:</p>
<ul>
<li><code>&quot;BTCUSDT:binance:backtest&quot;</code> - Separate instance for backtesting</li>
<li><code>&quot;BTCUSDT:binance:live&quot;</code> - Separate instance for live trading</li>
</ul>
<p>This separation ensures backtest and live executions maintain independent state and cannot interfere with each other.</p>
<hr>
<a id="integration-with-iexchangeschema" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with IExchangeSchema<a href="#integration-with-iexchangeschema" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When users register an exchange via <code>addExchange()</code>, they provide implementations for three required functions:</p>
<pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">IExchangeSchema</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">exchangeName</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-1">getCandles</span><span class="hl-2">: (</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">, </span><span class="hl-6">interval</span><span class="hl-2">: </span><span class="hl-11">CandleInterval</span><span class="hl-2">, </span><span class="hl-6">since</span><span class="hl-2">: </span><span class="hl-11">Date</span><span class="hl-2">, </span><span class="hl-6">limit</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">Promise</span><span class="hl-2">&lt;</span><span class="hl-11">ICandleData</span><span class="hl-2">[]&gt;;</span><br/><span class="hl-2">  </span><span class="hl-1">formatPrice</span><span class="hl-2">: (</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">, </span><span class="hl-6">price</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">Promise</span><span class="hl-2">&lt;</span><span class="hl-11">string</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">  </span><span class="hl-1">formatQuantity</span><span class="hl-2">: (</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">, </span><span class="hl-6">quantity</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">Promise</span><span class="hl-2">&lt;</span><span class="hl-11">string</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">  </span><span class="hl-6">callbacks</span><span class="hl-2">?: </span><span class="hl-11">Partial</span><span class="hl-2">&lt;</span><span class="hl-11">IExchangeCallbacks</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<p>The helper functions documented on this page ultimately delegate to these user-defined implementations:</p>
<table>
<thead>
<tr>
<th>Helper Function</th>
<th>Delegates To</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>formatPrice()</code></td>
<td><code>IExchangeSchema.formatPrice</code></td>
</tr>
<tr>
<td><code>formatQuantity()</code></td>
<td><code>IExchangeSchema.formatQuantity</code></td>
</tr>
<tr>
<td><code>getCandles()</code></td>
<td><code>IExchangeSchema.getCandles</code> (via <code>ClientExchange</code>)</td>
</tr>
<tr>
<td><code>getAveragePrice()</code></td>
<td>Uses <code>getCandles()</code> + VWAP calculation</td>
</tr>
</tbody>
</table>
<hr>
<a id="summary-table" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Summary Table<a href="#summary-table" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Function</th>
<th>Input</th>
<th>Output</th>
<th>Use Case</th>
<th>Temporal Isolated</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>formatPrice</code></td>
<td>symbol, price</td>
<td>formatted string</td>
<td>Display prices in logs/reports</td>
<td>N/A</td>
</tr>
<tr>
<td><code>formatQuantity</code></td>
<td>symbol, quantity</td>
<td>formatted string</td>
<td>Display quantities in logs/reports</td>
<td>N/A</td>
</tr>
<tr>
<td><code>getCandles</code></td>
<td>symbol, interval, limit</td>
<td>ICandleData[]</td>
<td>Technical indicators</td>
<td>Yes</td>
</tr>
<tr>
<td><code>getAveragePrice</code></td>
<td>symbol</td>
<td>number (VWAP)</td>
<td>Current market price</td>
<td>Yes</td>
</tr>
<tr>
<td><code>getDate</code></td>
<td>none</td>
<td>Date</td>
<td>Current execution time</td>
<td>N/A</td>
</tr>
<tr>
<td><code>getMode</code></td>
<td>none</td>
<td>boolean</td>
<td>Check if backtesting</td>
<td>N/A</td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#exchange-functions"><span>Exchange <wbr/>Functions</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#formatting-functions"><span>Formatting <wbr/>Functions</span></a></li><li><ul><li><a href="#formatprice-function"><span>format<wbr/>Price <wbr/>Function</span></a></li><li><a href="#formatquantity-function"><span>format<wbr/>Quantity <wbr/>Function</span></a></li></ul></li><li><a href="#service-layer-architecture"><span>Service <wbr/>Layer <wbr/>Architecture</span></a></li><li><a href="#market-data-access-functions"><span>Market <wbr/>Data <wbr/>Access <wbr/>Functions</span></a></li><li><ul><li><a href="#getcandles"><span>get<wbr/>Candles</span></a></li><li><a href="#getaverageprice"><span>get<wbr/>Average<wbr/>Price</span></a></li></ul></li><li><a href="#context-utility-functions"><span>Context <wbr/>Utility <wbr/>Functions</span></a></li><li><ul><li><a href="#getdate"><span>get<wbr/>Date</span></a></li><li><a href="#getmode"><span>get<wbr/>Mode</span></a></li></ul></li><li><a href="#temporal-isolation-mechanism"><span>Temporal <wbr/>Isolation <wbr/>Mechanism</span></a></li><li><a href="#memoization-and-instance-management"><span>Memoization and <wbr/>Instance <wbr/>Management</span></a></li><li><a href="#integration-with-iexchangeschema"><span>Integration with IExchange<wbr/>Schema</span></a></li><li><a href="#summary-table"><span>Summary <wbr/>Table</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
