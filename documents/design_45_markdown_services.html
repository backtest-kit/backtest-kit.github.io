<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/45_markdown_services | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_45_markdown_services.html">design/45_markdown_services</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="markdown-services" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Markdown Services<a href="#markdown-services" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="purpose-and-scope" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Purpose and Scope<a href="#purpose-and-scope" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This document describes the Markdown Services subsystem, which provides automated report generation and performance analytics for backtesting and live trading operations. These services subscribe to execution events, accumulate statistical data, and generate markdown-formatted reports with comprehensive trading metrics.</p>
<p>For information about the event system that feeds these services, see <a href="design_13_event_system.html">Event System</a>. For details on the execution modes that generate events, see <a href="design_06_execution_modes.html">Execution Modes</a>.</p>
<hr>
<a id="service-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Service Architecture<a href="#service-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Markdown Services subsystem consists of three specialized service classes, each responsible for reporting on a specific execution mode:</p>
<p><img src="../media/45_Markdown_Services_0.svg" alt="Mermaid Diagram"></p>
<table>
<thead>
<tr>
<th>Service</th>
<th>Event Source</th>
<th>Data Stored</th>
<th>Primary Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BacktestMarkdownService</code></td>
<td><code>signalBacktestEmitter</code></td>
<td>Closed signals only</td>
<td>Historical backtest performance analysis</td>
</tr>
<tr>
<td><code>LiveMarkdownService</code></td>
<td><code>signalLiveEmitter</code></td>
<td>All events (idle, opened, active, closed)</td>
<td>Real-time trading activity monitoring</td>
</tr>
<tr>
<td><code>ScheduleMarkdownService</code></td>
<td><code>signalEmitter</code>, <code>signalLiveEmitter</code></td>
<td>Scheduled and cancelled signals</td>
<td>Limit order execution tracking</td>
</tr>
</tbody>
</table>
<hr>
<a id="data-flow-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Data Flow Architecture<a href="#data-flow-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The following diagram illustrates how trading events flow from execution contexts through emitters to markdown services, and finally to persistent reports:</p>
<p><img src="../media/45_Markdown_Services_1.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="backtestmarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">BacktestMarkdownService<a href="#backtestmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="purpose" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Purpose<a href="#purpose" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>BacktestMarkdownService</code> generates performance reports for historical backtesting by accumulating closed signals and calculating trading statistics. It only processes <code>closed</code> action events, ignoring intermediate states.</p>
<a id="event-subscription" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Subscription<a href="#event-subscription" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The service subscribes to <code>signalBacktestEmitter</code> during initialization using the <code>singleshot</code> pattern to ensure one-time setup:</p>
<p><img src="../media/45_Markdown_Services_2.svg" alt="Mermaid Diagram"></p>
<a id="internal-storage-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Internal Storage Structure<a href="#internal-storage-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each strategy gets an isolated <code>ReportStorage</code> instance via memoization:</p>
<p><img src="../media/45_Markdown_Services_3.svg" alt="Mermaid Diagram"></p>
<a id="statistics-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">BacktestStatistics</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">signalList</span><span class="hl-1">: </span><span class="hl-10">IStrategyTickResultClosed</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-4">totalSignals</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winCount</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">lossCount</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winRate</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;          </span><span class="hl-5">// 0-100%, null if unsafe</span><br/><span class="hl-1">  </span><span class="hl-4">avgPnl</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;            </span><span class="hl-5">// Average PNL %</span><br/><span class="hl-1">  </span><span class="hl-4">totalPnl</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;          </span><span class="hl-5">// Cumulative PNL %</span><br/><span class="hl-1">  </span><span class="hl-4">stdDev</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;            </span><span class="hl-5">// Volatility</span><br/><span class="hl-1">  </span><span class="hl-4">sharpeRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;       </span><span class="hl-5">// avgPnl / stdDev</span><br/><span class="hl-1">  </span><span class="hl-4">annualizedSharpeRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;  </span><span class="hl-5">// sharpeRatio × √365</span><br/><span class="hl-1">  </span><span class="hl-4">certaintyRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;    </span><span class="hl-5">// avgWin / |avgLoss|</span><br/><span class="hl-1">  </span><span class="hl-4">expectedYearlyReturns</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;  </span><span class="hl-5">// Projected annual return</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="safe-math-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Safe Math Pattern<a href="#safe-math-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All numeric metrics use the <code>isUnsafe()</code> function to guard against <code>NaN</code>, <code>Infinity</code>, and invalid calculations:</p>
<hr>
<a id="livemarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">LiveMarkdownService<a href="#livemarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="purpose-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Purpose<a href="#purpose-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>LiveMarkdownService</code> tracks real-time trading activity by accumulating all tick events (idle, opened, active, closed) and provides comprehensive live trading analytics.</p>
<a id="event-types-tracked" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Types Tracked<a href="#event-types-tracked" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Event Type</th>
<th>Stored As</th>
<th>Update Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>idle</code></td>
<td><code>TickEvent</code></td>
<td>Replaces last idle if no open/active signals follow</td>
</tr>
<tr>
<td><code>opened</code></td>
<td><code>TickEvent</code></td>
<td>Appends to event list</td>
</tr>
<tr>
<td><code>active</code></td>
<td><code>TickEvent</code></td>
<td>Replaces existing event with same <code>signalId</code></td>
</tr>
<tr>
<td><code>closed</code></td>
<td><code>TickEvent</code></td>
<td>Replaces existing event with same <code>signalId</code></td>
</tr>
</tbody>
</table>
<a id="event-accumulation-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Accumulation Logic<a href="#event-accumulation-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/45_Markdown_Services_4.svg" alt="Mermaid Diagram"></p>
<a id="max_events-limit" class="tsd-anchor"></a><h3 class="tsd-anchor-link">MAX_EVENTS Limit<a href="#max_events-limit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The service maintains a bounded queue of 250 events to prevent memory leaks in long-running live trading sessions:</p>
<hr>
<a id="schedulemarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">ScheduleMarkdownService<a href="#schedulemarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="purpose-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Purpose<a href="#purpose-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>ScheduleMarkdownService</code> tracks scheduled limit orders and their lifecycle outcomes (activated vs. cancelled), providing cancellation rate analytics.</p>
<a id="event-subscription-strategy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Subscription Strategy<a href="#event-subscription-strategy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Unlike the other services, <code>ScheduleMarkdownService</code> subscribes to both <code>signalLiveEmitter</code> and the global <code>signalEmitter</code> to capture scheduled signals from live trading:</p>
<a id="statistics-interface-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">ScheduleStatistics</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">eventList</span><span class="hl-1">: </span><span class="hl-10">ScheduledEvent</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><span class="hl-4">totalEvents</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalScheduled</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalCancelled</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">cancellationRate</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;  </span><span class="hl-5">// 0-100%, null if no scheduled</span><br/><span class="hl-1">  </span><span class="hl-4">avgWaitTime</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;       </span><span class="hl-5">// Minutes, null if no cancelled</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="cancellation-rate-calculation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Cancellation Rate Calculation<a href="#cancellation-rate-calculation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The cancellation rate metric indicates what percentage of scheduled limit orders were cancelled without execution:</p>
<pre><code><span class="hl-4">cancellationRate</span><span class="hl-1"> = (</span><span class="hl-4">totalCancelled</span><span class="hl-1"> / </span><span class="hl-4">totalScheduled</span><span class="hl-1">) × </span><span class="hl-8">100</span>
</code><button>Copy</button></pre>

<hr>
<a id="reportstorage-pattern" class="tsd-anchor"></a><h2 class="tsd-anchor-link">ReportStorage Pattern<a href="#reportstorage-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="architecture" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Architecture<a href="#architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each markdown service contains an internal <code>ReportStorage</code> class that implements the Controller-View pattern for data management:</p>
<p><img src="../media/45_Markdown_Services_5.svg" alt="Mermaid Diagram"></p>
<a id="memoization-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memoization Pattern<a href="#memoization-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Services use <code>functools-kit</code> memoization to create one <code>ReportStorage</code> instance per strategy:</p>
<hr>
<a id="statistics-calculation-pipeline" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Statistics Calculation Pipeline<a href="#statistics-calculation-pipeline" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="calculation-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Calculation Flow<a href="#calculation-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/45_Markdown_Services_6.svg" alt="Mermaid Diagram"></p>
<a id="metric-definitions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Metric Definitions<a href="#metric-definitions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Metric</th>
<th>Formula</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td>Win Rate</td>
<td><code>(winCount / totalSignals) × 100</code></td>
<td>Percentage of profitable trades</td>
</tr>
<tr>
<td>Sharpe Ratio</td>
<td><code>avgPnl / stdDev</code></td>
<td>Risk-adjusted return (higher is better)</td>
</tr>
<tr>
<td>Annualized Sharpe</td>
<td><code>sharpeRatio × √365</code></td>
<td>Annual risk-adjusted return</td>
</tr>
<tr>
<td>Certainty Ratio</td>
<td>`avgWin /</td>
<td>avgLoss</td>
</tr>
<tr>
<td>Expected Yearly Returns</td>
<td><code>avgPnl × (365 / avgDurationDays)</code></td>
<td>Projected annual profit %</td>
</tr>
</tbody>
</table>
<hr>
<a id="report-generation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Report Generation<a href="#report-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="markdown-table-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Markdown Table Structure<a href="#markdown-table-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All services generate markdown reports with column-based tables for event data:</p>
<p><img src="../media/45_Markdown_Services_7.svg" alt="Mermaid Diagram"></p>
<a id="column-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Column Configuration<a href="#column-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Columns are defined as arrays of objects with <code>key</code>, <code>label</code>, and <code>format</code> properties:</p>
<a id="file-output" class="tsd-anchor"></a><h3 class="tsd-anchor-link">File Output<a href="#file-output" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>dump()</code> method writes reports to disk with the following structure:</p>
<pre><code><span class="hl-1">.</span><span class="hl-15">/logs/</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">/</span><br/><span class="hl-1">    {</span><span class="hl-4">strategyName</span><span class="hl-1">}.</span><span class="hl-4">md</span><br/><span class="hl-1">  </span><span class="hl-4">live</span><span class="hl-1">/</span><br/><span class="hl-1">    {</span><span class="hl-4">strategyName</span><span class="hl-1">}.</span><span class="hl-4">md</span><br/><span class="hl-1">  </span><span class="hl-4">schedule</span><span class="hl-1">/</span><br/><span class="hl-1">    {</span><span class="hl-4">strategyName</span><span class="hl-1">}.</span><span class="hl-4">md</span>
</code><button>Copy</button></pre>

<hr>
<a id="integration-with-public-api" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Public API<a href="#integration-with-public-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="class-delegation-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Class Delegation Pattern<a href="#class-delegation-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Public API classes (<code>Backtest</code>, <code>Live</code>, <code>Schedule</code>) delegate to markdown services through the dependency injection container:</p>
<p><img src="../media/45_Markdown_Services_8.svg" alt="Mermaid Diagram"></p>
<a id="method-mapping" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Method Mapping<a href="#method-mapping" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Public Method</th>
<th>Service Method</th>
<th>Return Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>Backtest.getData(strategyName)</code></td>
<td><code>backtestMarkdownService.getData(strategyName)</code></td>
<td><code>BacktestStatistics</code></td>
</tr>
<tr>
<td><code>Backtest.getReport(strategyName)</code></td>
<td><code>backtestMarkdownService.getReport(strategyName)</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>Backtest.dump(strategyName, path?)</code></td>
<td><code>backtestMarkdownService.dump(strategyName, path)</code></td>
<td><code>void</code></td>
</tr>
<tr>
<td><code>Live.getData(strategyName)</code></td>
<td><code>liveMarkdownService.getData(strategyName)</code></td>
<td><code>LiveStatistics</code></td>
</tr>
<tr>
<td><code>Live.getReport(strategyName)</code></td>
<td><code>liveMarkdownService.getReport(strategyName)</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>Live.dump(strategyName, path?)</code></td>
<td><code>liveMarkdownService.dump(strategyName, path)</code></td>
<td><code>void</code></td>
</tr>
<tr>
<td><code>Schedule.getData(strategyName)</code></td>
<td><code>scheduleMarkdownService.getData(strategyName)</code></td>
<td><code>ScheduleStatistics</code></td>
</tr>
<tr>
<td><code>Schedule.getReport(strategyName)</code></td>
<td><code>scheduleMarkdownService.getReport(strategyName)</code></td>
<td><code>string</code></td>
</tr>
<tr>
<td><code>Schedule.dump(strategyName, path?)</code></td>
<td><code>scheduleMarkdownService.dump(strategyName, path)</code></td>
<td><code>void</code></td>
</tr>
</tbody>
</table>
<hr>
<a id="service-lifecycle" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Service Lifecycle<a href="#service-lifecycle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="initialization-sequence" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Initialization Sequence<a href="#initialization-sequence" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/45_Markdown_Services_9.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="clear-operation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Clear Operation<a href="#clear-operation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All markdown services implement a <code>clear()</code> method to reset accumulated data:</p>
<p><img src="../media/45_Markdown_Services_10.svg" alt="Mermaid Diagram"></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#markdown-services"><span>Markdown <wbr/>Services</span></a><ul><li><a href="#purpose-and-scope"><span>Purpose and <wbr/>Scope</span></a></li><li><a href="#service-architecture"><span>Service <wbr/>Architecture</span></a></li><li><a href="#data-flow-architecture"><span>Data <wbr/>Flow <wbr/>Architecture</span></a></li><li><a href="#backtestmarkdownservice"><span>Backtest<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#purpose"><span>Purpose</span></a></li><li><a href="#event-subscription"><span>Event <wbr/>Subscription</span></a></li><li><a href="#internal-storage-structure"><span>Internal <wbr/>Storage <wbr/>Structure</span></a></li><li><a href="#statistics-interface"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#safe-math-pattern"><span>Safe <wbr/>Math <wbr/>Pattern</span></a></li></ul></li><li><a href="#livemarkdownservice"><span>Live<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#purpose-1"><span>Purpose</span></a></li><li><a href="#event-types-tracked"><span>Event <wbr/>Types <wbr/>Tracked</span></a></li><li><a href="#event-accumulation-logic"><span>Event <wbr/>Accumulation <wbr/>Logic</span></a></li><li><a href="#max_events-limit"><span>MAX_<wbr/>EVENTS <wbr/>Limit</span></a></li></ul></li><li><a href="#schedulemarkdownservice"><span>Schedule<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#purpose-2"><span>Purpose</span></a></li><li><a href="#event-subscription-strategy"><span>Event <wbr/>Subscription <wbr/>Strategy</span></a></li><li><a href="#statistics-interface-1"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#cancellation-rate-calculation"><span>Cancellation <wbr/>Rate <wbr/>Calculation</span></a></li></ul></li><li><a href="#reportstorage-pattern"><span>Report<wbr/>Storage <wbr/>Pattern</span></a></li><li><ul><li><a href="#architecture"><span>Architecture</span></a></li><li><a href="#memoization-pattern"><span>Memoization <wbr/>Pattern</span></a></li></ul></li><li><a href="#statistics-calculation-pipeline"><span>Statistics <wbr/>Calculation <wbr/>Pipeline</span></a></li><li><ul><li><a href="#calculation-flow"><span>Calculation <wbr/>Flow</span></a></li><li><a href="#metric-definitions"><span>Metric <wbr/>Definitions</span></a></li></ul></li><li><a href="#report-generation"><span>Report <wbr/>Generation</span></a></li><li><ul><li><a href="#markdown-table-structure"><span>Markdown <wbr/>Table <wbr/>Structure</span></a></li><li><a href="#column-configuration"><span>Column <wbr/>Configuration</span></a></li><li><a href="#file-output"><span>File <wbr/>Output</span></a></li></ul></li><li><a href="#integration-with-public-api"><span>Integration with <wbr/>Public API</span></a></li><li><ul><li><a href="#class-delegation-pattern"><span>Class <wbr/>Delegation <wbr/>Pattern</span></a></li><li><a href="#method-mapping"><span>Method <wbr/>Mapping</span></a></li></ul></li><li><a href="#service-lifecycle"><span>Service <wbr/>Lifecycle</span></a></li><li><ul><li><a href="#initialization-sequence"><span>Initialization <wbr/>Sequence</span></a></li></ul></li><li><a href="#clear-operation"><span>Clear <wbr/>Operation</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
