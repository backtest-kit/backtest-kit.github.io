<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/21_backtest-mode | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_21_backtest-mode.html">design/21_backtest-mode</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="backtest-mode" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Backtest Mode<a href="#backtest-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p><strong>Purpose</strong>: This document explains the historical simulation mode of Backtest Kit, covering timeframe iteration, fast backtest optimization, progress tracking, and deterministic execution. For real-time trading, see <a href="design_20_execution-modes.html">Live Trading Mode</a>. For strategy comparison, see <a href="design_20_execution-modes.html">Walker</a>.</p>
<p><strong>Scope</strong>: Backtest mode simulates trading strategies on historical data from a defined start date to end date. It provides deterministic, reproducible results by iterating through time in discrete steps without access to future data.</p>
<hr>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Backtest mode executes strategies against historical market data to evaluate performance before risking real capital. Unlike <a href="design_20_execution-modes.html">Live Trading Mode</a>, which runs continuously with real-time data, backtest mode operates on a bounded timeframe with a known start and end.</p>
<p><strong>Key Characteristics</strong>:</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Time Model</strong></td>
<td>Discrete timeframes from <code>startDate</code> to <code>endDate</code></td>
</tr>
<tr>
<td><strong>Data Access</strong></td>
<td>Historical candles fetched from <code>IExchangeSchema.getCandles</code></td>
</tr>
<tr>
<td><strong>Execution</strong></td>
<td>Synchronous iteration through timeframes</td>
</tr>
<tr>
<td><strong>Completion</strong></td>
<td>Finite - terminates when all timeframes processed</td>
</tr>
<tr>
<td><strong>Persistence</strong></td>
<td>None - signals exist only in memory</td>
</tr>
<tr>
<td><strong>Results</strong></td>
<td>All closed signals returned at completion</td>
</tr>
</tbody>
</table>
<hr>
<a id="entry-points" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Entry Points<a href="#entry-points" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Backtest mode is accessed through the <code>Backtest</code> class, which provides two execution patterns:</p>
<a id="backtestrun---async-generator-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.run() - Async Generator Pattern<a href="#backtestrun---async-generator-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-5">// result: IStrategyTickResultClosed</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">closeReason</span><span class="hl-1">, </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">pnl</span><span class="hl-1">.</span><span class="hl-4">pnlPercentage</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Yields closed signals as they complete during the backtest. Useful for:</p>
<ul>
<li>Research and analysis requiring incremental results</li>
<li>Early termination based on conditions</li>
<li>Real-time processing during backtest execution</li>
</ul>
<a id="backtestbackground---fire-and-forget-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.background() - Fire-and-Forget Pattern<a href="#backtestbackground---fire-and-forget-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">cancel</span><span class="hl-1"> = </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Backtest runs in background</span><br/><span class="hl-5">// Listen for completion via listenDoneBacktest()</span>
</code><button type="button">Copy</button></pre>

<p>Consumes results internally without yielding. Useful for:</p>
<ul>
<li>Running multiple backtests in parallel</li>
<li>Callback-based processing via strategy callbacks</li>
<li>Background batch processing</li>
</ul>
<hr>
<a id="execution-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Execution Architecture<a href="#execution-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The following diagram shows the class hierarchy and data flow from public API to private orchestration:</p>
<p><img src="../media/21_backtest-mode_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Key Components</strong>:</p>
<ul>
<li><strong><code>BacktestUtils</code></strong>: Singleton managing <code>BacktestInstance</code> creation via memoization</li>
<li><strong><code>BacktestInstance</code></strong>: Isolated execution context per <code>symbol:strategyName</code> pair</li>
<li><strong><code>BacktestLogicPrivateService</code></strong>: Core orchestration implementing async generator pattern</li>
<li><strong><code>FrameCoreService</code></strong>: Generates discrete timeframes from <code>IFrameSchema</code></li>
<li><strong><code>StrategyCoreService</code></strong>: Executes strategy logic with context propagation</li>
</ul>
<hr>
<a id="timeframe-iteration-loop" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Timeframe Iteration Loop<a href="#timeframe-iteration-loop" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>BacktestLogicPrivateService.run()</code> method implements the core iteration logic:</p>
<p><img src="../media/21_backtest-mode_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Loop Variables</strong>:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>timeframes</code></td>
<td><code>Date[]</code></td>
<td>Array of timestamps from <code>IFrameSchema</code></td>
</tr>
<tr>
<td><code>i</code></td>
<td><code>number</code></td>
<td>Current timeframe index</td>
</tr>
<tr>
<td><code>totalFrames</code></td>
<td><code>number</code></td>
<td>Total timeframe count for progress</td>
</tr>
<tr>
<td><code>when</code></td>
<td><code>Date</code></td>
<td>Current timestamp being processed</td>
</tr>
<tr>
<td><code>result</code></td>
<td><code>IStrategyTickResult</code></td>
<td>Result from <code>tick()</code> call</td>
</tr>
</tbody>
</table>
<hr>
<a id="fast-backtest-optimization" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Fast Backtest Optimization<a href="#fast-backtest-optimization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>When a signal opens (or is scheduled), the system switches from minute-by-minute iteration to bulk candle processing. This optimization dramatically reduces execution time by:</p>
<ol>
<li><strong>Fetching Future Candles</strong>: Requests all candles needed for the signal's lifetime upfront</li>
<li><strong>Bulk Processing</strong>: Calls <code>strategyCoreService.backtest()</code> which processes candles in a single pass</li>
<li><strong>Frame Skipping</strong>: Returns <code>frameSkip</code> index to jump past processed timeframes</li>
</ol>
<a id="candle-request-calculation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Candle Request Calculation<a href="#candle-request-calculation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-4">candlesNeeded</span><span class="hl-1"> = </span><span class="hl-4">bufferMinutes</span><span class="hl-1"> + </span><span class="hl-4">awaitMinutes</span><span class="hl-1"> + </span><span class="hl-4">signalLifetime</span><span class="hl-1"> + </span><span class="hl-6">1</span><br/><br/><span class="hl-10">Where</span><span class="hl-1">:</span><br/><span class="hl-1">- </span><span class="hl-4">bufferMinutes</span><span class="hl-1"> = </span><span class="hl-8">CC_AVG_PRICE_CANDLES_COUNT</span><span class="hl-1"> - </span><span class="hl-6">1</span><span class="hl-1">  </span><span class="hl-5">// VWAP buffer (default: 4)</span><br/><span class="hl-1">- </span><span class="hl-4">awaitMinutes</span><span class="hl-1"> = </span><span class="hl-8">CC_SCHEDULE_AWAIT_MINUTES</span><span class="hl-1">         </span><span class="hl-5">// Activation timeout (default: 120)</span><br/><span class="hl-1">- </span><span class="hl-4">signalLifetime</span><span class="hl-1"> = </span><span class="hl-4">signal</span><span class="hl-1">.</span><span class="hl-4">minuteEstimatedTime</span><span class="hl-1">      </span><span class="hl-5">// From signal DTO</span><br/><span class="hl-1">- +</span><span class="hl-6">1</span><span class="hl-1"> = </span><span class="hl-4">Current</span><span class="hl-1"> </span><span class="hl-0">timeframe</span><span class="hl-1"> (</span><span class="hl-4">when</span><span class="hl-1">)</span>
</code><button>Copy</button></pre>

<a id="frame-skipping-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Frame Skipping Logic<a href="#frame-skipping-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/21_backtest-mode_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Example</strong>:</p>
<pre><code class="typescript"><span class="hl-5">// Signal opens at 2025-01-01 10:00:00</span><br/><span class="hl-5">// minuteEstimatedTime = 60</span><br/><span class="hl-5">// Current frame index i = 1000</span><br/><br/><span class="hl-5">// Fetch candles:</span><br/><span class="hl-5">// - 4 buffer candles (VWAP)</span><br/><span class="hl-5">// - 120 await candles (scheduled activation window)</span><br/><span class="hl-5">// - 60 lifetime candles (signal duration)</span><br/><span class="hl-5">// - 1 current candle</span><br/><span class="hl-5">// Total: 185 candles</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">candles</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">exchangeCoreService</span><span class="hl-1">.</span><span class="hl-0">getNextCandles</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-2">&quot;1m&quot;</span><span class="hl-1">, </span><span class="hl-6">185</span><span class="hl-1">, </span><span class="hl-4">bufferStartTime</span><span class="hl-1">, </span><span class="hl-7">true</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">// Process all candles in one pass</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">strategyCoreService</span><span class="hl-1">.</span><span class="hl-0">backtest</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">candles</span><span class="hl-1">, </span><span class="hl-4">when</span><span class="hl-1">, </span><span class="hl-7">true</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">// Skip ahead: result.frameSkip = 1185 (1000 + 185)</span><br/><span class="hl-5">// Next iteration processes frame 1185 instead of 1001</span>
</code><button type="button">Copy</button></pre>

<p><strong>Performance Impact</strong>:</p>
<table>
<thead>
<tr>
<th>Approach</th>
<th>Frames/Signal</th>
<th>Execution Time</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Without Optimization</strong></td>
<td>60 individual <code>tick()</code> calls</td>
<td>~600ms</td>
</tr>
<tr>
<td><strong>With Optimization</strong></td>
<td>1 <code>backtest()</code> call + frame skip</td>
<td>~50ms</td>
</tr>
<tr>
<td><strong>Speedup</strong></td>
<td>~12x faster</td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<a id="progress-tracking" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Tracking<a href="#progress-tracking" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>progressBacktestEmitter</code> broadcasts real-time progress updates during execution:</p>
<a id="progress-event-contract" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Progress Event Contract<a href="#progress-event-contract" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">ProgressBacktestContract</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalFrames</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">processedFrames</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">progress</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;  </span><span class="hl-5">// 0.0 to 1.0</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="emission-points" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Emission Points<a href="#emission-points" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/21_backtest-mode_3.svg" alt="Mermaid Diagram"></p>
<a id="subscribing-to-progress" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Subscribing to Progress<a href="#subscribing-to-progress" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenProgressBacktest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">listenProgressBacktest</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">percent</span><span class="hl-1"> = (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">progress</span><span class="hl-1"> * </span><span class="hl-6">100</span><span class="hl-1">).</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-6">1</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">symbol</span><span class="hl-7">}</span><span class="hl-2">:</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2"> - </span><span class="hl-7">${</span><span class="hl-4">percent</span><span class="hl-7">}</span><span class="hl-2">% (</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">processedFrames</span><span class="hl-7">}</span><span class="hl-2">/</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">totalFrames</span><span class="hl-7">}</span><span class="hl-2">)`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">signal</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-4">context</span><span class="hl-1">)) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Process signals</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Frequency</strong>: Emitted on every frame iteration (typically 1-minute intervals). For a 24-hour backtest at 1-minute resolution, expect 1,440 progress events.</p>
<hr>
<a id="deterministic-execution" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Deterministic Execution<a href="#deterministic-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Backtest mode guarantees reproducible results through several mechanisms:</p>
<a id="temporal-isolation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Temporal Isolation<a href="#temporal-isolation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>ExecutionContextService</code> ensures strategies only access data up to the current <code>when</code> timestamp:</p>
<p><img src="../media/21_backtest-mode_4.svg" alt="Mermaid Diagram"></p>
<p><strong>Mechanism</strong>: <code>AsyncLocalStorage</code> propagates <code>when</code> context through the call stack without explicit parameters. The exchange service automatically filters candles by timestamp.</p>
<a id="fixed-timeframes" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Fixed Timeframes<a href="#fixed-timeframes" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>IFrameSchema</code> defines immutable boundaries:</p>
<pre><code class="typescript"><span class="hl-0">addFrame</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1m&quot;</span><span class="hl-1">,           </span><span class="hl-5">// 1-minute steps</span><br/><span class="hl-1">  </span><span class="hl-4">startDate:</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2025-01-01T00:00:00Z&quot;</span><span class="hl-1">),  </span><span class="hl-5">// Fixed start</span><br/><span class="hl-1">  </span><span class="hl-4">endDate:</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2025-01-02T00:00:00Z&quot;</span><span class="hl-1">)     </span><span class="hl-5">// Fixed end</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Generates array: [</span><br/><span class="hl-5">//   2025-01-01T00:00:00Z,</span><br/><span class="hl-5">//   2025-01-01T00:01:00Z,</span><br/><span class="hl-5">//   2025-01-01T00:02:00Z,</span><br/><span class="hl-5">//   ...</span><br/><span class="hl-5">//   2025-01-01T23:59:00Z</span><br/><span class="hl-5">// ]</span>
</code><button type="button">Copy</button></pre>

<p>Running the same strategy on the same frame always produces:</p>
<ul>
<li>Same number of timeframes</li>
<li>Same timestamps</li>
<li>Same order of execution</li>
</ul>
<a id="no-external-state" class="tsd-anchor"></a><h3 class="tsd-anchor-link">No External State<a href="#no-external-state" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Backtest mode:</p>
<ul>
<li>Does NOT persist signals to disk (unlike Live mode)</li>
<li>Does NOT use system clock (<code>new Date()</code>)</li>
<li>Does NOT make external API calls during execution</li>
<li>Uses memoized/cached exchange data</li>
</ul>
<p><strong>Reproducibility Guarantee</strong>: Given identical inputs (symbol, strategy, exchange, frame), backtest mode produces byte-identical output across runs.</p>
<hr>
<a id="signal-lifecycle-in-backtest-mode" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Signal Lifecycle in Backtest Mode<a href="#signal-lifecycle-in-backtest-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Signals progress through different states during backtest execution. The behavior differs from <a href="design_20_execution-modes.html">Live Trading Mode</a>:</p>
<a id="state-transitions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">State Transitions<a href="#state-transitions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/21_backtest-mode_5.svg" alt="Mermaid Diagram"></p>
<a id="key-differences-from-live-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Differences from Live Mode<a href="#key-differences-from-live-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Aspect</th>
<th>Backtest Mode</th>
<th>Live Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Persistence</strong></td>
<td>None - signals in memory only</td>
<td>Persisted to disk via <code>PersistSignalAdapter</code></td>
</tr>
<tr>
<td><strong>Time Progression</strong></td>
<td>Discrete frames from <code>timeframes[]</code></td>
<td>Real-time via <code>new Date()</code></td>
</tr>
<tr>
<td><strong>Processing</strong></td>
<td>Bulk via <code>backtest()</code></td>
<td>Per-tick via <code>tick()</code></td>
</tr>
<tr>
<td><strong>Completion</strong></td>
<td>Finite - returns when frames exhausted</td>
<td>Infinite - runs until <code>stop()</code></td>
</tr>
<tr>
<td><strong>Signal Monitoring</strong></td>
<td>Vectorized on candle array</td>
<td>Event-driven per minute</td>
</tr>
</tbody>
</table>
<a id="backtest-method-signature" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest Method Signature<a href="#backtest-method-signature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">class</span><span class="hl-1"> </span><span class="hl-11">StrategyCoreService</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-7">async</span><span class="hl-1"> </span><span class="hl-0">backtest</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">candles</span><span class="hl-1">: </span><span class="hl-11">ICandleData</span><span class="hl-1">[],  </span><span class="hl-5">// Array of future candles</span><br/><span class="hl-1">    </span><span class="hl-4">when</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">,              </span><span class="hl-5">// Signal start timestamp</span><br/><span class="hl-1">    </span><span class="hl-4">backtest</span><span class="hl-1">: </span><span class="hl-11">boolean</span><span class="hl-1">        </span><span class="hl-5">// Always true for backtest mode</span><br/><span class="hl-1">  ): </span><span class="hl-11">Promise</span><span class="hl-1">&lt;</span><span class="hl-11">IStrategyBacktestResult</span><span class="hl-1">&gt;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Result</strong>:</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">IStrategyBacktestResult</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">action</span><span class="hl-1">: </span><span class="hl-2">&quot;closed&quot;</span><span class="hl-1"> | </span><span class="hl-2">&quot;cancelled&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">signal</span><span class="hl-1">: </span><span class="hl-11">ISignalRow</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">closeReason</span><span class="hl-1">?: </span><span class="hl-11">CloseReasonEnum</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">pnl</span><span class="hl-1">?: </span><span class="hl-11">IPnl</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameSkip</span><span class="hl-1">: </span><span class="hl-11">number</span><span class="hl-1">;  </span><span class="hl-5">// Next frame index to process</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="validation-and-error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validation and Error Handling<a href="#validation-and-error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Before execution, the system validates all schema references:</p>
<p><img src="../media/21_backtest-mode_6.svg" alt="Mermaid Diagram"></p>
<a id="runtime-error-handling" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Runtime Error Handling<a href="#runtime-error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>During execution, errors are caught and emitted without crashing the backtest:</p>
<pre><code class="typescript"><span class="hl-5">// From BacktestLogicPrivateService.run()</span><br/><span class="hl-3">try</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">result</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">this</span><span class="hl-1">.</span><span class="hl-4">strategyCoreService</span><span class="hl-1">.</span><span class="hl-0">tick</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">when</span><span class="hl-1">, </span><span class="hl-7">true</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">catch</span><span class="hl-1"> (</span><span class="hl-4">error</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">`tick failed when=</span><span class="hl-7">${</span><span class="hl-4">when</span><span class="hl-9">.</span><span class="hl-0">toISOString</span><span class="hl-9">()</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-7">this</span><span class="hl-1">.</span><span class="hl-4">loggerService</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">&quot;tick failed, skipping timeframe&quot;</span><span class="hl-1">, { </span><span class="hl-4">error</span><span class="hl-1"> });</span><br/><span class="hl-1">  </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">errorEmitter</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">i</span><span class="hl-1">++;  </span><span class="hl-5">// Skip to next frame</span><br/><span class="hl-1">  </span><span class="hl-3">continue</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Error Recovery Strategy</strong>:</p>
<ol>
<li>Log error details</li>
<li>Emit to <code>errorEmitter</code> for subscribers</li>
<li>Skip problematic timeframe</li>
<li>Continue with next frame</li>
</ol>
<p>This ensures a single bad candle or strategy error doesn't halt the entire backtest.</p>
<hr>
<a id="instance-management-and-memoization" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Instance Management and Memoization<a href="#instance-management-and-memoization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>BacktestUtils</code> class uses memoization to ensure one <code>BacktestInstance</code> per <code>symbol:strategyName</code> pair:</p>
<p><img src="../media/21_backtest-mode_7.svg" alt="Mermaid Diagram"></p>
<p><strong>Memoization Key</strong>: <code>${symbol}:${strategyName}</code></p>
<p><strong>Lifecycle</strong>:</p>
<ul>
<li>Instance created on first <code>run()</code> or <code>background()</code> call</li>
<li>Cached for subsequent calls with same symbol+strategy</li>
<li>Cleared manually via service layer (not exposed in public API)</li>
</ul>
<p><strong>Concurrency</strong>: Each instance can only run one backtest at a time due to <code>singlerun</code> wrapper:</p>
<pre><code class="typescript"><span class="hl-4">private</span><span class="hl-1"> </span><span class="hl-4">task</span><span class="hl-1"> = </span><span class="hl-0">singlerun</span><span class="hl-1">(</span><span class="hl-7">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">context</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// ... backtest execution</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Attempting to start a second backtest on the same instance while one is running will queue the request.</p>
<hr>
<a id="reporting-and-statistics" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Reporting and Statistics<a href="#reporting-and-statistics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After completion, retrieve results via <code>getData()</code>, <code>getReport()</code>, or <code>dump()</code>:</p>
<pre><code class="typescript"><span class="hl-5">// Get structured data</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1">, </span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">winRate</span><span class="hl-1">, </span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">maxDrawdown</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Generate markdown report</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">markdown</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to disk: ./dump/backtest/BTCUSDT_my-strategy.md</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Data Source</strong>: The <code>BacktestMarkdownService</code> subscribes to <code>signalBacktestEmitter</code> and accumulates closed signals in <code>ReportStorage</code> (max 250 events per symbol:strategy pair).</p>
<p><strong>Statistics Calculated</strong>:</p>
<table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>totalTrades</code></td>
<td>Count of closed signals</td>
</tr>
<tr>
<td><code>winningTrades</code></td>
<td>Signals with positive PNL</td>
</tr>
<tr>
<td><code>losingTrades</code></td>
<td>Signals with negative PNL</td>
</tr>
<tr>
<td><code>winRate</code></td>
<td><code>winningTrades / totalTrades</code></td>
</tr>
<tr>
<td><code>totalPnl</code></td>
<td>Sum of all PNL percentages</td>
</tr>
<tr>
<td><code>avgPnl</code></td>
<td><code>totalPnl / totalTrades</code></td>
</tr>
<tr>
<td><code>maxDrawdown</code></td>
<td>Largest peak-to-trough decline</td>
</tr>
<tr>
<td><code>sharpeRatio</code></td>
<td>Risk-adjusted return metric</td>
</tr>
<tr>
<td><code>sortinoRatio</code></td>
<td>Downside deviation adjusted return</td>
</tr>
</tbody>
</table>
<hr>
<a id="related-pages" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Related Pages<a href="#related-pages" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="design_20_execution-modes.html">Live Trading Mode</a> - Real-time execution with persistence</li>
<li><a href="design_20_execution-modes.html">Walker (Strategy Comparison)</a> - Sequential backtest orchestration</li>
<li><a href="design_20_execution-modes.html">Async Generator Patterns</a> - Memory-efficient streaming patterns</li>
<li><a href="design_08_core-concepts.html">Signals &amp; Signal Lifecycle</a> - Signal state machine details</li>
<li><a href="design_08_core-concepts.html">Time Execution Engine</a> - Temporal context propagation</li>
<li><a href="design_08_core-concepts.html">VWAP Pricing &amp; Data Handling</a> - Price calculation methodology</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#backtest-mode"><span>Backtest <wbr/>Mode</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#entry-points"><span>Entry <wbr/>Points</span></a></li><li><ul><li><a href="#backtestrun---async-generator-pattern"><span>Backtest.run() -<wbr/> <wbr/>Async <wbr/>Generator <wbr/>Pattern</span></a></li><li><a href="#backtestbackground---fire-and-forget-pattern"><span>Backtest.background() -<wbr/> <wbr/>Fire-<wbr/>and-<wbr/>Forget <wbr/>Pattern</span></a></li></ul></li><li><a href="#execution-architecture"><span>Execution <wbr/>Architecture</span></a></li><li><a href="#timeframe-iteration-loop"><span>Timeframe <wbr/>Iteration <wbr/>Loop</span></a></li><li><a href="#fast-backtest-optimization"><span>Fast <wbr/>Backtest <wbr/>Optimization</span></a></li><li><ul><li><a href="#candle-request-calculation"><span>Candle <wbr/>Request <wbr/>Calculation</span></a></li><li><a href="#frame-skipping-logic"><span>Frame <wbr/>Skipping <wbr/>Logic</span></a></li></ul></li><li><a href="#progress-tracking"><span>Progress <wbr/>Tracking</span></a></li><li><ul><li><a href="#progress-event-contract"><span>Progress <wbr/>Event <wbr/>Contract</span></a></li><li><a href="#emission-points"><span>Emission <wbr/>Points</span></a></li><li><a href="#subscribing-to-progress"><span>Subscribing to <wbr/>Progress</span></a></li></ul></li><li><a href="#deterministic-execution"><span>Deterministic <wbr/>Execution</span></a></li><li><ul><li><a href="#temporal-isolation"><span>Temporal <wbr/>Isolation</span></a></li><li><a href="#fixed-timeframes"><span>Fixed <wbr/>Timeframes</span></a></li><li><a href="#no-external-state"><span>No <wbr/>External <wbr/>State</span></a></li></ul></li><li><a href="#signal-lifecycle-in-backtest-mode"><span>Signal <wbr/>Lifecycle in <wbr/>Backtest <wbr/>Mode</span></a></li><li><ul><li><a href="#state-transitions"><span>State <wbr/>Transitions</span></a></li><li><a href="#key-differences-from-live-mode"><span>Key <wbr/>Differences from <wbr/>Live <wbr/>Mode</span></a></li><li><a href="#backtest-method-signature"><span>Backtest <wbr/>Method <wbr/>Signature</span></a></li></ul></li><li><a href="#validation-and-error-handling"><span>Validation and <wbr/>Error <wbr/>Handling</span></a></li><li><ul><li><a href="#runtime-error-handling"><span>Runtime <wbr/>Error <wbr/>Handling</span></a></li></ul></li><li><a href="#instance-management-and-memoization"><span>Instance <wbr/>Management and <wbr/>Memoization</span></a></li><li><a href="#reporting-and-statistics"><span>Reporting and <wbr/>Statistics</span></a></li><li><a href="#related-pages"><span>Related <wbr/>Pages</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
