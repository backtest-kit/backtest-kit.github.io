<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/63_strategy_comparison | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_63_strategy_comparison.html">design/63_strategy_comparison</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="strategy-comparison" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Strategy Comparison<a href="#strategy-comparison" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page details the technical implementation of strategy comparison in Walker mode, including metric extraction, sequential backtest orchestration, and best strategy selection. For Walker API reference, see page 4.5. For individual backtest mechanics, see page 9.1.</p>
<hr>
<a id="metric-selection-and-extraction" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Metric Selection and Extraction<a href="#metric-selection-and-extraction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker compares strategies using a single <code>WalkerMetric</code> specified in <code>IWalkerSchema.metric</code>. The metric value is extracted from <code>BacktestStatistics</code> after each strategy completes its backtest.</p>
<a id="walkermetric-type-definition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">WalkerMetric Type Definition<a href="#walkermetric-type-definition" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>WalkerMetric</code> type defines six comparison criteria:</p>
<pre><code class="typescript"><span class="hl-7">type</span><span class="hl-1"> </span><span class="hl-13">WalkerMetric</span><span class="hl-1"> =</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;sharpeRatio&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;annualizedSharpeRatio&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;winRate&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;avgPnl&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;totalPnl&quot;</span><br/><span class="hl-1">  | </span><span class="hl-2">&quot;certaintyRatio&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<a id="metric-extraction-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Metric Extraction Logic<a href="#metric-extraction-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Metric extraction occurs in <code>WalkerLogicPrivateService.run()</code> after calling <code>BacktestMarkdownService.getData()</code>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">this</span><span class="hl-1">.</span><span class="hl-4">backtestMarkdownService</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Extract metric value with null safety</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">value</span><span class="hl-1"> = </span><span class="hl-4">stats</span><span class="hl-1">[</span><span class="hl-4">metric</span><span class="hl-1">];</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">metricValue</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">  </span><span class="hl-4">value</span><span class="hl-1"> !== </span><span class="hl-7">undefined</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">  </span><span class="hl-7">typeof</span><span class="hl-1"> </span><span class="hl-4">value</span><span class="hl-1"> === </span><span class="hl-2">&quot;number&quot;</span><span class="hl-1"> &amp;&amp;</span><br/><span class="hl-1">  !</span><span class="hl-0">isNaN</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">) &amp;&amp;</span><br/><span class="hl-1">  </span><span class="hl-0">isFinite</span><span class="hl-1">(</span><span class="hl-4">value</span><span class="hl-1">)</span><br/><span class="hl-1">    ? </span><span class="hl-4">value</span><br/><span class="hl-1">    : </span><span class="hl-7">null</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>The extraction performs five safety checks to prevent invalid comparisons. If any check fails, <code>metricValue</code> is set to <code>null</code> and the strategy is excluded from best strategy consideration.</p>
<a id="metric-calculation-reference" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Metric Calculation Reference<a href="#metric-calculation-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Metric</th>
<th>BacktestStatistics Field</th>
<th>Calculation Method</th>
<th>Higher is Better</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sharpeRatio</code></td>
<td><code>stats.sharpeRatio</code></td>
<td><code>avgPnl / stdDev</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>annualizedSharpeRatio</code></td>
<td><code>stats.annualizedSharpeRatio</code></td>
<td><code>sharpeRatio × √365</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>winRate</code></td>
<td><code>stats.winRate</code></td>
<td><code>(winCount / totalSignals) × 100</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>avgPnl</code></td>
<td><code>stats.avgPnl</code></td>
<td><code>sum(pnlPercentage) / totalSignals</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>totalPnl</code></td>
<td><code>stats.totalPnl</code></td>
<td><code>sum(pnlPercentage)</code></td>
<td>Yes</td>
</tr>
<tr>
<td><code>certaintyRatio</code></td>
<td><code>stats.certaintyRatio</code></td>
<td><code>avgWin / abs(avgLoss)</code></td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>All metrics assume higher values indicate better performance. No metrics use ascending comparison order.</p>
<hr>
<a id="sequential-backtest-orchestration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Sequential Backtest Orchestration<a href="#sequential-backtest-orchestration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>WalkerLogicPrivateService.run()</code> executes strategies sequentially using <code>BacktestLogicPublicService.run()</code> for each strategy. The method yields <code>WalkerContract</code> after each strategy completes.</p>
<a id="walkerlogicprivateservicerun-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">WalkerLogicPrivateService.run() Flow<a href="#walkerlogicprivateservicerun-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/63_Strategy_Comparison_0.svg" alt="Mermaid Diagram"></p>
<a id="key-implementation-details" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Implementation Details<a href="#key-implementation-details" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Sequential Execution:</strong>
Strategies are not parallelized. Each strategy's backtest completes before the next begins. This occurs at <a href="">src/lib/services/logic/private/WalkerLogicPrivateService.ts:106-228</a>.</p>
<p><strong>resolveDocuments() Pattern:</strong>
The <code>resolveDocuments(iterator)</code> utility consumes the async generator returned by <code>BacktestLogicPublicService.run()</code> and returns an array of all yielded results. This pattern allows walker to consume all backtest signals without manually iterating.</p>
<p><strong>Error Handling:</strong>
If <code>resolveDocuments()</code> throws, the error is caught, logged, emitted to <code>errorEmitter</code>, and the strategy is skipped via <code>continue</code>. The walker proceeds to the next strategy without terminating.</p>
<p><strong>Callback Invocation:</strong>
Four optional callbacks are invoked during execution:</p>
<ol>
<li><code>onStrategyStart(strategyName, symbol)</code> - Before backtest begins</li>
<li><code>onStrategyError(strategyName, symbol, error)</code> - If backtest throws</li>
<li><code>onStrategyComplete(strategyName, symbol, stats, metricValue)</code> - After backtest succeeds</li>
<li><code>onComplete(finalResults)</code> - After all strategies finish</li>
</ol>
<a id="best-strategy-selection-logic" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Best Strategy Selection Logic<a href="#best-strategy-selection-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The best strategy is determined by comparing <code>metricValue</code> against <code>bestMetric</code> after each strategy completes.</p>
<a id="comparison-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Comparison Logic<a href="#comparison-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">// Update best strategy if needed</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">isBetter</span><span class="hl-1"> =</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1"> === </span><span class="hl-7">null</span><span class="hl-1"> ||</span><br/><span class="hl-1">  (</span><span class="hl-4">metricValue</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">metricValue</span><span class="hl-1"> &gt; </span><span class="hl-4">bestMetric</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">isBetter</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">metricValue</span><span class="hl-1"> !== </span><span class="hl-7">null</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1"> = </span><span class="hl-4">metricValue</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1"> = </span><span class="hl-4">strategyName</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="selection-rules" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Selection Rules<a href="#selection-rules" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Initial Selection:</strong> If <code>bestMetric === null</code> (first strategy or no valid metrics yet), any strategy with non-null <code>metricValue</code> becomes best</li>
<li><strong>Comparison:</strong> If <code>metricValue &gt; bestMetric</code>, the current strategy becomes best</li>
<li><strong>Null Handling:</strong> Strategies with <code>null</code> metricValue are never selected as best</li>
<li><strong>Tie Behavior:</strong> If two strategies have identical metric values, the first one encountered wins (iteration order determines ties)</li>
</ol>
<a id="ascending-vs-descending-metrics" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Ascending vs Descending Metrics<a href="#ascending-vs-descending-metrics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All supported metrics use <strong>descending</strong> comparison (higher is better). There are no metrics where lower values are preferable. This simplifies the comparison logic to a single <code>&gt;</code> operator.</p>
<hr>
<a id="walkercontract-data-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">WalkerContract Data Structure<a href="#walkercontract-data-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Each iteration of <code>WalkerLogicPrivateService.run()</code> yields a <code>WalkerContract</code> containing the current strategy's results and updated best strategy tracking.</p>
<a id="walkercontract-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">WalkerContract Interface<a href="#walkercontract-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">WalkerContract</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;           </span><span class="hl-5">// Current strategy just tested</span><br/><span class="hl-1">  </span><span class="hl-4">stats</span><span class="hl-1">: </span><span class="hl-13">BacktestStatistics</span><span class="hl-1">;      </span><span class="hl-5">// Full statistics for current strategy</span><br/><span class="hl-1">  </span><span class="hl-4">metricValue</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;     </span><span class="hl-5">// Extracted metric for current strategy</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">: </span><span class="hl-13">WalkerMetric</span><span class="hl-1">;           </span><span class="hl-5">// Comparison metric being used</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;      </span><span class="hl-5">// Best metric seen so far</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;    </span><span class="hl-5">// Strategy with best metric</span><br/><span class="hl-1">  </span><span class="hl-4">strategiesTested</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;       </span><span class="hl-5">// Count of strategies completed</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;        </span><span class="hl-5">// Total strategies to test</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="contract-building-code" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Contract Building Code<a href="#contract-building-code" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">walkerContract</span><span class="hl-1">: </span><span class="hl-13">WalkerContract</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">walkerName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">exchangeName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">frameName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">stats</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">metricValue</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategiesTested</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies:</span><span class="hl-1"> </span><span class="hl-4">strategies</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">,</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<p>The contract is constructed at <a href="">src/lib/services/logic/private/WalkerLogicPrivateService.ts:190-203</a> after updating <code>bestMetric</code>/<code>bestStrategy</code> and before emitting progress events.</p>
<a id="contract-emission-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Contract Emission Flow<a href="#contract-emission-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/63_Strategy_Comparison_1.svg" alt="Mermaid Diagram"></p>
<p>Three emissions occur per strategy:</p>
<ol>
<li><strong>progressWalkerEmitter</strong> - Numeric progress (count, percentage)</li>
<li><strong>walkerEmitter</strong> - Full contract for external listeners</li>
<li><strong>yield</strong> - Contract to the async generator consumer</li>
</ol>
<hr>
<a id="final-results-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Final Results Structure<a href="#final-results-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>After all strategies complete, <code>WalkerLogicPrivateService.run()</code> emits final results to <code>walkerCompleteSubject</code>.</p>
<a id="final-results-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Final Results Interface<a href="#final-results-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">IWalkerResults</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">: </span><span class="hl-13">WalkerMetric</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStats</span><span class="hl-1">: </span><span class="hl-13">BacktestStatistics</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;  </span><span class="hl-5">// Statistics for best strategy</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="final-results-construction" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Final Results Construction<a href="#final-results-construction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">finalResults</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">walkerName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">exchangeName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">frameName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies:</span><span class="hl-1"> </span><span class="hl-4">strategies</span><span class="hl-1">.</span><span class="hl-4">length</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">bestStats:</span><br/><span class="hl-1">    </span><span class="hl-4">bestStrategy</span><span class="hl-1"> !== </span><span class="hl-7">null</span><br/><span class="hl-1">      ? </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-7">this</span><span class="hl-1">.</span><span class="hl-4">backtestMarkdownService</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">bestStrategy</span><span class="hl-1">)</span><br/><span class="hl-1">      : </span><span class="hl-7">null</span><span class="hl-1">,</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">// Call onComplete callback if provided with final best results</span><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">walkerSchema</span><span class="hl-1">.</span><span class="hl-4">callbacks</span><span class="hl-1">?.</span><span class="hl-4">onComplete</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerSchema</span><span class="hl-1">.</span><span class="hl-4">callbacks</span><span class="hl-1">.</span><span class="hl-0">onComplete</span><span class="hl-1">(</span><span class="hl-4">finalResults</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">walkerCompleteSubject</span><span class="hl-1">.</span><span class="hl-0">next</span><span class="hl-1">(</span><span class="hl-4">finalResults</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p>The final results are constructed at <a href="">src/lib/services/logic/private/WalkerLogicPrivateService.ts:230-250</a>. Unlike <code>WalkerContract</code>, the final results include <code>bestStats</code> which contains the full <code>BacktestStatistics</code> for the winning strategy.</p>
<hr>
<a id="progress-tracking-events" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Tracking Events<a href="#progress-tracking-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker emits three distinct progress events during execution: numeric progress, walker contracts, and completion.</p>
<a id="progress-event-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Progress Event Types<a href="#progress-event-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>progressWalkerEmitter (Numeric Progress):</strong></p>
<p>Emitted after each strategy completes. Provides percentage and count information.</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">ProgressWalkerContract</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">processedStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">progress</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;  </span><span class="hl-5">// 0.0 to 1.0</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>walkerEmitter (Strategy Results):</strong></p>
<p>Emitted after each strategy completes. Contains full <code>WalkerContract</code> with strategy statistics and best tracking.</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">WalkerContract</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">stats</span><span class="hl-1">: </span><span class="hl-13">BacktestStatistics</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">metricValue</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">: </span><span class="hl-13">WalkerMetric</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategiesTested</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>walkerCompleteSubject (Final Results):</strong></p>
<p>Emitted once after all strategies finish. Contains final best strategy determination.</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">IWalkerResults</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">: </span><span class="hl-13">WalkerMetric</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-13">string</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestStats</span><span class="hl-1">: </span><span class="hl-13">BacktestStatistics</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-emission-sequence" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Emission Sequence<a href="#event-emission-sequence" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/63_Strategy_Comparison_2.svg" alt="Mermaid Diagram"></p>
<a id="listener-functions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Listener Functions<a href="#listener-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>listenWalkerProgress(callback):</strong>
Subscribes to <code>progressWalkerEmitter</code>. Receives numeric progress after each strategy.</p>
<p><strong>listenWalker(callback):</strong>
Subscribes to <code>walkerEmitter</code>. Receives full <code>WalkerContract</code> with statistics after each strategy.</p>
<p><strong>listenWalkerComplete(callback):</strong>
Subscribes to <code>walkerCompleteSubject</code>. Receives <code>IWalkerResults</code> once at completion.</p>
<p>All three listeners support filtering by <code>symbol</code>, <code>walkerName</code>, <code>exchangeName</code>, or <code>frameName</code> properties.</p>
<hr>
<a id="statistics-retrieval-from-backtestmarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Statistics Retrieval from BacktestMarkdownService<a href="#statistics-retrieval-from-backtestmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker retrieves statistics for each strategy by calling <code>BacktestMarkdownService.getData(symbol, strategyName)</code> after the backtest completes.</p>
<a id="statistics-retrieval-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Retrieval Flow<a href="#statistics-retrieval-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/63_Strategy_Comparison_3.svg" alt="Mermaid Diagram"></p>
<a id="backteststatistics-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">BacktestStatistics Interface<a href="#backteststatistics-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The statistics object returned by <code>BacktestMarkdownService.getData()</code> contains:</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-13">BacktestStatistics</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">totalSignals</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winCount</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">lossCount</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winRate</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">avgPnl</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalPnl</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">stdDev</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">sharpeRatio</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">annualizedSharpeRatio</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">certaintyRatio</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">avgWin</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">avgLoss</span><span class="hl-1">: </span><span class="hl-13">number</span><span class="hl-1"> | </span><span class="hl-13">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-5">// ... additional fields</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Each metric field may be <code>null</code> if calculation is unsafe (e.g., NaN, Infinity, insufficient data). Walker's metric extraction checks for null values before comparison.</p>
<hr>
<a id="validation-and-data-clearing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validation and Data Clearing<a href="#validation-and-data-clearing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Before walker execution begins, extensive validation and data clearing occurs to ensure clean results.</p>
<a id="validation-steps" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Validation Steps<a href="#validation-steps" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Walker Schema Validation</strong> - Confirms <code>walkerName</code> is registered</li>
<li><strong>Exchange Validation</strong> - Confirms <code>exchangeName</code> exists and is valid</li>
<li><strong>Frame Validation</strong> - Confirms <code>frameName</code> exists and has valid timeframe</li>
<li><strong>Strategy Validation</strong> - Each strategy in <code>walkerSchema.strategies</code> is validated</li>
<li><strong>Risk Validation</strong> - If any strategy has <code>riskName</code>, that risk profile is validated</li>
</ol>
<p>All validation occurs at <a href="">src/classes/Walker.ts:50-59</a> and <a href="">src/lib/services/global/WalkerGlobalService.ts:64-84</a></p>
<a id="data-clearing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Data Clearing<a href="#data-clearing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Before walker starts, all accumulated data is cleared for each strategy:</p>
<pre><code class="typescript"><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">strategyName</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">walkerSchema</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Clear backtest results</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">backtestMarkdownService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear scheduled signal tracking</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">scheduleMarkdownService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear strategy internal state</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategyGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear risk profile active positions</span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> { </span><span class="hl-8">riskName</span><span class="hl-1"> } = </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategySchemaService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">riskName</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">riskGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">riskName</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This ensures each strategy starts with clean state and no leftover data from previous runs.</p>
<hr>
<a id="markdown-report-generation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Markdown Report Generation<a href="#markdown-report-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker generates comprehensive comparison reports in markdown format.</p>
<a id="report-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Report Structure<a href="#report-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The generated report includes:</p>
<ol>
<li><strong>Header</strong> - Walker name, symbol, metric used</li>
<li><strong>Summary</strong> - Best strategy and its metric value</li>
<li><strong>Comparison Table</strong> - All strategies ranked by metric</li>
<li><strong>Strategy Details</strong> - Full statistics for each strategy</li>
</ol>
<a id="example-report" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example Report<a href="#example-report" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="markdown"># Walker Comparison Report: my-walker

**Symbol:** BTCUSDT  
**Metric:** sharpeRatio  
**Best Strategy:** strategy-b (1.85)

## Strategy Comparison

| Rank | Strategy | Metric | Total PNL | Win Rate | Avg PNL | Std Dev | Trades |
|------|----------|--------|-----------|----------|---------|---------|--------|
| 1 | strategy-b | 1.85 | +15.5% | 72.3% | +0.45% | 0.24% | 45 |
| 2 | strategy-a | 1.23 | +12.1% | 68.5% | +0.35% | 0.28% | 38 |
| 3 | strategy-c | 0.98 | +8.3% | 65.2% | +0.28% | 0.29% | 25 |

## Detailed Statistics

### strategy-b
- **Total Signals:** 45
- **Win Rate:** 72.3% (32W / 13L)
- **Average PNL:** +0.45%
- **Total PNL:** +15.5%
- **Sharpe Ratio:** 1.85
- **Certainty Ratio:** 2.15
...
</code><button type="button">Copy</button></pre>

<a id="generating-reports" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Generating Reports<a href="#generating-reports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">// Get raw data</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Generate markdown string</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to disk (default: ./logs/walker/my-walker.md)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to custom path</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;./custom/reports&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="background-execution" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Background Execution<a href="#background-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker supports background execution mode for non-blocking operation.</p>
<a id="background-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Background Mode<a href="#background-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stop</span><span class="hl-1"> = </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Listen to progress without blocking</span><br/><span class="hl-0">listenWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Testing </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2">...`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Listen to completion</span><br/><span class="hl-0">listenDoneWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Walker completed!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Later: stop execution early if needed</span><br/><span class="hl-0">stop</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p><strong>Background Execution Details:</strong></p>
<ol>
<li><code>Walker.background()</code> consumes the async generator internally</li>
<li>Returns a cancellation function that stops execution</li>
<li>Emits <code>doneWalkerSubject</code> event when complete</li>
<li>Errors are caught and emitted to <code>errorEmitter</code></li>
</ol>
<p>The cancellation function calls <code>strategyGlobalService.stop()</code> for each strategy to gracefully terminate any ongoing backtests.</p>
<hr>
<a id="metric-selection-best-practices" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Metric Selection Best Practices<a href="#metric-selection-best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="choosing-the-right-metric" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Choosing the Right Metric<a href="#choosing-the-right-metric" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Use Case</th>
<th>Recommended Metric</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>Risk-adjusted performance</td>
<td><code>sharpeRatio</code> or <code>annualizedSharpeRatio</code></td>
<td>Balances returns with volatility</td>
</tr>
<tr>
<td>Maximum profitability</td>
<td><code>totalPnl</code></td>
<td>Ignores risk, focuses on absolute returns</td>
</tr>
<tr>
<td>Consistency</td>
<td><code>winRate</code></td>
<td>Prioritizes trade success frequency</td>
</tr>
<tr>
<td>Average trade quality</td>
<td><code>avgPnl</code></td>
<td>Good for comparing per-trade efficiency</td>
</tr>
<tr>
<td>Win/loss ratio</td>
<td><code>certaintyRatio</code></td>
<td>Shows if wins outweigh losses in magnitude</td>
</tr>
</tbody>
</table>
<a id="multi-metric-analysis" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Multi-Metric Analysis<a href="#multi-metric-analysis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>While walker compares strategies using a single metric, you can perform multi-metric analysis manually:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Rank by different metrics</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">bySharpe</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">byWinRate</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">winRate</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">winRate</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">byTotalPnl</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">totalPnl</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">totalPnl</span><span class="hl-1"> || </span><span class="hl-6">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">// Find consensus winner</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">rankings</span><span class="hl-1"> = </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">();</span><br/><span class="hl-1">[</span><span class="hl-4">bySharpe</span><span class="hl-1">, </span><span class="hl-4">byWinRate</span><span class="hl-1">, </span><span class="hl-4">byTotalPnl</span><span class="hl-1">].</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">ranking</span><span class="hl-1">, </span><span class="hl-4">metricIndex</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">ranking</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">strategy</span><span class="hl-1">, </span><span class="hl-4">rank</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">current</span><span class="hl-1"> = </span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">strategy</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">) || </span><span class="hl-6">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-4">strategy</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">, </span><span class="hl-4">current</span><span class="hl-1"> + </span><span class="hl-4">rank</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">consensusWinner</span><span class="hl-1"> = </span><span class="hl-4">Array</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">entries</span><span class="hl-1">())</span><br/><span class="hl-1">  .</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1">[</span><span class="hl-6">1</span><span class="hl-1">] - </span><span class="hl-4">b</span><span class="hl-1">[</span><span class="hl-6">1</span><span class="hl-1">])[</span><span class="hl-6">0</span><span class="hl-1">][</span><span class="hl-6">0</span><span class="hl-1">];</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="comparison-with-manual-testing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Comparison with Manual Testing<a href="#comparison-with-manual-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="walker-vs-manual-backtest-loop" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Walker vs Manual Backtest Loop<a href="#walker-vs-manual-backtest-loop" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Manual approach:</strong></p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">strategies</span><span class="hl-1"> = [</span><span class="hl-2">&quot;strategy-a&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-b&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-c&quot;</span><span class="hl-1">];</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">results</span><span class="hl-1"> = [];</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">strategyName</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">strategies</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">_</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">strategyName</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><br/><span class="hl-1">  })) {}</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">({ </span><span class="hl-4">strategyName</span><span class="hl-1">, </span><span class="hl-4">stats</span><span class="hl-1"> });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Manually compare results</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">best</span><span class="hl-1"> = </span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-0">reduce</span><span class="hl-1">((</span><span class="hl-4">best</span><span class="hl-1">, </span><span class="hl-4">current</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-4">current</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> &gt; </span><span class="hl-4">best</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> ? </span><span class="hl-4">current</span><span class="hl-1"> : </span><span class="hl-4">best</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Walker approach:</strong></p>
<pre><code class="typescript"><span class="hl-0">addWalker</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategies:</span><span class="hl-1"> [</span><span class="hl-2">&quot;strategy-a&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-b&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-c&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">metric:</span><span class="hl-1"> </span><span class="hl-2">&quot;sharpeRatio&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">progress</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best: </span><span class="hl-7">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Walker advantages:</strong></p>
<ol>
<li><strong>Automatic metric extraction</strong> - No manual calculation needed</li>
<li><strong>Progress tracking</strong> - Built-in events for monitoring</li>
<li><strong>Report generation</strong> - Automatic markdown reports</li>
<li><strong>Data isolation</strong> - Automatic clearing between runs</li>
<li><strong>Validation</strong> - Upfront validation of all dependencies</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#strategy-comparison"><span>Strategy <wbr/>Comparison</span></a><ul><li><a href="#metric-selection-and-extraction"><span>Metric <wbr/>Selection and <wbr/>Extraction</span></a></li><li><ul><li><a href="#walkermetric-type-definition"><span>Walker<wbr/>Metric <wbr/>Type <wbr/>Definition</span></a></li><li><a href="#metric-extraction-logic"><span>Metric <wbr/>Extraction <wbr/>Logic</span></a></li><li><a href="#metric-calculation-reference"><span>Metric <wbr/>Calculation <wbr/>Reference</span></a></li></ul></li><li><a href="#sequential-backtest-orchestration"><span>Sequential <wbr/>Backtest <wbr/>Orchestration</span></a></li><li><ul><li><a href="#walkerlogicprivateservicerun-flow"><span>Walker<wbr/>Logic<wbr/>Private<wbr/>Service.run() <wbr/>Flow</span></a></li><li><a href="#key-implementation-details"><span>Key <wbr/>Implementation <wbr/>Details</span></a></li></ul></li><li><a href="#best-strategy-selection-logic"><span>Best <wbr/>Strategy <wbr/>Selection <wbr/>Logic</span></a></li><li><ul><li><a href="#comparison-logic"><span>Comparison <wbr/>Logic</span></a></li><li><a href="#selection-rules"><span>Selection <wbr/>Rules</span></a></li><li><a href="#ascending-vs-descending-metrics"><span>Ascending vs <wbr/>Descending <wbr/>Metrics</span></a></li></ul></li><li><a href="#walkercontract-data-structure"><span>Walker<wbr/>Contract <wbr/>Data <wbr/>Structure</span></a></li><li><ul><li><a href="#walkercontract-interface"><span>Walker<wbr/>Contract <wbr/>Interface</span></a></li><li><a href="#contract-building-code"><span>Contract <wbr/>Building <wbr/>Code</span></a></li><li><a href="#contract-emission-flow"><span>Contract <wbr/>Emission <wbr/>Flow</span></a></li></ul></li><li><a href="#final-results-structure"><span>Final <wbr/>Results <wbr/>Structure</span></a></li><li><ul><li><a href="#final-results-interface"><span>Final <wbr/>Results <wbr/>Interface</span></a></li><li><a href="#final-results-construction"><span>Final <wbr/>Results <wbr/>Construction</span></a></li></ul></li><li><a href="#progress-tracking-events"><span>Progress <wbr/>Tracking <wbr/>Events</span></a></li><li><ul><li><a href="#progress-event-types"><span>Progress <wbr/>Event <wbr/>Types</span></a></li><li><a href="#event-emission-sequence"><span>Event <wbr/>Emission <wbr/>Sequence</span></a></li><li><a href="#listener-functions"><span>Listener <wbr/>Functions</span></a></li></ul></li><li><a href="#statistics-retrieval-from-backtestmarkdownservice"><span>Statistics <wbr/>Retrieval from <wbr/>Backtest<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#statistics-retrieval-flow"><span>Statistics <wbr/>Retrieval <wbr/>Flow</span></a></li><li><a href="#backteststatistics-interface"><span>Backtest<wbr/>Statistics <wbr/>Interface</span></a></li></ul></li><li><a href="#validation-and-data-clearing"><span>Validation and <wbr/>Data <wbr/>Clearing</span></a></li><li><ul><li><a href="#validation-steps"><span>Validation <wbr/>Steps</span></a></li><li><a href="#data-clearing"><span>Data <wbr/>Clearing</span></a></li></ul></li><li><a href="#markdown-report-generation"><span>Markdown <wbr/>Report <wbr/>Generation</span></a></li><li><ul><li><a href="#report-structure"><span>Report <wbr/>Structure</span></a></li><li><a href="#example-report"><span>Example <wbr/>Report</span></a></li><li><a href="#generating-reports"><span>Generating <wbr/>Reports</span></a></li></ul></li><li><a href="#background-execution"><span>Background <wbr/>Execution</span></a></li><li><ul><li><a href="#background-mode"><span>Background <wbr/>Mode</span></a></li></ul></li><li><a href="#metric-selection-best-practices"><span>Metric <wbr/>Selection <wbr/>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#choosing-the-right-metric"><span>Choosing the <wbr/>Right <wbr/>Metric</span></a></li><li><a href="#multi-metric-analysis"><span>Multi-<wbr/>Metric <wbr/>Analysis</span></a></li></ul></li><li><a href="#comparison-with-manual-testing"><span>Comparison with <wbr/>Manual <wbr/>Testing</span></a></li><li><ul><li><a href="#walker-vs-manual-backtest-loop"><span>Walker vs <wbr/>Manual <wbr/>Backtest <wbr/>Loop</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
