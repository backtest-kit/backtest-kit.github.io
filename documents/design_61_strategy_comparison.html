<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/61_strategy_comparison | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_61_strategy_comparison.html">design/61_strategy_comparison</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="strategy-comparison" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Strategy Comparison<a href="#strategy-comparison" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page explains how Walker mode compares multiple trading strategies and selects the best performer based on configurable metrics. For information about running individual backtests, see <a href="design_51_backtest_execution_flow.html">Backtest Execution Flow</a>. For details about the Walker API methods, see <a href="design_19_walker_api.html">Walker API</a>.</p>
<hr>
<a id="comparison-metrics" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Comparison Metrics<a href="#comparison-metrics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker mode ranks strategies using one of several performance metrics. The metric is specified in the <code>IWalkerSchema.metric</code> field and defaults to <code>sharpeRatio</code> if not provided.</p>
<a id="available-metrics" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Available Metrics<a href="#available-metrics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Metric</th>
<th>Description</th>
<th>Calculation</th>
<th>Interpretation</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sharpeRatio</code></td>
<td>Risk-adjusted return</td>
<td><code>avgPnl / stdDev</code></td>
<td>Higher is better. Measures return per unit of risk.</td>
</tr>
<tr>
<td><code>annualizedSharpeRatio</code></td>
<td>Annualized Sharpe Ratio</td>
<td><code>sharpeRatio × √365</code></td>
<td>Higher is better. Sharpe ratio scaled to yearly timeframe.</td>
</tr>
<tr>
<td><code>winRate</code></td>
<td>Win percentage</td>
<td><code>(winCount / totalSignals) × 100</code></td>
<td>Higher is better. Percentage of profitable trades.</td>
</tr>
<tr>
<td><code>avgPnl</code></td>
<td>Average PNL per trade</td>
<td><code>sum(pnlPercentage) / totalSignals</code></td>
<td>Higher is better. Mean profit/loss percentage.</td>
</tr>
<tr>
<td><code>totalPnl</code></td>
<td>Cumulative PNL</td>
<td><code>sum(pnlPercentage)</code></td>
<td>Higher is better. Total profit/loss across all trades.</td>
</tr>
<tr>
<td><code>certaintyRatio</code></td>
<td>Win/loss magnitude ratio</td>
<td><code>avgWin / abs(avgLoss)</code></td>
<td>Higher is better. Average winning size vs average losing size.</td>
</tr>
</tbody>
</table>
<p>Each metric is extracted from <code>BacktestStatistics</code> after running a complete backtest for the strategy. Metrics return <code>null</code> when calculations are unsafe (NaN, Infinity), and null values are excluded from comparison ranking.</p>
<hr>
<a id="walker-execution-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Walker Execution Architecture<a href="#walker-execution-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker orchestrates multiple sequential backtest runs and accumulates results for comparison.</p>
<a id="execution-flow-diagram" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Execution Flow Diagram<a href="#execution-flow-diagram" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/61_Strategy_Comparison_0.svg" alt="Mermaid Diagram"></p>
<a id="key-components" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Components<a href="#key-components" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Walker.run() Method:</strong></p>
<ul>
<li>Entry point for strategy comparison</li>
<li>Validates all strategies, exchange, frame, and risk profiles upfront</li>
<li>Clears accumulated backtest data before starting</li>
<li>Located at <a href="">src/classes/Walker.ts:39-86</a></li>
</ul>
<p><strong>WalkerGlobalService:</strong></p>
<ul>
<li>Performs validation orchestration for all walker dependencies</li>
<li>Validates <code>exchangeName</code> and <code>frameName</code> from walker schema</li>
<li>Iterates through <code>walkerSchema.strategies</code> array and validates each strategy</li>
<li>Validates <code>riskName</code> if present in strategy schema</li>
<li>Located at <a href="">src/lib/services/global/WalkerGlobalService.ts:52-86</a></li>
</ul>
<p><strong>Sequential Backtest Execution:</strong>
Walker does <strong>not</strong> run strategies in parallel. Each strategy completes its full backtest before the next begins. This ensures:</p>
<ul>
<li>Deterministic results (same order every time)</li>
<li>Resource isolation (one backtest's memory footprint at a time)</li>
<li>Progressive result availability (can monitor best strategy mid-execution)</li>
</ul>
<hr>
<a id="data-accumulation-and-storage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Data Accumulation and Storage<a href="#data-accumulation-and-storage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker uses <code>WalkerMarkdownService</code> to accumulate strategy results during execution. The service subscribes to <code>walkerEmitter</code> and stores comparison data per walker instance.</p>
<a id="storage-architecture" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Storage Architecture<a href="#storage-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/61_Strategy_Comparison_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Key Methods:</strong></p>
<p><strong>Walker.getData(symbol, walkerName):</strong></p>
<ul>
<li>Retrieves accumulated comparison results from <code>WalkerMarkdownService</code></li>
<li>Returns <code>IWalkerResults</code> containing all strategy statistics and ranking</li>
<li>Located at <a href="">src/classes/Walker.ts:159-178</a></li>
</ul>
<p><strong>Walker.getReport(symbol, walkerName):</strong></p>
<ul>
<li>Generates markdown report with comparison table</li>
<li>Shows all strategies ranked by the selected metric</li>
<li>Located at <a href="">src/classes/Walker.ts:194-213</a></li>
</ul>
<p><strong>Walker.dump(symbol, walkerName, path?):</strong></p>
<ul>
<li>Saves markdown report to disk (default: <code>./logs/walker/</code>)</li>
<li>Creates directory if it doesn't exist</li>
<li>Filename format: <code>{walkerName}.md</code></li>
<li>Located at <a href="">src/classes/Walker.ts:232-254</a></li>
</ul>
<hr>
<a id="results-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Results Structure<a href="#results-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="iwalkerresults-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IWalkerResults Interface<a href="#iwalkerresults-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The results returned by <code>Walker.getData()</code> follow this structure:</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">IWalkerResults</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">/** Name of the best performing strategy based on selected metric */</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Best metric value achieved by any strategy */</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Array of all strategy results, sorted by metric value (descending) */</span><br/><span class="hl-1">  </span><span class="hl-4">strategies</span><span class="hl-1">: </span><span class="hl-10">IWalkerStrategyResult</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">IWalkerStrategyResult</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">/** Strategy name */</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Full backtest statistics for this strategy */</span><br/><span class="hl-1">  </span><span class="hl-4">stats</span><span class="hl-1">: </span><span class="hl-10">BacktestStatistics</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Extracted metric value used for comparison */</span><br/><span class="hl-1">  </span><span class="hl-4">metric</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example usage:</strong></p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best strategy: </span><span class="hl-6">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best Sharpe Ratio: </span><span class="hl-6">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">result</span><span class="hl-1">, </span><span class="hl-4">index</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Rank </span><span class="hl-6">${</span><span class="hl-4">index</span><span class="hl-9"> </span><span class="hl-1">+</span><span class="hl-9"> </span><span class="hl-8">1</span><span class="hl-6">}</span><span class="hl-2">: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Metric: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Win Rate: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`  Total PNL: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="progress-tracking-and-events" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Tracking and Events<a href="#progress-tracking-and-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker emits two types of events for monitoring execution progress:</p>
<a id="event-types" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Types<a href="#event-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>walkerEmitter (Progress Updates):</strong></p>
<p>Emitted after each strategy completes its backtest. Provides incremental progress.</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">WalkerContract</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">/** Current symbol being tested */</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Walker name */</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Current strategy that just completed */</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Metric value for current strategy */</span><br/><span class="hl-1">  </span><span class="hl-4">metricValue</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Number of strategies tested so far */</span><br/><span class="hl-1">  </span><span class="hl-4">strategiesTested</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Total strategies to test */</span><br/><span class="hl-1">  </span><span class="hl-4">totalStrategies</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Current best strategy name */</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">/** Current best metric value */</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>walkerCompleteSubject (Final Results):</strong></p>
<p>Emitted once when all strategies finish testing. Contains complete results.</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">IWalkerResults</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">bestStrategy</span><span class="hl-1">: </span><span class="hl-10">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">bestMetric</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">strategies</span><span class="hl-1">: </span><span class="hl-10">IWalkerStrategyResult</span><span class="hl-1">[];</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-listeners" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Listeners<a href="#event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenWalker</span><span class="hl-1">, </span><span class="hl-4">listenWalkerComplete</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Track progress during execution</span><br/><span class="hl-0">listenWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">progress</span><span class="hl-1"> = (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">strategiesTested</span><span class="hl-1"> / </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">totalStrategies</span><span class="hl-1">) * </span><span class="hl-8">100</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-8">1</span><span class="hl-9">)</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Tested: </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2"> - Metric: </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricValue</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best so far: </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-6">}</span><span class="hl-2"> - </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Get final results when complete</span><br/><span class="hl-0">listenWalkerComplete</span><span class="hl-1">((</span><span class="hl-4">results</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Comparison complete!`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Winner: </span><span class="hl-6">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best metric: </span><span class="hl-6">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Access ranked list</span><br/><span class="hl-1">  </span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">strategy</span><span class="hl-1">, </span><span class="hl-4">rank</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-4">rank</span><span class="hl-9"> </span><span class="hl-1">+</span><span class="hl-9"> </span><span class="hl-8">1</span><span class="hl-6">}</span><span class="hl-2">. </span><span class="hl-6">${</span><span class="hl-4">strategy</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">: </span><span class="hl-6">${</span><span class="hl-4">strategy</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="progress-tracking-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Tracking Flow<a href="#progress-tracking-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/61_Strategy_Comparison_2.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="validation-and-data-clearing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validation and Data Clearing<a href="#validation-and-data-clearing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Before walker execution begins, extensive validation and data clearing occurs to ensure clean results.</p>
<a id="validation-steps" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Validation Steps<a href="#validation-steps" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Walker Schema Validation</strong> - Confirms <code>walkerName</code> is registered</li>
<li><strong>Exchange Validation</strong> - Confirms <code>exchangeName</code> exists and is valid</li>
<li><strong>Frame Validation</strong> - Confirms <code>frameName</code> exists and has valid timeframe</li>
<li><strong>Strategy Validation</strong> - Each strategy in <code>walkerSchema.strategies</code> is validated</li>
<li><strong>Risk Validation</strong> - If any strategy has <code>riskName</code>, that risk profile is validated</li>
</ol>
<p>All validation occurs at <a href="">src/classes/Walker.ts:50-59</a> and <a href="">src/lib/services/global/WalkerGlobalService.ts:64-84</a></p>
<a id="data-clearing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Data Clearing<a href="#data-clearing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Before walker starts, all accumulated data is cleared for each strategy:</p>
<pre><code class="typescript"><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strategyName</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">walkerSchema</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Clear backtest results</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">backtestMarkdownService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear scheduled signal tracking</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">scheduleMarkdownService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear strategy internal state</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategyGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Clear risk profile active positions</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> { </span><span class="hl-7">riskName</span><span class="hl-1"> } = </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategySchemaService</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">riskName</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">riskGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">(</span><span class="hl-4">riskName</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This ensures each strategy starts with clean state and no leftover data from previous runs.</p>
<hr>
<a id="markdown-report-generation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Markdown Report Generation<a href="#markdown-report-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker generates comprehensive comparison reports in markdown format.</p>
<a id="report-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Report Structure<a href="#report-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The generated report includes:</p>
<ol>
<li><strong>Header</strong> - Walker name, symbol, metric used</li>
<li><strong>Summary</strong> - Best strategy and its metric value</li>
<li><strong>Comparison Table</strong> - All strategies ranked by metric</li>
<li><strong>Strategy Details</strong> - Full statistics for each strategy</li>
</ol>
<a id="example-report" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example Report<a href="#example-report" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="markdown"># Walker Comparison Report: my-walker

**Symbol:** BTCUSDT  
**Metric:** sharpeRatio  
**Best Strategy:** strategy-b (1.85)

## Strategy Comparison

| Rank | Strategy | Metric | Total PNL | Win Rate | Avg PNL | Std Dev | Trades |
|------|----------|--------|-----------|----------|---------|---------|--------|
| 1 | strategy-b | 1.85 | +15.5% | 72.3% | +0.45% | 0.24% | 45 |
| 2 | strategy-a | 1.23 | +12.1% | 68.5% | +0.35% | 0.28% | 38 |
| 3 | strategy-c | 0.98 | +8.3% | 65.2% | +0.28% | 0.29% | 25 |

## Detailed Statistics

### strategy-b
- **Total Signals:** 45
- **Win Rate:** 72.3% (32W / 13L)
- **Average PNL:** +0.45%
- **Total PNL:** +15.5%
- **Sharpe Ratio:** 1.85
- **Certainty Ratio:** 2.15
...
</code><button type="button">Copy</button></pre>

<a id="generating-reports" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Generating Reports<a href="#generating-reports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">// Get raw data</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Generate markdown string</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to disk (default: ./logs/walker/my-walker.md)</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to custom path</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;./custom/reports&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="background-execution" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Background Execution<a href="#background-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Walker supports background execution mode for non-blocking operation.</p>
<a id="background-mode" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Background Mode<a href="#background-mode" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stop</span><span class="hl-1"> = </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Listen to progress without blocking</span><br/><span class="hl-0">listenWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Testing </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">...`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Listen to completion</span><br/><span class="hl-0">listenDoneWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Walker completed!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Later: stop execution early if needed</span><br/><span class="hl-0">stop</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<p><strong>Background Execution Details:</strong></p>
<ol>
<li><code>Walker.background()</code> consumes the async generator internally</li>
<li>Returns a cancellation function that stops execution</li>
<li>Emits <code>doneWalkerSubject</code> event when complete</li>
<li>Errors are caught and emitted to <code>errorEmitter</code></li>
</ol>
<p>The cancellation function calls <code>strategyGlobalService.stop()</code> for each strategy to gracefully terminate any ongoing backtests.</p>
<hr>
<a id="metric-selection-best-practices" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Metric Selection Best Practices<a href="#metric-selection-best-practices" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="choosing-the-right-metric" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Choosing the Right Metric<a href="#choosing-the-right-metric" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Use Case</th>
<th>Recommended Metric</th>
<th>Rationale</th>
</tr>
</thead>
<tbody>
<tr>
<td>Risk-adjusted performance</td>
<td><code>sharpeRatio</code> or <code>annualizedSharpeRatio</code></td>
<td>Balances returns with volatility</td>
</tr>
<tr>
<td>Maximum profitability</td>
<td><code>totalPnl</code></td>
<td>Ignores risk, focuses on absolute returns</td>
</tr>
<tr>
<td>Consistency</td>
<td><code>winRate</code></td>
<td>Prioritizes trade success frequency</td>
</tr>
<tr>
<td>Average trade quality</td>
<td><code>avgPnl</code></td>
<td>Good for comparing per-trade efficiency</td>
</tr>
<tr>
<td>Win/loss ratio</td>
<td><code>certaintyRatio</code></td>
<td>Shows if wins outweigh losses in magnitude</td>
</tr>
</tbody>
</table>
<a id="multi-metric-analysis" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Multi-Metric Analysis<a href="#multi-metric-analysis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>While walker compares strategies using a single metric, you can perform multi-metric analysis manually:</p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Rank by different metrics</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">bySharpe</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">byWinRate</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">winRate</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">winRate</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">byTotalPnl</span><span class="hl-1"> = [...</span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-4">strategies</span><span class="hl-1">].</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  (</span><span class="hl-4">b</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">totalPnl</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">) - (</span><span class="hl-4">a</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">totalPnl</span><span class="hl-1"> || </span><span class="hl-8">0</span><span class="hl-1">)</span><br/><span class="hl-1">);</span><br/><br/><span class="hl-5">// Find consensus winner</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rankings</span><span class="hl-1"> = </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Map</span><span class="hl-1">();</span><br/><span class="hl-1">[</span><span class="hl-4">bySharpe</span><span class="hl-1">, </span><span class="hl-4">byWinRate</span><span class="hl-1">, </span><span class="hl-4">byTotalPnl</span><span class="hl-1">].</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">ranking</span><span class="hl-1">, </span><span class="hl-4">metricIndex</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">ranking</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">((</span><span class="hl-4">strategy</span><span class="hl-1">, </span><span class="hl-4">rank</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">current</span><span class="hl-1"> = </span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-4">strategy</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">) || </span><span class="hl-8">0</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">set</span><span class="hl-1">(</span><span class="hl-4">strategy</span><span class="hl-1">.</span><span class="hl-4">strategyName</span><span class="hl-1">, </span><span class="hl-4">current</span><span class="hl-1"> + </span><span class="hl-4">rank</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">consensusWinner</span><span class="hl-1"> = </span><span class="hl-4">Array</span><span class="hl-1">.</span><span class="hl-0">from</span><span class="hl-1">(</span><span class="hl-4">rankings</span><span class="hl-1">.</span><span class="hl-0">entries</span><span class="hl-1">())</span><br/><span class="hl-1">  .</span><span class="hl-0">sort</span><span class="hl-1">((</span><span class="hl-4">a</span><span class="hl-1">, </span><span class="hl-4">b</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">a</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">] - </span><span class="hl-4">b</span><span class="hl-1">[</span><span class="hl-8">1</span><span class="hl-1">])[</span><span class="hl-8">0</span><span class="hl-1">][</span><span class="hl-8">0</span><span class="hl-1">];</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="comparison-with-manual-testing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Comparison with Manual Testing<a href="#comparison-with-manual-testing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="walker-vs-manual-backtest-loop" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Walker vs Manual Backtest Loop<a href="#walker-vs-manual-backtest-loop" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Manual approach:</strong></p>
<pre><code class="typescript"><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strategies</span><span class="hl-1"> = [</span><span class="hl-2">&quot;strategy-a&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-b&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-c&quot;</span><span class="hl-1">];</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = [];</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strategyName</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">strategies</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">_</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">    </span><span class="hl-4">strategyName</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><br/><span class="hl-1">  })) {}</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">({ </span><span class="hl-4">strategyName</span><span class="hl-1">, </span><span class="hl-4">stats</span><span class="hl-1"> });</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Manually compare results</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">best</span><span class="hl-1"> = </span><span class="hl-4">results</span><span class="hl-1">.</span><span class="hl-0">reduce</span><span class="hl-1">((</span><span class="hl-4">best</span><span class="hl-1">, </span><span class="hl-4">current</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">  </span><span class="hl-4">current</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> &gt; </span><span class="hl-4">best</span><span class="hl-1">.</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">sharpeRatio</span><span class="hl-1"> ? </span><span class="hl-4">current</span><span class="hl-1"> : </span><span class="hl-4">best</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Walker approach:</strong></p>
<pre><code class="typescript"><span class="hl-0">addWalker</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategies:</span><span class="hl-1"> [</span><span class="hl-2">&quot;strategy-a&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-b&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;strategy-c&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">metric:</span><span class="hl-1"> </span><span class="hl-2">&quot;sharpeRatio&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">progress</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-walker&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best: </span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">results</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-walker&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Walker advantages:</strong></p>
<ol>
<li><strong>Automatic metric extraction</strong> - No manual calculation needed</li>
<li><strong>Progress tracking</strong> - Built-in events for monitoring</li>
<li><strong>Report generation</strong> - Automatic markdown reports</li>
<li><strong>Data isolation</strong> - Automatic clearing between runs</li>
<li><strong>Validation</strong> - Upfront validation of all dependencies</li>
</ol>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#strategy-comparison"><span>Strategy <wbr/>Comparison</span></a><ul><li><a href="#comparison-metrics"><span>Comparison <wbr/>Metrics</span></a></li><li><ul><li><a href="#available-metrics"><span>Available <wbr/>Metrics</span></a></li></ul></li><li><a href="#walker-execution-architecture"><span>Walker <wbr/>Execution <wbr/>Architecture</span></a></li><li><ul><li><a href="#execution-flow-diagram"><span>Execution <wbr/>Flow <wbr/>Diagram</span></a></li><li><a href="#key-components"><span>Key <wbr/>Components</span></a></li></ul></li><li><a href="#data-accumulation-and-storage"><span>Data <wbr/>Accumulation and <wbr/>Storage</span></a></li><li><ul><li><a href="#storage-architecture"><span>Storage <wbr/>Architecture</span></a></li></ul></li><li><a href="#results-structure"><span>Results <wbr/>Structure</span></a></li><li><ul><li><a href="#iwalkerresults-interface"><span>IWalker<wbr/>Results <wbr/>Interface</span></a></li></ul></li><li><a href="#progress-tracking-and-events"><span>Progress <wbr/>Tracking and <wbr/>Events</span></a></li><li><ul><li><a href="#event-types"><span>Event <wbr/>Types</span></a></li><li><a href="#event-listeners"><span>Event <wbr/>Listeners</span></a></li></ul></li><li><a href="#progress-tracking-flow"><span>Progress <wbr/>Tracking <wbr/>Flow</span></a></li><li><a href="#validation-and-data-clearing"><span>Validation and <wbr/>Data <wbr/>Clearing</span></a></li><li><ul><li><a href="#validation-steps"><span>Validation <wbr/>Steps</span></a></li><li><a href="#data-clearing"><span>Data <wbr/>Clearing</span></a></li></ul></li><li><a href="#markdown-report-generation"><span>Markdown <wbr/>Report <wbr/>Generation</span></a></li><li><ul><li><a href="#report-structure"><span>Report <wbr/>Structure</span></a></li><li><a href="#example-report"><span>Example <wbr/>Report</span></a></li><li><a href="#generating-reports"><span>Generating <wbr/>Reports</span></a></li></ul></li><li><a href="#background-execution"><span>Background <wbr/>Execution</span></a></li><li><ul><li><a href="#background-mode"><span>Background <wbr/>Mode</span></a></li></ul></li><li><a href="#metric-selection-best-practices"><span>Metric <wbr/>Selection <wbr/>Best <wbr/>Practices</span></a></li><li><ul><li><a href="#choosing-the-right-metric"><span>Choosing the <wbr/>Right <wbr/>Metric</span></a></li><li><a href="#multi-metric-analysis"><span>Multi-<wbr/>Metric <wbr/>Analysis</span></a></li></ul></li><li><a href="#comparison-with-manual-testing"><span>Comparison with <wbr/>Manual <wbr/>Testing</span></a></li><li><ul><li><a href="#walker-vs-manual-backtest-loop"><span>Walker vs <wbr/>Manual <wbr/>Backtest <wbr/>Loop</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
