<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/09_configuration_functions | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_09_configuration_functions.html">design/09_configuration_functions</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="configuration-functions" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Configuration Functions<a href="#configuration-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="purpose-and-scope" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Purpose and Scope<a href="#purpose-and-scope" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>This document describes the three public API functions for registering configurations in the backtest-kit framework: <code>addStrategy()</code>, <code>addExchange()</code>, and <code>addFrame()</code>. These functions store schema objects in registry services that are later used by Connection Services to instantiate client components at runtime.</p>
<p>For information about running backtests and live trading with these configurations, see <a href="design_10_backtest_api.html">Backtest API</a> and <a href="design_11_live_trading_api.html">Live Trading API</a>. For details on how schema registries work internally, see <a href="design_20_schema_services.html">Schema Services</a>.</p>
<hr>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The configuration system separates registration (startup phase) from instantiation (runtime phase). Users register schemas via three functions, which store configurations in singleton registry services. At execution time, Connection Services retrieve these schemas and create memoized client instances.</p>
<p><img src="../media/09_Configuration_Functions_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Figure 1: Configuration Registration and Runtime Retrieval Flow</strong></p>
<p>The three configuration functions are:</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Schema Type</th>
<th>Purpose</th>
<th>Registry Service</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>addStrategy()</code></td>
<td><code>IStrategySchema</code></td>
<td>Registers signal generation logic with interval throttling</td>
<td><code>StrategySchemaService</code></td>
</tr>
<tr>
<td><code>addExchange()</code></td>
<td><code>IExchangeSchema</code></td>
<td>Registers candle data source and formatting functions</td>
<td><code>ExchangeSchemaService</code></td>
</tr>
<tr>
<td><code>addFrame()</code></td>
<td><code>IFrameSchema</code></td>
<td>Registers timeframe generator for backtest periods</td>
<td><code>FrameSchemaService</code></td>
</tr>
</tbody>
</table>
<hr>
<a id="addstrategy-function" class="tsd-anchor"></a><h2 class="tsd-anchor-link">addStrategy Function<a href="#addstrategy-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="function-signature" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Function Signature<a href="#function-signature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>addStrategy()</code> function registers a trading strategy configuration that defines signal generation logic, throttling interval, and optional lifecycle callbacks.</p>
<pre><code class="typescript"><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">addStrategy</span><span class="hl-1">(</span><span class="hl-4">strategySchema</span><span class="hl-1">: </span><span class="hl-11">IStrategySchema</span><span class="hl-1">): </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<a id="istrategyschema-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IStrategySchema Interface<a href="#istrategyschema-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The strategy schema contains the core strategy configuration:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code> (string)</td>
<td>✅</td>
<td>Unique strategy identifier used for registration and retrieval</td>
</tr>
<tr>
<td><code>interval</code></td>
<td><code>SignalInterval</code></td>
<td>✅</td>
<td>Throttling interval: <code>&quot;1m&quot;</code> | <code>&quot;3m&quot;</code> | <code>&quot;5m&quot;</code> | <code>&quot;15m&quot;</code> | <code>&quot;30m&quot;</code> | <code>&quot;1h&quot;</code></td>
</tr>
<tr>
<td><code>getSignal</code></td>
<td><code>(symbol: string) =&gt; Promise&lt;ISignalDto | null&gt;</code></td>
<td>✅</td>
<td>Async function returning signal DTO or null if no signal</td>
</tr>
<tr>
<td><code>callbacks</code></td>
<td><code>Partial&lt;IStrategyCallbacks&gt;</code></td>
<td>❌</td>
<td>Optional lifecycle event handlers (onTick, onOpen, onActive, onIdle, onClose)</td>
</tr>
</tbody>
</table>
<a id="signal-generation-function" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Signal Generation Function<a href="#signal-generation-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>getSignal</code> function is called at most once per <code>interval</code> due to automatic throttling. It must return either:</p>
<ul>
<li><code>ISignalDto</code> object with required fields (validated by ClientStrategy)</li>
<li><code>null</code> if no signal should be generated</li>
</ul>
<p><img src="../media/09_Configuration_Functions_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Figure 2: Signal Generation Flow with Throttling and Validation</strong></p>
<a id="isignaldto-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ISignalDto Structure<a href="#isignaldto-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The signal DTO returned by <code>getSignal</code> must contain:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Required</th>
<th>Validation Rules</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>id</code></td>
<td><code>string</code></td>
<td>❌</td>
<td>Auto-generated UUID v4 if not provided</td>
</tr>
<tr>
<td><code>position</code></td>
<td><code>&quot;long&quot;</code> | <code>&quot;short&quot;</code></td>
<td>✅</td>
<td>Trade direction</td>
</tr>
<tr>
<td><code>note</code></td>
<td><code>string</code></td>
<td>❌</td>
<td>Human-readable signal description</td>
</tr>
<tr>
<td><code>priceOpen</code></td>
<td><code>number</code></td>
<td>✅</td>
<td>Must be positive. Entry price for position.</td>
</tr>
<tr>
<td><code>priceTakeProfit</code></td>
<td><code>number</code></td>
<td>✅</td>
<td>Long: must be &gt; priceOpen. Short: must be &lt; priceOpen.</td>
</tr>
<tr>
<td><code>priceStopLoss</code></td>
<td><code>number</code></td>
<td>✅</td>
<td>Long: must be &lt; priceOpen. Short: must be &gt; priceOpen.</td>
</tr>
<tr>
<td><code>minuteEstimatedTime</code></td>
<td><code>number</code></td>
<td>✅</td>
<td>Must be positive. Signal duration before time_expired.</td>
</tr>
</tbody>
</table>
<a id="lifecycle-callbacks" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Lifecycle Callbacks<a href="#lifecycle-callbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Optional callbacks in <code>IStrategyCallbacks</code>:</p>
<table>
<thead>
<tr>
<th>Callback</th>
<th>Parameters</th>
<th>When Called</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onTick</code></td>
<td><code>(symbol, result, backtest)</code></td>
<td>On every tick execution (idle, opened, active, closed)</td>
</tr>
<tr>
<td><code>onOpen</code></td>
<td><code>(symbol, data, currentPrice, backtest)</code></td>
<td>After signal validation and persistence</td>
</tr>
<tr>
<td><code>onActive</code></td>
<td><code>(symbol, data, currentPrice, backtest)</code></td>
<td>When monitoring active signal (every tick)</td>
</tr>
<tr>
<td><code>onIdle</code></td>
<td><code>(symbol, currentPrice, backtest)</code></td>
<td>When no active signal exists</td>
</tr>
<tr>
<td><code>onClose</code></td>
<td><code>(symbol, data, priceClose, backtest)</code></td>
<td>When signal closes (TP/SL/time_expired)</td>
</tr>
</tbody>
</table>
<a id="implementation-details" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Implementation Details<a href="#implementation-details" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>addStrategy()</code> function implementation in <a href="">src/function/add.ts:44-52</a>:</p>
<ol>
<li>Logs the registration via <code>LoggerService</code> with topic <code>&quot;add.addStrategy&quot;</code></li>
<li>Calls <code>strategySchemaService.register(strategyName, strategySchema)</code> to store in registry</li>
<li>Does not validate the schema (validation happens at runtime in ClientStrategy)</li>
</ol>
<hr>
<a id="addexchange-function" class="tsd-anchor"></a><h2 class="tsd-anchor-link">addExchange Function<a href="#addexchange-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="function-signature-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Function Signature<a href="#function-signature-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>addExchange()</code> function registers an exchange data source that provides historical candle data and formatting functions.</p>
<pre><code class="typescript"><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">addExchange</span><span class="hl-1">(</span><span class="hl-4">exchangeSchema</span><span class="hl-1">: </span><span class="hl-11">IExchangeSchema</span><span class="hl-1">): </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<a id="iexchangeschema-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IExchangeSchema Interface<a href="#iexchangeschema-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The exchange schema defines data source integration:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>exchangeName</code></td>
<td><code>ExchangeName</code> (string)</td>
<td>✅</td>
<td>Unique exchange identifier</td>
</tr>
<tr>
<td><code>getCandles</code></td>
<td><code>(symbol, interval, since, limit) =&gt; Promise&lt;ICandleData[]&gt;</code></td>
<td>✅</td>
<td>Fetches historical OHLCV candle data</td>
</tr>
<tr>
<td><code>formatQuantity</code></td>
<td><code>(symbol, quantity) =&gt; Promise&lt;string&gt;</code></td>
<td>✅</td>
<td>Formats quantity per exchange precision rules</td>
</tr>
<tr>
<td><code>formatPrice</code></td>
<td><code>(symbol, price) =&gt; Promise&lt;string&gt;</code></td>
<td>✅</td>
<td>Formats price per exchange precision rules</td>
</tr>
<tr>
<td><code>callbacks</code></td>
<td><code>Partial&lt;IExchangeCallbacks&gt;</code></td>
<td>❌</td>
<td>Optional event handlers (onCandleData)</td>
</tr>
</tbody>
</table>
<a id="getcandles-function" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getCandles Function<a href="#getcandles-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>getCandles</code> implementation must fetch historical candle data:</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>symbol: string</code> - Trading pair (e.g., &quot;BTCUSDT&quot;)</li>
<li><code>interval: CandleInterval</code> - Time interval: <code>&quot;1m&quot;</code> | <code>&quot;3m&quot;</code> | <code>&quot;5m&quot;</code> | <code>&quot;15m&quot;</code> | <code>&quot;30m&quot;</code> | <code>&quot;1h&quot;</code> | <code>&quot;2h&quot;</code> | <code>&quot;4h&quot;</code> | <code>&quot;6h&quot;</code> | <code>&quot;8h&quot;</code></li>
<li><code>since: Date</code> - Start date for candle fetching (backwards from this point)</li>
<li><code>limit: number</code> - Maximum number of candles to return</li>
</ul>
<p><strong>Returns:</strong> <code>Promise&lt;ICandleData[]&gt;</code> array sorted by timestamp ascending</p>
<a id="icandledata-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ICandleData Structure<a href="#icandledata-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each candle object must contain:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>timestamp</code></td>
<td><code>number</code></td>
<td>Unix timestamp in milliseconds when candle opened</td>
</tr>
<tr>
<td><code>open</code></td>
<td><code>number</code></td>
<td>Opening price at candle start</td>
</tr>
<tr>
<td><code>high</code></td>
<td><code>number</code></td>
<td>Highest price during candle period</td>
</tr>
<tr>
<td><code>low</code></td>
<td><code>number</code></td>
<td>Lowest price during candle period</td>
</tr>
<tr>
<td><code>close</code></td>
<td><code>number</code></td>
<td>Closing price at candle end</td>
</tr>
<tr>
<td><code>volume</code></td>
<td><code>number</code></td>
<td>Trading volume during candle period</td>
</tr>
</tbody>
</table>
<a id="format-functions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Format Functions<a href="#format-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The formatting functions ensure prices and quantities match exchange precision rules:</p>
<ul>
<li><code>formatPrice(symbol, price)</code> - Returns formatted price string (e.g., &quot;50000.12&quot;)</li>
<li><code>formatQuantity(symbol, quantity)</code> - Returns formatted quantity string (e.g., &quot;0.12345678&quot;)</li>
</ul>
<p>These are typically implemented using exchange API metadata or hardcoded precision rules.</p>
<a id="exchange-registration-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Exchange Registration Flow<a href="#exchange-registration-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/09_Configuration_Functions_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Figure 3: Exchange Schema Registration Sequence</strong></p>
<hr>
<a id="addframe-function" class="tsd-anchor"></a><h2 class="tsd-anchor-link">addFrame Function<a href="#addframe-function" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="function-signature-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Function Signature<a href="#function-signature-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>addFrame()</code> function registers a timeframe generator for backtesting with defined start/end dates and interval.</p>
<pre><code class="typescript"><span class="hl-6">function</span><span class="hl-1"> </span><span class="hl-0">addFrame</span><span class="hl-1">(</span><span class="hl-4">frameSchema</span><span class="hl-1">: </span><span class="hl-11">IFrameSchema</span><span class="hl-1">): </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<a id="iframeschema-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IFrameSchema Interface<a href="#iframeschema-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The frame schema configures backtest period generation:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code> (string)</td>
<td>✅</td>
<td>Unique frame identifier</td>
</tr>
<tr>
<td><code>interval</code></td>
<td><code>FrameInterval</code></td>
<td>✅</td>
<td>Timestamp spacing interval</td>
</tr>
<tr>
<td><code>startDate</code></td>
<td><code>Date</code></td>
<td>✅</td>
<td>Start of backtest period (inclusive)</td>
</tr>
<tr>
<td><code>endDate</code></td>
<td><code>Date</code></td>
<td>✅</td>
<td>End of backtest period (inclusive)</td>
</tr>
<tr>
<td><code>callbacks</code></td>
<td><code>Partial&lt;IFrameCallbacks&gt;</code></td>
<td>❌</td>
<td>Optional lifecycle callbacks (onTimeframe)</td>
</tr>
</tbody>
</table>
<a id="frame-intervals" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Frame Intervals<a href="#frame-intervals" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Valid <code>FrameInterval</code> values determine timestamp spacing:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Intervals</th>
</tr>
</thead>
<tbody>
<tr>
<td>Minutes</td>
<td><code>&quot;1m&quot;</code>, <code>&quot;3m&quot;</code>, <code>&quot;5m&quot;</code>, <code>&quot;15m&quot;</code>, <code>&quot;30m&quot;</code></td>
</tr>
<tr>
<td>Hours</td>
<td><code>&quot;1h&quot;</code>, <code>&quot;2h&quot;</code>, <code>&quot;4h&quot;</code>, <code>&quot;6h&quot;</code>, <code>&quot;8h&quot;</code>, <code>&quot;12h&quot;</code></td>
</tr>
<tr>
<td>Days</td>
<td><code>&quot;1d&quot;</code>, <code>&quot;3d&quot;</code></td>
</tr>
</tbody>
</table>
<p>The frame generates an array of <code>Date</code> objects spaced by the specified interval between <code>startDate</code> and <code>endDate</code>.</p>
<a id="timeframe-generation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Timeframe Generation<a href="#timeframe-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When a backtest runs, the frame generates timestamps:</p>
<p><img src="../media/09_Configuration_Functions_3.svg" alt="Mermaid Diagram"></p>
<p><strong>Figure 4: Timeframe Array Generation</strong></p>
<a id="frame-callbacks" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Frame Callbacks<a href="#frame-callbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>onTimeframe</code> callback is invoked after timestamp array generation:</p>
<pre><code class="typescript"><span class="hl-10">onTimeframe</span><span class="hl-1">: (</span><br/><span class="hl-1">  </span><span class="hl-4">timeframe</span><span class="hl-1">: </span><span class="hl-4">Date</span><span class="hl-1">[],      </span><span class="hl-5">// Generated timestamp array</span><br/><span class="hl-1">  </span><span class="hl-4">startDate</span><span class="hl-1">: </span><span class="hl-4">Date</span><span class="hl-1">,        </span><span class="hl-5">// Schema startDate</span><br/><span class="hl-1">  </span><span class="hl-4">endDate</span><span class="hl-1">: </span><span class="hl-4">Date</span><span class="hl-1">,          </span><span class="hl-5">// Schema endDate</span><br/><span class="hl-1">  </span><span class="hl-4">interval</span><span class="hl-1">: </span><span class="hl-4">FrameInterval</span><span class="hl-1"> </span><span class="hl-5">// Schema interval</span><br/><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span>
</code><button type="button">Copy</button></pre>

<p>This callback is useful for logging timestamp counts or validating the generated timeframe.</p>
<hr>
<a id="registration-flow-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Registration Flow Architecture<a href="#registration-flow-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="schema-storage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Schema Storage<a href="#schema-storage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each schema service maintains an internal <code>Map</code> data structure:</p>
<table>
<thead>
<tr>
<th>Service</th>
<th>Key Type</th>
<th>Value Type</th>
<th>Storage Location</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>StrategySchemaService</code></td>
<td><code>StrategyName</code></td>
<td><code>IStrategySchema</code></td>
<td>Memory (singleton service)</td>
</tr>
<tr>
<td><code>ExchangeSchemaService</code></td>
<td><code>ExchangeName</code></td>
<td><code>IExchangeSchema</code></td>
<td>Memory (singleton service)</td>
</tr>
<tr>
<td><code>FrameSchemaService</code></td>
<td><code>FrameName</code></td>
<td><code>IFrameSchema</code></td>
<td>Memory (singleton service)</td>
</tr>
</tbody>
</table>
<p>These registries persist for the lifetime of the Node.js process. They are not stored on disk.</p>
<a id="registration-example" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Registration Example<a href="#registration-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The following demonstrates registering all three schema types:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">addStrategy</span><span class="hl-1">, </span><span class="hl-4">addExchange</span><span class="hl-1">, </span><span class="hl-4">addFrame</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// 1. Register exchange data source</span><br/><span class="hl-0">addExchange</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getCandles</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">interval</span><span class="hl-1">, </span><span class="hl-4">since</span><span class="hl-1">, </span><span class="hl-4">limit</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Implementation fetches from API or database</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">candles</span><span class="hl-1">; </span><span class="hl-5">// ICandleData[]</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">formatPrice</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">price</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">price</span><span class="hl-1">.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-8">2</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-0">formatQuantity</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">quantity</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">quantity</span><span class="hl-1">.</span><span class="hl-0">toFixed</span><span class="hl-1">(</span><span class="hl-8">8</span><span class="hl-1">),</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 2. Register trading strategy</span><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;trend-following&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;5m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Implementation checks indicators</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">shouldOpenLong</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">position:</span><span class="hl-1"> </span><span class="hl-2">&quot;long&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">priceOpen:</span><span class="hl-1"> </span><span class="hl-8">50000</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">priceTakeProfit:</span><span class="hl-1"> </span><span class="hl-8">51000</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">priceStopLoss:</span><span class="hl-1"> </span><span class="hl-8">49000</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">minuteEstimatedTime:</span><span class="hl-1"> </span><span class="hl-8">60</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">callbacks:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onOpen</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">, </span><span class="hl-4">signal</span><span class="hl-1">, </span><span class="hl-4">currentPrice</span><span class="hl-1">, </span><span class="hl-4">backtest</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`[</span><span class="hl-6">${</span><span class="hl-4">backtest</span><span class="hl-9"> </span><span class="hl-1">?</span><span class="hl-9"> </span><span class="hl-2">&quot;BT&quot;</span><span class="hl-9"> </span><span class="hl-1">:</span><span class="hl-9"> </span><span class="hl-2">&quot;LIVE&quot;</span><span class="hl-6">}</span><span class="hl-2">] Signal opened:`</span><span class="hl-1">, </span><span class="hl-4">signal</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 3. Register backtest timeframe</span><br/><span class="hl-0">addFrame</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;jan-2024&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">startDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">endDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-31T23:59:59Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">callbacks:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onTimeframe</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">timeframe</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Generated </span><span class="hl-6">${</span><span class="hl-4">timeframe</span><span class="hl-9">.</span><span class="hl-4">length</span><span class="hl-6">}</span><span class="hl-2"> timestamps`</span><span class="hl-1">);</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="schema-retrieval-at-runtime" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Schema Retrieval at Runtime<a href="#schema-retrieval-at-runtime" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="connection-service-access-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connection Service Access Pattern<a href="#connection-service-access-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When backtest or live execution starts, Connection Services retrieve schemas by name:</p>
<p><img src="../media/09_Configuration_Functions_5.svg" alt="Mermaid Diagram"></p>
<p><strong>Figure 6: Schema Retrieval and Client Instantiation with Memoization</strong></p>
<p>This memoization ensures that multiple calls with the same <code>strategyName</code> return the same <code>ClientStrategy</code> instance, preserving state across ticks.</p>
<a id="context-routing" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Context Routing<a href="#context-routing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>MethodContextService</code> provides implicit context propagation:</p>
<pre><code class="typescript"><span class="hl-5">// MethodContextService context structure</span><br/><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-11">IMethodContext</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-11">ExchangeName</span><span class="hl-1">;  </span><span class="hl-5">// Which exchange to use</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-11">StrategyName</span><span class="hl-1">;  </span><span class="hl-5">// Which strategy to use</span><br/><span class="hl-1">  </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-11">FrameName</span><span class="hl-1">;        </span><span class="hl-5">// Which frame to use (empty in live mode)</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This context is set by <code>Backtest.run()</code> or <code>Live.run()</code> and automatically routes to the correct schema registries.</p>
<hr>
<a id="schema-validation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Schema Validation<a href="#schema-validation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="registration-time" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Registration Time<a href="#registration-time" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>add*()</code> functions perform <strong>no validation</strong> at registration time. Invalid schemas are stored as-is.</p>
<a id="runtime-validation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Runtime Validation<a href="#runtime-validation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Validation occurs when:</p>
<ol>
<li>
<p><strong>ClientStrategy</strong> validates <code>ISignalDto</code> returned by <code>getSignal()</code>:</p>
<ul>
<li>All prices must be positive</li>
<li>Take profit logic: long requires TP &gt; open, short requires TP &lt; open</li>
<li>Stop loss logic: long requires SL &lt; open, short requires SL &gt; open</li>
<li>Time must be positive</li>
<li>Throws detailed validation errors if invalid</li>
</ul>
</li>
<li>
<p><strong>ClientExchange</strong> validates candle data:</p>
<ul>
<li>Ensures non-empty arrays</li>
<li>Validates OHLCV data structure</li>
</ul>
</li>
<li>
<p><strong>ClientFrame</strong> validates date range:</p>
<ul>
<li>Ensures <code>endDate &gt;= startDate</code></li>
<li>Validates interval values</li>
</ul>
</li>
</ol>
<p>Validation errors throw exceptions with descriptive messages.</p>
<hr>
<a id="multiple-schema-registration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Multiple Schema Registration<a href="#multiple-schema-registration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="registering-multiple-strategies" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Registering Multiple Strategies<a href="#registering-multiple-strategies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Multiple strategies can be registered with different names:</p>
<pre><code class="typescript"><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;strategy-1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;5m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-5">/* ... */</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;strategy-2&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;15m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> { </span><span class="hl-5">/* ... */</span><span class="hl-1"> },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Run both strategies simultaneously</span><br/><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;strategy-1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;frame-1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;strategy-2&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;frame-1&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>Each strategy maintains independent state (separate <code>ClientStrategy</code> instances due to memoization by name).</p>
<a id="overwriting-schemas" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Overwriting Schemas<a href="#overwriting-schemas" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Calling <code>add*()</code> with an existing name <strong>overwrites</strong> the previous schema:</p>
<pre><code class="typescript"><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;5m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> () </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Overwrites previous registration</span><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;15m&quot;</span><span class="hl-1">,  </span><span class="hl-5">// Changed interval</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> () </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p>The memoization cache is <strong>not</strong> cleared, so existing instances continue using the old schema. Only new requests retrieve the updated schema.</p>
<hr>
<a id="type-exports" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Type Exports<a href="#type-exports" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All schema interfaces are exported from the main package:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">IStrategySchema</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">IExchangeSchema</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">IFrameSchema</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addStrategy</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addExchange</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addFrame</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span>
</code><button type="button">Copy</button></pre>

<p>Supporting types also exported:</p>
<ul>
<li><code>SignalInterval</code> - Strategy throttling intervals</li>
<li><code>CandleInterval</code> - Exchange candle intervals</li>
<li><code>FrameInterval</code> - Frame timestamp spacing intervals</li>
<li><code>ISignalDto</code> - Signal data transfer object</li>
<li><code>ICandleData</code> - Candle OHLCV structure</li>
<li><code>IStrategyCallbacks</code> - Strategy lifecycle callbacks</li>
<li><code>IExchangeCallbacks</code> - Exchange lifecycle callbacks</li>
<li><code>IFrameCallbacks</code> - Frame lifecycle callbacks</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#configuration-functions"><span>Configuration <wbr/>Functions</span></a><ul><li><a href="#purpose-and-scope"><span>Purpose and <wbr/>Scope</span></a></li><li><a href="#overview"><span>Overview</span></a></li><li><a href="#addstrategy-function"><span>add<wbr/>Strategy <wbr/>Function</span></a></li><li><ul><li><a href="#function-signature"><span>Function <wbr/>Signature</span></a></li><li><a href="#istrategyschema-interface"><span>IStrategy<wbr/>Schema <wbr/>Interface</span></a></li><li><a href="#signal-generation-function"><span>Signal <wbr/>Generation <wbr/>Function</span></a></li><li><a href="#isignaldto-structure"><span>ISignal<wbr/>Dto <wbr/>Structure</span></a></li><li><a href="#lifecycle-callbacks"><span>Lifecycle <wbr/>Callbacks</span></a></li><li><a href="#implementation-details"><span>Implementation <wbr/>Details</span></a></li></ul></li><li><a href="#addexchange-function"><span>add<wbr/>Exchange <wbr/>Function</span></a></li><li><ul><li><a href="#function-signature-1"><span>Function <wbr/>Signature</span></a></li><li><a href="#iexchangeschema-interface"><span>IExchange<wbr/>Schema <wbr/>Interface</span></a></li><li><a href="#getcandles-function"><span>get<wbr/>Candles <wbr/>Function</span></a></li><li><a href="#icandledata-structure"><span>ICandle<wbr/>Data <wbr/>Structure</span></a></li><li><a href="#format-functions"><span>Format <wbr/>Functions</span></a></li><li><a href="#exchange-registration-flow"><span>Exchange <wbr/>Registration <wbr/>Flow</span></a></li></ul></li><li><a href="#addframe-function"><span>add<wbr/>Frame <wbr/>Function</span></a></li><li><ul><li><a href="#function-signature-2"><span>Function <wbr/>Signature</span></a></li><li><a href="#iframeschema-interface"><span>IFrame<wbr/>Schema <wbr/>Interface</span></a></li><li><a href="#frame-intervals"><span>Frame <wbr/>Intervals</span></a></li><li><a href="#timeframe-generation"><span>Timeframe <wbr/>Generation</span></a></li><li><a href="#frame-callbacks"><span>Frame <wbr/>Callbacks</span></a></li></ul></li><li><a href="#registration-flow-architecture"><span>Registration <wbr/>Flow <wbr/>Architecture</span></a></li><li><ul><li><a href="#schema-storage"><span>Schema <wbr/>Storage</span></a></li><li><a href="#registration-example"><span>Registration <wbr/>Example</span></a></li></ul></li><li><a href="#schema-retrieval-at-runtime"><span>Schema <wbr/>Retrieval at <wbr/>Runtime</span></a></li><li><ul><li><a href="#connection-service-access-pattern"><span>Connection <wbr/>Service <wbr/>Access <wbr/>Pattern</span></a></li><li><a href="#context-routing"><span>Context <wbr/>Routing</span></a></li></ul></li><li><a href="#schema-validation"><span>Schema <wbr/>Validation</span></a></li><li><ul><li><a href="#registration-time"><span>Registration <wbr/>Time</span></a></li><li><a href="#runtime-validation"><span>Runtime <wbr/>Validation</span></a></li></ul></li><li><a href="#multiple-schema-registration"><span>Multiple <wbr/>Schema <wbr/>Registration</span></a></li><li><ul><li><a href="#registering-multiple-strategies"><span>Registering <wbr/>Multiple <wbr/>Strategies</span></a></li><li><a href="#overwriting-schemas"><span>Overwriting <wbr/>Schemas</span></a></li></ul></li><li><a href="#type-exports"><span>Type <wbr/>Exports</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
