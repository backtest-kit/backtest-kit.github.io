<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/20_schedule_api | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_20_schedule_api.html">design/20_schedule_api</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="schedule-api" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Schedule API<a href="#schedule-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="purpose-and-scope" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Purpose and Scope<a href="#purpose-and-scope" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API provides analysis and reporting for scheduled signals (limit orders) in the backtest-kit framework. Scheduled signals are signals that specify a <code>priceOpen</code> entry price different from the current market price, requiring the strategy to wait for price activation. This API tracks scheduled signal creation, cancellation events, and provides metrics like cancellation rate and average wait time.</p>
<p>For information about the signal lifecycle including scheduled state transitions, see <a href="design_46_signal_lifecycle.html">Signal Lifecycle</a>. For general strategy execution methods, see <a href="design_17_backtest_api.html">Backtest API</a> and <a href="design_18_live_trading_api.html">Live Trading API</a>.</p>
<hr>
<a id="scheduled-signal-lifecycle" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Scheduled Signal Lifecycle<a href="#scheduled-signal-lifecycle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Scheduled signals represent limit orders that wait for price to reach a specific entry point before activation. Unlike immediate signals that open at current market price, scheduled signals remain in a pending state until activation conditions are met or cancellation occurs.</p>
<a id="lifecycle-state-machine" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Lifecycle State Machine<a href="#lifecycle-state-machine" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_0.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="core-methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Core Methods<a href="#core-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API is exposed through a service interface with three primary methods for data access, report generation, and file persistence.</p>
<a id="method-signatures" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Method Signatures<a href="#method-signatures" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_1.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="getdata-method" class="tsd-anchor"></a><h2 class="tsd-anchor-link">getData Method<a href="#getdata-method" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Retrieves statistical data for scheduled signals, including cancellation rate and average wait time for cancelled signals.</p>
<a id="signature" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Signature<a href="#signature" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">ScheduleStatistics</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="parameters" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Parameters<a href="#parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol (e.g., &quot;BTCUSDT&quot;)</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy name registered via <code>addStrategy</code></td>
</tr>
</tbody>
</table>
<a id="return-value" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Return Value<a href="#return-value" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Returns <code>ScheduleStatistics</code> interface with the following fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>eventList</code></td>
<td><code>ScheduledEvent[]</code></td>
<td>Array of all scheduled/cancelled events</td>
</tr>
<tr>
<td><code>totalEvents</code></td>
<td><code>number</code></td>
<td>Total number of events (scheduled + cancelled)</td>
</tr>
<tr>
<td><code>totalScheduled</code></td>
<td><code>number</code></td>
<td>Count of scheduled signals created</td>
</tr>
<tr>
<td><code>totalCancelled</code></td>
<td><code>number</code></td>
<td>Count of cancelled signals</td>
</tr>
<tr>
<td><code>cancellationRate</code></td>
<td><code>number | null</code></td>
<td>Percentage of scheduled signals that were cancelled (0-100), null if no scheduled signals</td>
</tr>
<tr>
<td><code>avgWaitTime</code></td>
<td><code>number | null</code></td>
<td>Average waiting time for cancelled signals in minutes, null if no cancelled signals</td>
</tr>
</tbody>
</table>
<a id="usage-example" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// After running backtest or live trading with scheduled signals</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total scheduled: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalScheduled</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total cancelled: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalCancelled</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Cancellation rate: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">cancellationRate</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Average wait time: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">avgWaitTime</span><span class="hl-6">}</span><span class="hl-2"> minutes`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Access raw event data</span><br/><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">eventList</span><span class="hl-1">.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">event</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;cancelled&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Cancelled signal </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">signalId</span><span class="hl-6">}</span><span class="hl-2"> after </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">duration</span><span class="hl-6">}</span><span class="hl-2"> minutes`</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="getreport-method" class="tsd-anchor"></a><h2 class="tsd-anchor-link">getReport Method<a href="#getreport-method" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Generates a human-readable markdown report with detailed event tables and summary statistics.</p>
<a id="signature-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Signature<a href="#signature-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">string</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="parameters-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Parameters<a href="#parameters-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy name</td>
</tr>
</tbody>
</table>
<a id="return-value-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Return Value<a href="#return-value-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Returns a markdown-formatted string containing:</p>
<ul>
<li>Header with strategy name</li>
<li>Table of all scheduled/cancelled events</li>
<li>Summary statistics (total events, cancellation rate, average wait time)</li>
</ul>
<a id="report-format" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Report Format<a href="#report-format" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The markdown report includes the following columns:</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Timestamp</td>
<td>Event creation timestamp (ISO 8601)</td>
</tr>
<tr>
<td>Action</td>
<td><code>SCHEDULED</code> or <code>CANCELLED</code></td>
</tr>
<tr>
<td>Symbol</td>
<td>Trading pair</td>
</tr>
<tr>
<td>Signal ID</td>
<td>Unique signal identifier</td>
</tr>
<tr>
<td>Position</td>
<td><code>LONG</code> or <code>SHORT</code></td>
</tr>
<tr>
<td>Note</td>
<td>Optional signal description</td>
</tr>
<tr>
<td>Current Price</td>
<td>Market price at event time</td>
</tr>
<tr>
<td>Entry Price</td>
<td>Scheduled <code>priceOpen</code></td>
</tr>
<tr>
<td>Take Profit</td>
<td>TP level</td>
</tr>
<tr>
<td>Stop Loss</td>
<td>SL level</td>
</tr>
<tr>
<td>Wait Time (min)</td>
<td>Duration before cancellation (cancelled events only)</td>
</tr>
</tbody>
</table>
<a id="usage-example-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">markdown</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Example output:</span><br/><span class="hl-5">// # Scheduled Signals Report: my-strategy</span><br/><span class="hl-5">//</span><br/><span class="hl-5">// | Timestamp | Action | Symbol | ... |</span><br/><span class="hl-5">// | --- | --- | --- | ... |</span><br/><span class="hl-5">// | 2024-01-01T00:00:00Z | SCHEDULED | BTCUSDT | ... |</span><br/><span class="hl-5">// | 2024-01-01T01:30:00Z | CANCELLED | BTCUSDT | ... |</span><br/><span class="hl-5">//</span><br/><span class="hl-5">// **Total events:** 45</span><br/><span class="hl-5">// **Scheduled signals:** 30</span><br/><span class="hl-5">// **Cancelled signals:** 15</span><br/><span class="hl-5">// **Cancellation rate:** 50.00% (lower is better)</span><br/><span class="hl-5">// **Average wait time (cancelled):** 65.33 minutes</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="dump-method" class="tsd-anchor"></a><h2 class="tsd-anchor-link">dump Method<a href="#dump-method" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Saves the markdown report to disk at a specified path.</p>
<a id="signature-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Signature<a href="#signature-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><span class="hl-1">, </span><span class="hl-4">path</span><span class="hl-1">?: </span><span class="hl-4">string</span><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<a id="parameters-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Parameters<a href="#parameters-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>-</td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>-</td>
<td>Strategy name</td>
</tr>
<tr>
<td><code>path</code></td>
<td><code>string</code></td>
<td><code>&quot;./dump/schedule&quot;</code></td>
<td>Directory path for report file</td>
</tr>
</tbody>
</table>
<a id="file-output" class="tsd-anchor"></a><h3 class="tsd-anchor-link">File Output<a href="#file-output" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Creates directory if it doesn't exist</li>
<li>Saves report as <code>{strategyName}.md</code> in specified directory</li>
<li>Example: <code>./dump/schedule/my-strategy.md</code></li>
</ul>
<a id="usage-example-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Usage Example<a href="#usage-example-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Save to default path: ./dump/schedule/my-strategy.md</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to custom path: ./reports/schedule/my-strategy.md</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;./reports/schedule&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="event-data-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Data Structure<a href="#event-data-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API tracks two types of events: scheduled signal creation and scheduled signal cancellation.</p>
<a id="scheduledevent-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ScheduledEvent Interface<a href="#scheduledevent-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_2.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="event-tracking-and-persistence" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Tracking and Persistence<a href="#event-tracking-and-persistence" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API uses internal storage per symbol-strategy pair to accumulate events during execution.</p>
<a id="storage-architecture" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Storage Architecture<a href="#storage-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_3.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="event-queue-management" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Queue Management<a href="#event-queue-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API maintains a bounded queue of events to prevent unbounded memory growth during long-running live trading sessions.</p>
<a id="queue-behavior" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Queue Behavior<a href="#queue-behavior" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Aspect</th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Max Size</strong></td>
<td>250 events (<code>MAX_EVENTS</code> constant)</td>
</tr>
<tr>
<td><strong>Overflow</strong></td>
<td>FIFO eviction (oldest events removed first)</td>
</tr>
<tr>
<td><strong>Deduplication</strong></td>
<td>Cancelled events replace scheduled events by <code>signalId</code></td>
</tr>
<tr>
<td><strong>Memory Safety</strong></td>
<td>Bounded memory regardless of execution duration</td>
</tr>
</tbody>
</table>
<a id="event-replacement-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Replacement Logic<a href="#event-replacement-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_4.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="cancellation-reasons" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Cancellation Reasons<a href="#cancellation-reasons" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Scheduled signals can be cancelled for multiple reasons before activation. The Schedule API tracks all cancellations but does not distinguish between cancellation reasons in statistics.</p>
<a id="cancellation-triggers" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Cancellation Triggers<a href="#cancellation-triggers" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_5.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="configuration-parameters" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Configuration Parameters<a href="#configuration-parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API behavior is influenced by global configuration parameters that control timeout durations and price validation.</p>
<a id="relevant-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Relevant Configuration<a href="#relevant-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>CC_SCHEDULE_AWAIT_MINUTES</code></td>
<td><code>number</code></td>
<td><code>120</code></td>
<td>Maximum wait time for scheduled signal activation before timeout cancellation</td>
</tr>
<tr>
<td><code>CC_MIN_TAKEPROFIT_DISTANCE_PERCENT</code></td>
<td><code>number</code></td>
<td><code>0.3</code></td>
<td>Minimum TP distance to cover fees (validated at signal creation)</td>
</tr>
<tr>
<td><code>CC_MAX_STOPLOSS_DISTANCE_PERCENT</code></td>
<td><code>number</code></td>
<td><code>20</code></td>
<td>Maximum SL distance to prevent catastrophic losses (validated at signal creation)</td>
</tr>
</tbody>
</table>
<a id="configuration-example" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Configuration Example<a href="#configuration-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">setConfig</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Reduce scheduled signal timeout to 60 minutes</span><br/><span class="hl-0">setConfig</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">CC_SCHEDULE_AWAIT_MINUTES:</span><span class="hl-1"> </span><span class="hl-8">60</span><span class="hl-1">,</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="integration-with-strategy-callbacks" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Strategy Callbacks<a href="#integration-with-strategy-callbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API automatically subscribes to signal events emitted by strategy execution. No manual integration is required.</p>
<a id="event-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Flow<a href="#event-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_6.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="use-cases-and-examples" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Use Cases and Examples<a href="#use-cases-and-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="example-1-monitoring-cancellation-rate" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 1: Monitoring Cancellation Rate<a href="#example-1-monitoring-cancellation-rate" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Track the percentage of scheduled signals that never activate to identify issues with entry price selection.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1">, </span><span class="hl-4">Backtest</span><span class="hl-1">, </span><span class="hl-4">addStrategy</span><span class="hl-1">, </span><span class="hl-4">addExchange</span><span class="hl-1">, </span><span class="hl-4">addFrame</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;limit-order-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;5m&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">symbol</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">currentPrice</span><span class="hl-1"> = </span><span class="hl-8">50000</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">position:</span><span class="hl-1"> </span><span class="hl-2">&quot;long&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">priceOpen:</span><span class="hl-1"> </span><span class="hl-8">48000</span><span class="hl-1">,  </span><span class="hl-5">// Wait for 4% pullback</span><br/><span class="hl-1">      </span><span class="hl-4">priceTakeProfit:</span><span class="hl-1"> </span><span class="hl-8">51000</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">priceStopLoss:</span><span class="hl-1"> </span><span class="hl-8">47000</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">minuteEstimatedTime:</span><span class="hl-1"> </span><span class="hl-8">180</span><span class="hl-1">,</span><br/><span class="hl-1">    };</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">_</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;limit-order-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1month-backtest&quot;</span><br/><span class="hl-1">})) {}</span><br/><br/><span class="hl-5">// Check cancellation rate</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;limit-order-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Cancellation rate: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">cancellationRate</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">cancellationRate</span><span class="hl-1"> &gt; </span><span class="hl-8">50</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">&quot;High cancellation rate - consider adjusting priceOpen logic&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="example-2-analyzing-wait-times" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 2: Analyzing Wait Times<a href="#example-2-analyzing-wait-times" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Understand how long scheduled signals wait before cancellation to optimize timeout configuration.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// After live trading session</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;ETHUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Average wait time: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">avgWaitTime</span><span class="hl-6">}</span><span class="hl-2"> minutes`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Timeout setting: </span><span class="hl-6">${</span><span class="hl-7">GLOBAL_CONFIG</span><span class="hl-9">.</span><span class="hl-7">CC_SCHEDULE_AWAIT_MINUTES</span><span class="hl-6">}</span><span class="hl-2"> minutes`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Analyze individual events</span><br/><span class="hl-4">stats</span><span class="hl-1">.</span><span class="hl-4">eventList</span><br/><span class="hl-1">  .</span><span class="hl-0">filter</span><span class="hl-1">(</span><span class="hl-4">e</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-4">e</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;cancelled&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">  .</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">event</span><span class="hl-1"> </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Signal </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">signalId</span><span class="hl-6">}</span><span class="hl-2">: waited </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">duration</span><span class="hl-6">}</span><span class="hl-2"> minutes`</span><span class="hl-1">);</span><br/><span class="hl-1">  });</span>
</code><button type="button">Copy</button></pre>

<a id="example-3-comparing-strategies" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example 3: Comparing Strategies<a href="#example-3-comparing-strategies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Use Schedule API with Walker to compare scheduled signal effectiveness across multiple strategies.</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Schedule</span><span class="hl-1">, </span><span class="hl-4">Walker</span><span class="hl-1">, </span><span class="hl-4">addWalker</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">addWalker</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;schedule-comparison&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1week-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategies:</span><span class="hl-1"> [</span><span class="hl-2">&quot;aggressive-limits&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;conservative-limits&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;market-orders&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">metric:</span><span class="hl-1"> </span><span class="hl-2">&quot;sharpeRatio&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-4">Walker</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, { </span><span class="hl-4">walkerName:</span><span class="hl-1"> </span><span class="hl-2">&quot;schedule-comparison&quot;</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">// After completion, analyze scheduled signal usage</span><br/><span class="hl-3">for</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">strategyName</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> [</span><span class="hl-2">&quot;aggressive-limits&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;conservative-limits&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;market-orders&quot;</span><span class="hl-1">]) {</span><br/><span class="hl-1">  </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Schedule</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-4">strategyName</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalScheduled</span><span class="hl-6">}</span><span class="hl-2"> scheduled, </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">cancellationRate</span><span class="hl-6">}</span><span class="hl-2">% cancelled`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="relationship-to-other-apis" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Relationship to Other APIs<a href="#relationship-to-other-apis" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API complements other reporting APIs in the backtest-kit framework.</p>
<table>
<thead>
<tr>
<th>API</th>
<th>Purpose</th>
<th>Related To Schedule API</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="design_17_backtest_api.html">Backtest API</a></td>
<td>Historical simulation statistics</td>
<td>Schedule API tracks subset of signals (scheduled only)</td>
</tr>
<tr>
<td><a href="design_18_live_trading_api.html">Live Trading API</a></td>
<td>Real-time execution statistics</td>
<td>Schedule API works in both backtest and live modes</td>
</tr>
<tr>
<td><a href="design_20_schedule_api.html">Partial API</a></td>
<td>Profit/loss milestone tracking</td>
<td>Both track signal progress, different metrics</td>
</tr>
<tr>
<td><a href="design_19_walker_api.html">Walker API</a></td>
<td>Strategy comparison</td>
<td>Schedule API provides per-strategy scheduled signal metrics</td>
</tr>
</tbody>
</table>
<hr>
<a id="implementation-details" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Implementation Details<a href="#implementation-details" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="service-class-hierarchy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Service Class Hierarchy<a href="#service-class-hierarchy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_7.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="memory-management" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Memory Management<a href="#memory-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Schedule API implements bounded memory usage through queue size limits and instance memoization.</p>
<a id="memory-safety-features" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memory Safety Features<a href="#memory-safety-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Bounded Event Queue</strong>: Maximum 250 events per symbol-strategy pair</li>
<li><strong>FIFO Eviction</strong>: Oldest events removed when queue is full</li>
<li><strong>Memoized Instances</strong>: One <code>ReportStorage</code> per unique <code>symbol:strategyName</code> pair</li>
<li><strong>Explicit Clearing</strong>: <code>clear()</code> method for manual memory release</li>
</ol>
<a id="memory-growth-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memory Growth Pattern<a href="#memory-growth-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/20_Schedule_API_8.svg" alt="Mermaid Diagram"></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#schedule-api"><span>Schedule API</span></a><ul><li><a href="#purpose-and-scope"><span>Purpose and <wbr/>Scope</span></a></li><li><a href="#scheduled-signal-lifecycle"><span>Scheduled <wbr/>Signal <wbr/>Lifecycle</span></a></li><li><ul><li><a href="#lifecycle-state-machine"><span>Lifecycle <wbr/>State <wbr/>Machine</span></a></li></ul></li><li><a href="#core-methods"><span>Core <wbr/>Methods</span></a></li><li><ul><li><a href="#method-signatures"><span>Method <wbr/>Signatures</span></a></li></ul></li><li><a href="#getdata-method"><span>get<wbr/>Data <wbr/>Method</span></a></li><li><ul><li><a href="#signature"><span>Signature</span></a></li><li><a href="#parameters"><span>Parameters</span></a></li><li><a href="#return-value"><span>Return <wbr/>Value</span></a></li><li><a href="#usage-example"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#getreport-method"><span>get<wbr/>Report <wbr/>Method</span></a></li><li><ul><li><a href="#signature-1"><span>Signature</span></a></li><li><a href="#parameters-1"><span>Parameters</span></a></li><li><a href="#return-value-1"><span>Return <wbr/>Value</span></a></li><li><a href="#report-format"><span>Report <wbr/>Format</span></a></li><li><a href="#usage-example-1"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#dump-method"><span>dump <wbr/>Method</span></a></li><li><ul><li><a href="#signature-2"><span>Signature</span></a></li><li><a href="#parameters-2"><span>Parameters</span></a></li><li><a href="#file-output"><span>File <wbr/>Output</span></a></li><li><a href="#usage-example-2"><span>Usage <wbr/>Example</span></a></li></ul></li><li><a href="#event-data-structure"><span>Event <wbr/>Data <wbr/>Structure</span></a></li><li><ul><li><a href="#scheduledevent-interface"><span>Scheduled<wbr/>Event <wbr/>Interface</span></a></li></ul></li><li><a href="#event-tracking-and-persistence"><span>Event <wbr/>Tracking and <wbr/>Persistence</span></a></li><li><ul><li><a href="#storage-architecture"><span>Storage <wbr/>Architecture</span></a></li></ul></li><li><a href="#event-queue-management"><span>Event <wbr/>Queue <wbr/>Management</span></a></li><li><ul><li><a href="#queue-behavior"><span>Queue <wbr/>Behavior</span></a></li><li><a href="#event-replacement-logic"><span>Event <wbr/>Replacement <wbr/>Logic</span></a></li></ul></li><li><a href="#cancellation-reasons"><span>Cancellation <wbr/>Reasons</span></a></li><li><ul><li><a href="#cancellation-triggers"><span>Cancellation <wbr/>Triggers</span></a></li></ul></li><li><a href="#configuration-parameters"><span>Configuration <wbr/>Parameters</span></a></li><li><ul><li><a href="#relevant-configuration"><span>Relevant <wbr/>Configuration</span></a></li><li><a href="#configuration-example"><span>Configuration <wbr/>Example</span></a></li></ul></li><li><a href="#integration-with-strategy-callbacks"><span>Integration with <wbr/>Strategy <wbr/>Callbacks</span></a></li><li><ul><li><a href="#event-flow"><span>Event <wbr/>Flow</span></a></li></ul></li><li><a href="#use-cases-and-examples"><span>Use <wbr/>Cases and <wbr/>Examples</span></a></li><li><ul><li><a href="#example-1-monitoring-cancellation-rate"><span>Example 1: <wbr/>Monitoring <wbr/>Cancellation <wbr/>Rate</span></a></li><li><a href="#example-2-analyzing-wait-times"><span>Example 2: <wbr/>Analyzing <wbr/>Wait <wbr/>Times</span></a></li><li><a href="#example-3-comparing-strategies"><span>Example 3: <wbr/>Comparing <wbr/>Strategies</span></a></li></ul></li><li><a href="#relationship-to-other-apis"><span>Relationship to <wbr/>Other APIs</span></a></li><li><a href="#implementation-details"><span>Implementation <wbr/>Details</span></a></li><li><ul><li><a href="#service-class-hierarchy"><span>Service <wbr/>Class <wbr/>Hierarchy</span></a></li></ul></li><li><a href="#memory-management"><span>Memory <wbr/>Management</span></a></li><li><ul><li><a href="#memory-safety-features"><span>Memory <wbr/>Safety <wbr/>Features</span></a></li><li><a href="#memory-growth-pattern"><span>Memory <wbr/>Growth <wbr/>Pattern</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
