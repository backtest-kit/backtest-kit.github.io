<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/37_clientoptimizer | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_37_clientoptimizer.html">design/37_clientoptimizer</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="clientoptimizer" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ClientOptimizer<a href="#clientoptimizer" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="purpose-and-scope" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Purpose and Scope<a href="#purpose-and-scope" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>ClientOptimizer</code> is the core business logic class that implements AI-powered trading strategy generation through LLM integration. This class orchestrates data collection from multiple sources, builds conversation histories for language models, generates executable strategy code, and exports the results to files.</p>
<p>This document covers the internal implementation of the <code>ClientOptimizer</code> class, including its methods, helper functions, and data flow. For configuration of optimizer schemas, see <a href="design_30_optimizer_schemas.html">Optimizer Schemas</a>. For higher-level concepts about AI optimization architecture and workflow, see <a href="design_87_ai-powered_strategy_optimization.html">AI-Powered Strategy Optimization</a>.</p>
<a id="class-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Class Structure<a href="#class-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>ClientOptimizer</code> implements the <code>IOptimizer</code> interface and provides three primary operations: data collection (<code>getData</code>), code generation (<code>getCode</code>), and file export (<code>dump</code>). The class is instantiated by <code>OptimizerConnectionService</code> with merged templates and injected dependencies.</p>
<a id="class-definition" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Class Definition<a href="#class-definition" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/37_ClientOptimizer_0.svg" alt="Mermaid Diagram"></p>
<a id="constructor-and-parameters" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Constructor and Parameters<a href="#constructor-and-parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>ClientOptimizer</code> constructor accepts two arguments: <code>params</code> of type <code>IOptimizerParams</code> and an <code>onProgress</code> callback function for emitting progress events.</p>
<a id="ioptimizerparams-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IOptimizerParams Structure<a href="#ioptimizerparams-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>optimizerName</code></td>
<td><code>OptimizerName</code></td>
<td>Unique identifier for the optimizer</td>
</tr>
<tr>
<td><code>logger</code></td>
<td><code>ILogger</code></td>
<td>Logger instance injected by <code>OptimizerConnectionService</code></td>
</tr>
<tr>
<td><code>rangeTrain</code></td>
<td><code>IOptimizerRange[]</code></td>
<td>Array of training time ranges</td>
</tr>
<tr>
<td><code>rangeTest</code></td>
<td><code>IOptimizerRange</code></td>
<td>Testing time range for validation</td>
</tr>
<tr>
<td><code>source</code></td>
<td><code>Source[]</code></td>
<td>Array of data sources (functions or configurations)</td>
</tr>
<tr>
<td><code>getPrompt</code></td>
<td><code>Function</code></td>
<td>Function to generate strategy prompt from messages</td>
</tr>
<tr>
<td><code>template</code></td>
<td><code>IOptimizerTemplate</code></td>
<td>Complete template with all code generation methods</td>
</tr>
<tr>
<td><code>callbacks</code></td>
<td><code>Partial&lt;IOptimizerCallbacks&gt;</code></td>
<td>Optional lifecycle callbacks</td>
</tr>
</tbody>
</table>
<p>The <code>params</code> object is constructed by <code>OptimizerConnectionService</code>, which merges custom templates from the optimizer schema with defaults from <code>OptimizerTemplateService</code>.</p>
<a id="data-collection-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Data Collection Flow<a href="#data-collection-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>getData</code> method orchestrates the entire data collection and strategy generation pipeline. It processes each training range, fetches data from all sources, builds LLM conversation histories, and generates strategy prompts.</p>
<a id="getdata-sequence-diagram" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getData Sequence Diagram<a href="#getdata-sequence-diagram" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/37_ClientOptimizer_1.svg" alt="Mermaid Diagram"></p>
<a id="pagination-handling" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Pagination Handling<a href="#pagination-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>RESOLVE_PAGINATION_FN</code> helper uses <code>functools-kit</code> utilities to handle paginated data sources automatically:</p>
<p><img src="../media/37_ClientOptimizer_2.svg" alt="Mermaid Diagram"></p>
<p>The pagination loop uses <code>ITERATION_LIMIT = 25</code> records per request. Data is deduplicated using the <code>id</code> field from <code>IOptimizerData</code>.</p>
<a id="progress-event-emission" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Progress Event Emission<a href="#progress-event-emission" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Progress events are emitted twice for each source: at the start of processing and after all sources complete (100%). The event structure follows <code>ProgressOptimizerContract</code>:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>optimizerName</code></td>
<td><code>string</code></td>
<td>Optimizer identifier</td>
</tr>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>totalSources</code></td>
<td><code>number</code></td>
<td>Total source count</td>
</tr>
<tr>
<td><code>processedSources</code></td>
<td><code>number</code></td>
<td>Completed sources</td>
</tr>
<tr>
<td><code>progress</code></td>
<td><code>number</code></td>
<td>Decimal 0-1 completion ratio</td>
</tr>
</tbody>
</table>
<a id="code-generation-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Code Generation Flow<a href="#code-generation-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>getCode</code> method assembles a complete executable Node.js script by calling template methods in a specific order. The generated code includes all necessary imports, helper functions, component configurations, and launcher code.</p>
<a id="code-assembly-pipeline" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Code Assembly Pipeline<a href="#code-assembly-pipeline" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/37_ClientOptimizer_3.svg" alt="Mermaid Diagram"></p>
<a id="template-method-call-order" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Template Method Call Order<a href="#template-method-call-order" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The code assembly follows this precise 11-step sequence:</p>
<ol>
<li><strong>getTopBanner</strong> - Shebang, imports, constants</li>
<li><strong>getJsonDumpTemplate</strong> - Debug output function</li>
<li><strong>getTextTemplate</strong> - LLM text generation helper</li>
<li><strong>getJsonTemplate</strong> - LLM JSON generation helper</li>
<li><strong>getExchangeTemplate</strong> - CCXT exchange configuration</li>
<li><strong>getFrameTemplate</strong> (loop) - Training frame configurations</li>
<li><strong>getFrameTemplate</strong> - Test frame configuration</li>
<li><strong>getStrategyTemplate</strong> (loop) - Strategy configurations with LLM</li>
<li><strong>getWalkerTemplate</strong> - Walker comparison setup</li>
<li><strong>getLauncherTemplate</strong> - Execution and event listeners</li>
<li><strong>Join and return</strong> - Concatenate all sections</li>
</ol>
<p>Each section is separated by an empty line for readability.</p>
<a id="naming-convention" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Naming Convention<a href="#naming-convention" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All generated component names use a random prefix to avoid collisions:</p>
<p><img src="../media/37_ClientOptimizer_4.svg" alt="Mermaid Diagram"></p>
<p>The prefix is generated using: <code>(Math.random() + 1).toString(36).substring(7)</code>, producing strings like <code>&quot;x8k2p9f&quot;</code>.</p>
<a id="file-export" class="tsd-anchor"></a><h2 class="tsd-anchor-link">File Export<a href="#file-export" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>dump</code> method writes the generated code to a <code>.mjs</code> file in the specified directory, creating the directory if it doesn't exist.</p>
<a id="file-path-construction" class="tsd-anchor"></a><h3 class="tsd-anchor-link">File Path Construction<a href="#file-path-construction" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Component</th>
<th>Value</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td>Directory</td>
<td><code>join(process.cwd(), path)</code></td>
<td><code>/home/user/project/strategies</code></td>
</tr>
<tr>
<td>Filename</td>
<td><code>{optimizerName}_{symbol}.mjs</code></td>
<td><code>optimizer1_BTCUSDT.mjs</code></td>
</tr>
<tr>
<td>Full path</td>
<td><code>join(dir, filename)</code></td>
<td><code>/home/user/project/strategies/optimizer1_BTCUSDT.mjs</code></td>
</tr>
</tbody>
</table>
<a id="dump-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Dump Flow<a href="#dump-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/37_ClientOptimizer_5.svg" alt="Mermaid Diagram"></p>
<a id="helper-functions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Helper Functions<a href="#helper-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>ClientOptimizer</code> uses four internal helper functions that are not class methods but operate on a <code>ClientOptimizer</code> instance passed as the <code>self</code> parameter.</p>
<a id="helper-function-reference" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Helper Function Reference<a href="#helper-function-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
<th>Key Operations</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>DEFAULT_USER_FN</code></td>
<td>Format user messages</td>
<td>Delegates to <code>template.getUserMessage</code></td>
</tr>
<tr>
<td><code>DEFAULT_ASSISTANT_FN</code></td>
<td>Format assistant messages</td>
<td>Delegates to <code>template.getAssistantMessage</code></td>
</tr>
<tr>
<td><code>RESOLVE_PAGINATION_FN</code></td>
<td>Handle paginated data</td>
<td>Uses <code>iterateDocuments</code>, <code>distinctDocuments</code>, <code>resolveDocuments</code></td>
</tr>
<tr>
<td><code>GET_STRATEGY_DATA_FN</code></td>
<td>Collect data and generate strategies</td>
<td>Orchestrates entire data pipeline</td>
</tr>
<tr>
<td><code>GET_STRATEGY_CODE_FN</code></td>
<td>Assemble executable code</td>
<td>Calls all 11 template methods in sequence</td>
</tr>
<tr>
<td><code>GET_STRATEGY_DUMP_FN</code></td>
<td>Write code to file</td>
<td>Uses <code>fs/promises</code> for file operations</td>
</tr>
</tbody>
</table>
<a id="message-formatter-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Message Formatter Pattern<a href="#message-formatter-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The user and assistant formatters allow customization per source while providing sensible defaults:</p>
<p><img src="../media/37_ClientOptimizer_6.svg" alt="Mermaid Diagram"></p>
<a id="integration-with-services" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Services<a href="#integration-with-services" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><code>ClientOptimizer</code> is never instantiated directly by users. Instead, <code>OptimizerConnectionService</code> creates and caches instances, handling dependency injection and template merging.</p>
<a id="service-integration-architecture" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Service Integration Architecture<a href="#service-integration-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/37_ClientOptimizer_7.svg" alt="Mermaid Diagram"></p>
<a id="template-merging-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Template Merging Logic<a href="#template-merging-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><code>OptimizerConnectionService.getOptimizer</code> merges custom templates from the schema with defaults:</p>
<p><img src="../media/37_ClientOptimizer_8.svg" alt="Mermaid Diagram"></p>
<p>All 11 template methods are resolved using this pattern, ensuring <code>ClientOptimizer</code> always receives a complete <code>IOptimizerTemplate</code> implementation.</p>
<a id="memoization" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memoization<a href="#memoization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>getOptimizer</code> method is memoized by <code>optimizerName</code>, creating only one <code>ClientOptimizer</code> instance per registered optimizer. This ensures template merging and dependency injection occur only once per optimizer configuration.</p>
<a id="data-structures" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Data Structures<a href="#data-structures" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="ioptimizerstrategy" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IOptimizerStrategy<a href="#ioptimizerstrategy" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>getData</code> method returns an array of <code>IOptimizerStrategy</code> objects, one per training range:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>Source name from configuration</td>
</tr>
<tr>
<td><code>messages</code></td>
<td><code>MessageModel[]</code></td>
<td>Complete conversation history</td>
</tr>
<tr>
<td><code>strategy</code></td>
<td><code>string</code></td>
<td>Generated strategy prompt from <code>getPrompt()</code></td>
</tr>
</tbody>
</table>
<a id="source-type-union" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Source Type Union<a href="#source-type-union" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>source</code> array accepts two types:</p>
<ol>
<li><strong>IOptimizerSourceFn</strong> - Simple fetch function: <code>(args: IOptimizerFetchArgs) =&gt; Data[]</code></li>
<li><strong>IOptimizerSource</strong> - Full configuration with custom formatters:
<ul>
<li><code>name: string</code> - Source identifier</li>
<li><code>fetch: IOptimizerSourceFn</code> - Data fetch function</li>
<li><code>user?: Function</code> - Custom user message formatter</li>
<li><code>assistant?: Function</code> - Custom assistant message formatter</li>
</ul>
</li>
</ol>
<p>When using a plain function, the source name defaults to <code>&quot;unknown&quot;</code>.</p>
<a id="messagemodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">MessageModel<a href="#messagemodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Conversation history uses <code>MessageModel</code> from the shared model layer:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Values</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>role</code></td>
<td><code>string</code></td>
<td><code>&quot;user&quot;</code>, <code>&quot;assistant&quot;</code>, <code>&quot;system&quot;</code></td>
</tr>
<tr>
<td><code>content</code></td>
<td><code>string</code></td>
<td>Message text content</td>
</tr>
</tbody>
</table>
<a id="error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Handling<a href="#error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>dump</code> method includes try-catch error handling:</p>
<p><img src="../media/37_ClientOptimizer_9.svg" alt="Mermaid Diagram"></p>
<p>Errors during file operations are logged and re-thrown to the caller.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#clientoptimizer"><span>Client<wbr/>Optimizer</span></a><ul><li><a href="#purpose-and-scope"><span>Purpose and <wbr/>Scope</span></a></li><li><a href="#class-structure"><span>Class <wbr/>Structure</span></a></li><li><ul><li><a href="#class-definition"><span>Class <wbr/>Definition</span></a></li></ul></li><li><a href="#constructor-and-parameters"><span>Constructor and <wbr/>Parameters</span></a></li><li><ul><li><a href="#ioptimizerparams-structure"><span>IOptimizer<wbr/>Params <wbr/>Structure</span></a></li></ul></li><li><a href="#data-collection-flow"><span>Data <wbr/>Collection <wbr/>Flow</span></a></li><li><ul><li><a href="#getdata-sequence-diagram"><span>get<wbr/>Data <wbr/>Sequence <wbr/>Diagram</span></a></li><li><a href="#pagination-handling"><span>Pagination <wbr/>Handling</span></a></li><li><a href="#progress-event-emission"><span>Progress <wbr/>Event <wbr/>Emission</span></a></li></ul></li><li><a href="#code-generation-flow"><span>Code <wbr/>Generation <wbr/>Flow</span></a></li><li><ul><li><a href="#code-assembly-pipeline"><span>Code <wbr/>Assembly <wbr/>Pipeline</span></a></li><li><a href="#template-method-call-order"><span>Template <wbr/>Method <wbr/>Call <wbr/>Order</span></a></li><li><a href="#naming-convention"><span>Naming <wbr/>Convention</span></a></li></ul></li><li><a href="#file-export"><span>File <wbr/>Export</span></a></li><li><ul><li><a href="#file-path-construction"><span>File <wbr/>Path <wbr/>Construction</span></a></li><li><a href="#dump-flow"><span>Dump <wbr/>Flow</span></a></li></ul></li><li><a href="#helper-functions"><span>Helper <wbr/>Functions</span></a></li><li><ul><li><a href="#helper-function-reference"><span>Helper <wbr/>Function <wbr/>Reference</span></a></li><li><a href="#message-formatter-pattern"><span>Message <wbr/>Formatter <wbr/>Pattern</span></a></li></ul></li><li><a href="#integration-with-services"><span>Integration with <wbr/>Services</span></a></li><li><ul><li><a href="#service-integration-architecture"><span>Service <wbr/>Integration <wbr/>Architecture</span></a></li><li><a href="#template-merging-logic"><span>Template <wbr/>Merging <wbr/>Logic</span></a></li><li><a href="#memoization"><span>Memoization</span></a></li></ul></li><li><a href="#data-structures"><span>Data <wbr/>Structures</span></a></li><li><ul><li><a href="#ioptimizerstrategy"><span>IOptimizer<wbr/>Strategy</span></a></li><li><a href="#source-type-union"><span>Source <wbr/>Type <wbr/>Union</span></a></li><li><a href="#messagemodel"><span>Message<wbr/>Model</span></a></li></ul></li><li><a href="#error-handling"><span>Error <wbr/>Handling</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
