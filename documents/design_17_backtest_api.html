<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/17_backtest_api | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_17_backtest_api.html">design/17_backtest_api</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="backtest-api" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Backtest API<a href="#backtest-api" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This document describes the public API for historical backtesting operations provided by the <code>Backtest</code> singleton. The Backtest API enables testing trading strategies against historical market data with statistical analysis and markdown report generation.</p>
<p>For live trading operations, see <a href="design_18_live_trading_api.html">Live Trading API</a>. For strategy comparison across multiple configurations, see <a href="design_19_walker_api.html">Walker API</a>. For component registration, see <a href="design_16_component_registration_functions.html">Component Registration Functions</a>.</p>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Backtest API is implemented as a singleton instance of <code>BacktestUtils</code> exported from <a href="">src/classes/Backtest.ts:231</a>. It provides a simplified interface to the underlying backtest execution engine, with five primary methods:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Purpose</th>
<th>Execution Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>run()</code></td>
<td>Execute backtest and yield results</td>
<td>Foreground AsyncGenerator</td>
</tr>
<tr>
<td><code>background()</code></td>
<td>Execute backtest silently</td>
<td>Background with cancellation</td>
</tr>
<tr>
<td><code>getData()</code></td>
<td>Retrieve statistics for completed backtest</td>
<td>Post-execution analysis</td>
</tr>
<tr>
<td><code>getReport()</code></td>
<td>Generate markdown report</td>
<td>Post-execution analysis</td>
</tr>
<tr>
<td><code>dump()</code></td>
<td>Save report to filesystem</td>
<td>Post-execution persistence</td>
</tr>
</tbody>
</table>
<p>The Backtest API operates on historical data defined by Frame schemas (see <a href="design_26_frame_schemas.html">Frame Schemas</a>) and evaluates Strategy schemas (see <a href="design_24_strategy_schemas.html">Strategy Schemas</a>) sequentially through each timeframe.</p>
<a id="architecture-and-data-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Architecture and Data Flow<a href="#architecture-and-data-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Backtest API serves as the entry point to a multi-layer execution pipeline:</p>
<p><img src="../media/17_Backtest_API_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Key Flow Characteristics:</strong></p>
<ol>
<li><strong>Validation Layer</strong>: <a href="">src/classes/Backtest.ts:46-63</a> validates components before execution</li>
<li><strong>State Clearing</strong>: Markdown services and strategy instances are cleared to ensure clean runs</li>
<li><strong>Context Propagation</strong>: <code>symbol</code>, <code>strategyName</code>, <code>exchangeName</code>, <code>frameName</code> propagate through all layers</li>
<li><strong>AsyncGenerator Streaming</strong>: Results yield progressively as signals close</li>
<li><strong>Event Accumulation</strong>: <code>BacktestMarkdownService</code> accumulates signals via <code>signalBacktestEmitter</code></li>
</ol>
<a id="method-reference" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Method Reference<a href="#method-reference" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="backtestrun" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.run()<a href="#backtestrun" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Executes historical backtest and yields closed signals as an AsyncGenerator.</p>
<p><strong>Signature:</strong></p>
<pre><code class="typescript"><span class="hl-0">run</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">context</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">): </span><span class="hl-4">AsyncGenerator</span><span class="hl-1">&lt;</span><span class="hl-4">IStrategyBacktestResult</span><span class="hl-1">, </span><span class="hl-6">void</span><span class="hl-1">, </span><span class="hl-4">unknown</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol (e.g., <code>&quot;BTCUSDT&quot;</code>)</td>
</tr>
<tr>
<td><code>context.strategyName</code></td>
<td><code>string</code></td>
<td>Registered strategy name from <code>addStrategy()</code></td>
</tr>
<tr>
<td><code>context.exchangeName</code></td>
<td><code>string</code></td>
<td>Registered exchange name from <code>addExchange()</code></td>
</tr>
<tr>
<td><code>context.frameName</code></td>
<td><code>string</code></td>
<td>Registered frame name from <code>addFrame()</code></td>
</tr>
</tbody>
</table>
<p><strong>Return Type:</strong> <code>AsyncGenerator&lt;IStrategyBacktestResult&gt;</code></p>
<p>The generator yields <code>IStrategyBacktestResult</code> objects for each closed signal. The result is a discriminated union with <code>action: &quot;closed&quot;</code> and includes:</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">IStrategyBacktestResult</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">action</span><span class="hl-1">: </span><span class="hl-2">&quot;closed&quot;</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">signal</span><span class="hl-1">: </span><span class="hl-10">ISignalRow</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">pnl</span><span class="hl-1">: </span><span class="hl-10">IStrategyPnL</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">backtest</span><span class="hl-1">: </span><span class="hl-10">true</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution Flow:</strong></p>
<p><img src="../media/17_Backtest_API_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Example Usage:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Signal ID: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`PNL: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">pnl</span><span class="hl-9">.</span><span class="hl-4">pnlPercentage</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Close Reason: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">closeReason</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Details:</strong></p>
<ul>
<li><a href="">src/classes/Backtest.ts:38-66</a> implements the method</li>
<li>Clears <code>backtestMarkdownService</code> and <code>scheduleMarkdownService</code> for the strategy <a href="">src/classes/Backtest.ts:52-54</a></li>
<li>Clears strategy instance cache via <code>strategyGlobalService.clear()</code> <a href="">src/classes/Backtest.ts:57-58</a></li>
<li>Clears risk instance cache if strategy has <code>riskName</code> <a href="">src/classes/Backtest.ts:60-63</a></li>
<li>Delegates to <code>backtestCommandService.run()</code> <a href="">src/classes/Backtest.ts:65</a></li>
</ul>
<a id="backtestbackground" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.background()<a href="#backtestbackground" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Executes backtest silently in the background, consuming all results internally. Returns a cancellation function.</p>
<p><strong>Signature:</strong></p>
<pre><code class="typescript"><span class="hl-0">background</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">context</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">    </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">): () </span><span class="hl-6">=&gt;</span><span class="hl-1"> </span><span class="hl-6">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters:</strong> Same as <code>run()</code> method.</p>
<p><strong>Return Type:</strong> <code>() =&gt; void</code> - Cancellation closure</p>
<p>The returned function can be called to stop the backtest early. When cancelled, the backtest will:</p>
<ol>
<li>Set <code>isStopped</code> flag to break the iteration loop</li>
<li>Wait for any pending signal to complete</li>
<li>Emit <code>doneBacktestSubject</code> event</li>
<li>Call <code>strategyGlobalService.stop()</code> to prevent new signals</li>
</ol>
<p><strong>Cancellation Flow:</strong></p>
<p><img src="../media/17_Backtest_API_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Example Usage:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1">, </span><span class="hl-4">listenDoneBacktest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Start backtest in background</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">cancel</span><span class="hl-1"> = </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Listen for completion</span><br/><span class="hl-0">listenDoneBacktest</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Backtest completed for </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Cancel after 30 seconds</span><br/><span class="hl-0">setTimeout</span><span class="hl-1">(() </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Cancelling backtest...&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">cancel</span><span class="hl-1">();</span><br/><span class="hl-1">}, </span><span class="hl-8">30000</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Details:</strong></p>
<ul>
<li><a href="">src/classes/Backtest.ts:89-142</a> implements the method</li>
<li>Creates async task that consumes <code>run()</code> generator <a href="">src/classes/Backtest.ts:103-118</a></li>
<li>Catches errors and emits to <code>exitEmitter</code> <a href="">src/classes/Backtest.ts:119-121</a></li>
<li>Cancellation function stops strategy and emits done event <a href="">src/classes/Backtest.ts:122-141</a></li>
<li>Uses <code>isStopped</code> flag to break iteration <a href="">src/classes/Backtest.ts:101,105-107</a></li>
<li>Checks for pending signals before emitting done <a href="">src/classes/Backtest.ts:124-138</a></li>
</ul>
<a id="backtestgetdata" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.getData()<a href="#backtestgetdata" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Retrieves statistical analysis data from completed backtest signals for a symbol-strategy pair.</p>
<p><strong>Signature:</strong></p>
<pre><code class="typescript"><span class="hl-0">getData</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><br/><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">BacktestStatistics</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>symbol</code></td>
<td><code>string</code></td>
<td>Trading pair symbol</td>
</tr>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy name (branded string type)</td>
</tr>
</tbody>
</table>
<p><strong>Return Type:</strong> <code>Promise&lt;BacktestStatistics&gt;</code></p>
<p>The <code>BacktestStatistics</code> interface contains comprehensive performance metrics:</p>
<pre><code class="typescript"><span class="hl-6">interface</span><span class="hl-1"> </span><span class="hl-10">BacktestStatistics</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">// Core Metrics</span><br/><span class="hl-1">  </span><span class="hl-4">sharpeRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">avgPnl</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">totalPnl</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winRate</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Risk-Adjusted Metrics</span><br/><span class="hl-1">  </span><span class="hl-4">certaintyRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">annualizedSharpeRatio</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">expectedYearlyReturns</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1"> | </span><span class="hl-10">null</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Trade Counts</span><br/><span class="hl-1">  </span><span class="hl-4">totalTrades</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">winningTrades</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">losingTrades</span><span class="hl-1">: </span><span class="hl-10">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Signal List</span><br/><span class="hl-1">  </span><span class="hl-4">events</span><span class="hl-1">: </span><span class="hl-10">IStrategyBacktestResult</span><span class="hl-1">[];</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">// Safety Flags</span><br/><span class="hl-1">  </span><span class="hl-4">isUnsafe</span><span class="hl-1">: </span><span class="hl-10">boolean</span><span class="hl-1">; </span><span class="hl-5">// true if any metric is NaN/Infinity</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Calculation Flow:</strong></p>
<p><img src="../media/17_Backtest_API_3.svg" alt="Mermaid Diagram"></p>
<p><strong>Example Usage:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Run backtest first</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Consume results...</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Get statistics</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Sharpe Ratio: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Win Rate: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total PNL: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalPnl</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total Trades: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalTrades</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Certainty Ratio: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">certaintyRatio</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Details:</strong></p>
<ul>
<li><a href="">src/classes/Backtest.ts:157-163</a> implements the method</li>
<li>Delegates to <code>backtestMarkdownService.getData()</code> <a href="">src/classes/Backtest.ts:162</a></li>
<li>Statistics calculated from accumulated <code>signalBacktestEmitter</code> events</li>
<li>Safe math checks prevent NaN/Infinity propagation</li>
<li>Returns <code>null</code> for metrics when insufficient data</li>
</ul>
<a id="backtestgetreport" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.getReport()<a href="#backtestgetreport" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Generates human-readable markdown report from completed backtest signals.</p>
<p><strong>Signature:</strong></p>
<pre><code class="typescript"><span class="hl-0">getReport</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><br/><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">string</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters:</strong> Same as <code>getData()</code> method.</p>
<p><strong>Return Type:</strong> <code>Promise&lt;string&gt;</code> - Markdown formatted report</p>
<p><strong>Report Structure:</strong></p>
<p>The generated markdown report includes the following sections:</p>
<ol>
<li><strong>Header</strong>: Strategy name, symbol, and timestamp</li>
<li><strong>Summary Statistics</strong>: Sharpe ratio, win rate, PNL metrics</li>
<li><strong>Signal Table</strong>: All closed signals with columns:
<ul>
<li>Signal ID</li>
<li>Open timestamp</li>
<li>Close timestamp</li>
<li>Side (LONG/SHORT)</li>
<li>Entry price</li>
<li>Exit price</li>
<li>PNL percentage</li>
<li>Close reason (TP/SL/timeout)</li>
</ul>
</li>
<li><strong>Risk Metrics</strong>: If risk management was used</li>
<li><strong>Partial Profit/Loss Events</strong>: If milestone tracking was enabled</li>
</ol>
<p><strong>Example Output Structure:</strong></p>
<pre><code class="markdown"># Backtest Report: rsi-strategy (BTCUSDT)

Generated: 2024-01-15 10:30:00

## Summary Statistics

| Metric | Value |
|--------|-------|
| Total Trades | 42 |
| Win Rate | 65.5% |
| Sharpe Ratio | 1.85 |
| Total PNL | 12.3% |
| Average PNL | 0.29% |
| Certainty Ratio | 11.98 |

## Closed Signals

| ID | Open Time | Close Time | Side | Entry | Exit | PNL | Reason |
|----|-----------|------------|------|-------|------|-----|--------|
| sig_001 | 2024-01-01 00:00 | 2024-01-01 06:00 | LONG | 42000 | 42800 | +1.9% | TP |
| sig_002 | 2024-01-02 00:00 | 2024-01-02 04:00 | SHORT | 42500 | 42200 | +0.7% | TP |
...
</code><button type="button">Copy</button></pre>

<p><strong>Example Usage:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">fs</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;fs/promises&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Consume results...</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Generate and save report</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">markdown</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Or save to file</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">fs</span><span class="hl-1">.</span><span class="hl-0">writeFile</span><span class="hl-1">(</span><span class="hl-2">&quot;./backtest-report.md&quot;</span><span class="hl-1">, </span><span class="hl-4">markdown</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Details:</strong></p>
<ul>
<li><a href="">src/classes/Backtest.ts:178-184</a> implements the method</li>
<li>Delegates to <code>backtestMarkdownService.getReport()</code> <a href="">src/classes/Backtest.ts:183</a></li>
<li>Report generation is synchronous once data is accumulated</li>
<li>Markdown formatting uses consistent table syntax</li>
<li>Handles null values gracefully with &quot;N/A&quot; placeholders</li>
</ul>
<a id="backtestdump" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest.dump()<a href="#backtestdump" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Saves backtest report to filesystem with automatic path resolution.</p>
<p><strong>Signature:</strong></p>
<pre><code class="typescript"><span class="hl-0">dump</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName</span><span class="hl-1">: </span><span class="hl-4">StrategyName</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">path</span><span class="hl-1">?: </span><span class="hl-4">string</span><br/><span class="hl-1">): </span><span class="hl-10">Promise</span><span class="hl-1">&lt;</span><span class="hl-6">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters:</strong></p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>strategyName</code></td>
<td><code>StrategyName</code></td>
<td>Strategy name for filename generation</td>
</tr>
<tr>
<td><code>path</code></td>
<td><code>string</code> (optional)</td>
<td>Directory path (default: <code>&quot;./dump/backtest&quot;</code>)</td>
</tr>
</tbody>
</table>
<p><strong>File Naming Convention:</strong></p>
<pre><code><span class="hl-1">{</span><span class="hl-4">path</span><span class="hl-1">}/{</span><span class="hl-4">strategyName</span><span class="hl-1">}.</span><span class="hl-4">md</span>
</code><button>Copy</button></pre>

<p><strong>Default Path Resolution:</strong></p>
<p><img src="../media/17_Backtest_API_4.svg" alt="Mermaid Diagram"></p>
<p><strong>Example Usage:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Consume results...</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// Save to default path: ./dump/backtest/rsi-strategy.md</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Save to custom path: ./reports/2024/rsi-strategy.md</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;./reports/2024&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<p><strong>Implementation Details:</strong></p>
<ul>
<li><a href="">src/classes/Backtest.ts:201-210</a> implements the method</li>
<li>Delegates to <code>backtestMarkdownService.dump()</code> <a href="">src/classes/Backtest.ts:209</a></li>
<li>Creates directory structure if it doesn't exist</li>
<li>Overwrites existing file without warning</li>
<li>Uses UTF-8 encoding for markdown files</li>
</ul>
<a id="integration-with-event-system" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Event System<a href="#integration-with-event-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Backtest API emits events throughout execution for monitoring and callbacks:</p>
<p><img src="../media/17_Backtest_API_5.svg" alt="Mermaid Diagram"></p>
<p><strong>Available Event Listeners:</strong></p>
<table>
<thead>
<tr>
<th>Listener Function</th>
<th>Event Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>listenSignalBacktest()</code></td>
<td>Signal closed</td>
<td>All closed backtest signals</td>
</tr>
<tr>
<td><code>listenBacktestProgress()</code></td>
<td>Progress update</td>
<td>Timeframe completion percentage</td>
</tr>
<tr>
<td><code>listenDoneBacktest()</code></td>
<td>Completion</td>
<td>Backtest execution finished</td>
</tr>
<tr>
<td><code>listenPerformance()</code></td>
<td>Performance metrics</td>
<td>Timing and bottleneck data</td>
</tr>
</tbody>
</table>
<p><strong>Example with Event Listeners:</strong></p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><br/><span class="hl-1">  </span><span class="hl-4">Backtest</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-4">listenSignalBacktest</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-4">listenBacktestProgress</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">listenDoneBacktest</span><span class="hl-1"> </span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Monitor progress</span><br/><span class="hl-0">listenBacktestProgress</span><span class="hl-1">((</span><span class="hl-4">progress</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">current</span><span class="hl-6">}</span><span class="hl-2">/</span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">total</span><span class="hl-6">}</span><span class="hl-2"> timeframes`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Percentage: </span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">percentage</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Monitor closed signals</span><br/><span class="hl-0">listenSignalBacktest</span><span class="hl-1">((</span><span class="hl-4">result</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Signal closed: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">id</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`PNL: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">pnl</span><span class="hl-9">.</span><span class="hl-4">pnlPercentage</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Monitor completion</span><br/><span class="hl-0">listenDoneBacktest</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Backtest completed: </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Run backtest</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">background</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="execution-constraints" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Execution Constraints<a href="#execution-constraints" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Backtest API operates under several constraints inherited from the underlying execution engine:</p>
<a id="required-pre-registration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Required Pre-Registration<a href="#required-pre-registration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All components must be registered before calling <code>run()</code> or <code>background()</code>:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">addStrategy</span><span class="hl-1">, </span><span class="hl-4">addExchange</span><span class="hl-1">, </span><span class="hl-4">addFrame</span><span class="hl-1">, </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// 1. Register strategy</span><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">context</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Strategy logic...</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 2. Register exchange</span><br/><span class="hl-0">addExchange</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getCandles</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">params</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Fetch candles...</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 3. Register frame</span><br/><span class="hl-0">addFrame</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">startDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">endDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-12-31&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 4. Now run backtest</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-backtest&quot;</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-5">// Process results...</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="symbol-strategy-isolation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Symbol-Strategy Isolation<a href="#symbol-strategy-isolation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each backtest execution is isolated by symbol-strategy pair. The memoization key used internally is <code>${symbol}:${strategyName}</code> <a href="">src/lib/services/connection/StrategyConnectionService.ts:79</a>. This means:</p>
<ul>
<li>Multiple symbols can run concurrently with the same strategy</li>
<li>Same symbol cannot run multiple strategies concurrently (requires separate processes)</li>
<li>State is isolated per symbol-strategy pair</li>
</ul>
<a id="frame-interval-alignment" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Frame Interval Alignment<a href="#frame-interval-alignment" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The frame <code>interval</code> must be compatible with the strategy <code>interval</code>:</p>
<table>
<thead>
<tr>
<th>Strategy Interval</th>
<th>Compatible Frame Intervals</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>1m</code></td>
<td><code>1m</code></td>
</tr>
<tr>
<td><code>5m</code></td>
<td><code>1m</code>, <code>5m</code></td>
</tr>
<tr>
<td><code>15m</code></td>
<td><code>1m</code>, <code>5m</code>, <code>15m</code></td>
</tr>
<tr>
<td><code>1h</code></td>
<td><code>1m</code>, <code>5m</code>, <code>15m</code>, <code>1h</code></td>
</tr>
<tr>
<td><code>1d</code></td>
<td>Any interval</td>
</tr>
</tbody>
</table>
<p>Misalignment will cause validation errors at runtime <a href="">src/classes/Backtest.ts:60-63</a>.</p>
<a id="performance-considerations" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Performance Considerations<a href="#performance-considerations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Backtest API includes several optimizations for efficient historical simulation:</p>
<a id="skip-ahead-optimization" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Skip-Ahead Optimization<a href="#skip-ahead-optimization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When a signal opens, the backtest engine skips all intermediate timeframes until the signal closes. This is implemented in <code>BacktestLogicPrivateService</code> and dramatically reduces computation time:</p>
<pre><code><span class="hl-4">Without</span><span class="hl-1"> </span><span class="hl-4">skip</span><span class="hl-1">-</span><span class="hl-12">ahead</span><span class="hl-1">: </span><span class="hl-4">Process</span><span class="hl-1"> </span><span class="hl-4">every</span><span class="hl-1"> </span><span class="hl-4">timeframe</span><br/><span class="hl-12">Timeframes</span><span class="hl-1">: </span><span class="hl-7">T1</span><span class="hl-1"> </span><span class="hl-7">T2</span><span class="hl-1"> </span><span class="hl-7">T3</span><span class="hl-1"> </span><span class="hl-7">T4</span><span class="hl-1"> </span><span class="hl-7">T5</span><span class="hl-1"> </span><span class="hl-7">T6</span><span class="hl-1"> </span><span class="hl-7">T7</span><span class="hl-1"> </span><span class="hl-7">T8</span><span class="hl-1"> </span><span class="hl-7">T9</span><span class="hl-1"> </span><span class="hl-7">T10</span><br/><span class="hl-12">Processing</span><span class="hl-1">:                    </span><br/><br/><span class="hl-4">With</span><span class="hl-1"> </span><span class="hl-4">skip</span><span class="hl-1">-</span><span class="hl-12">ahead</span><span class="hl-1">: </span><span class="hl-4">Skip</span><span class="hl-1"> </span><span class="hl-4">during</span><span class="hl-1"> </span><span class="hl-4">active</span><span class="hl-1"> </span><span class="hl-4">signal</span><br/><span class="hl-12">Timeframes</span><span class="hl-1">: </span><span class="hl-7">T1</span><span class="hl-1"> </span><span class="hl-7">T2</span><span class="hl-1"> </span><span class="hl-7">T3</span><span class="hl-1"> </span><span class="hl-7">T4</span><span class="hl-1"> </span><span class="hl-7">T5</span><span class="hl-1"> </span><span class="hl-7">T6</span><span class="hl-1"> </span><span class="hl-7">T7</span><span class="hl-1"> </span><span class="hl-7">T8</span><span class="hl-1"> </span><span class="hl-7">T9</span><span class="hl-1"> </span><span class="hl-7">T10</span><br/><span class="hl-12">Processing</span><span class="hl-1">:                    </span><br/><span class="hl-1">                    ^-</span><span class="hl-4">Signal</span><span class="hl-1"> </span><span class="hl-4">Opens</span><span class="hl-1">    ^-</span><span class="hl-4">Signal</span><span class="hl-1"> </span><span class="hl-4">Closes</span>
</code><button>Copy</button></pre>

<p>This optimization is transparent to the user and does not affect result accuracy.</p>
<a id="clientstrategy-memoization" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ClientStrategy Memoization<a href="#clientstrategy-memoization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Strategy instances are memoized by <code>${symbol}:${strategyName}</code> to avoid redundant instantiation <a href="">src/lib/services/connection/StrategyConnectionService.ts:78-98</a>. The cache persists across multiple <code>run()</code> calls unless explicitly cleared.</p>
<p>To clear the cache:</p>
<pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">backtest</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit/lib&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// Clear specific strategy</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategyGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">symbol:</span><span class="hl-1"> </span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Or clear all strategies</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">backtest</span><span class="hl-1">.</span><span class="hl-4">strategyGlobalService</span><span class="hl-1">.</span><span class="hl-0">clear</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<a id="event-accumulation-limit" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Accumulation Limit<a href="#event-accumulation-limit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>BacktestMarkdownService</code> has a configurable maximum event count (default: no limit). For very long backtests with thousands of signals, memory usage can grow. Consider using <code>background()</code> without collecting statistics for memory-constrained environments.</p>
<a id="complete-usage-example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Complete Usage Example<a href="#complete-usage-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">addStrategy</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addExchange</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addFrame</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">Backtest</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">listenSignalBacktest</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">listenBacktestProgress</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">listenDoneBacktest</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">// 1. Register components</span><br/><span class="hl-0">addStrategy</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getSignal</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">context</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">rsi</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-0">getRSI</span><span class="hl-1">(</span><span class="hl-8">14</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">rsi</span><span class="hl-1"> &lt; </span><span class="hl-8">30</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-3">return</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">side:</span><span class="hl-1"> </span><span class="hl-2">&quot;LONG&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">priceOpen:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">currentPrice</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">takeProfit:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">currentPrice</span><span class="hl-1"> * </span><span class="hl-8">1.02</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">stopLoss:</span><span class="hl-1"> </span><span class="hl-4">context</span><span class="hl-1">.</span><span class="hl-4">currentPrice</span><span class="hl-1"> * </span><span class="hl-8">0.98</span><span class="hl-1">,</span><br/><span class="hl-1">      };</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-6">null</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">addExchange</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">getCandles</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">params</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-5">// Fetch from database or API</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">candles</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">addFrame</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-q1-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">startDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">endDate:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-03-31&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 2. Setup event listeners</span><br/><span class="hl-0">listenBacktestProgress</span><span class="hl-1">((</span><span class="hl-4">progress</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-6">${</span><span class="hl-4">progress</span><span class="hl-9">.</span><span class="hl-4">percentage</span><span class="hl-6">}</span><span class="hl-2">% complete`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">listenSignalBacktest</span><span class="hl-1">((</span><span class="hl-4">result</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Signal: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">side</span><span class="hl-6">}</span><span class="hl-2"> | PNL: </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">pnl</span><span class="hl-9">.</span><span class="hl-4">pnlPercentage</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">listenDoneBacktest</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Backtest completed: </span><span class="hl-6">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// 3. Run backtest and consume results</span><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">result</span><span class="hl-1"> </span><span class="hl-6">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;2024-q1-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Closed at </span><span class="hl-6">${</span><span class="hl-4">result</span><span class="hl-9">.</span><span class="hl-4">signal</span><span class="hl-9">.</span><span class="hl-4">closeTimestamp</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-5">// 4. Get statistics</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">stats</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getData</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Sharpe Ratio: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">sharpeRatio</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Win Rate: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">winRate</span><span class="hl-6">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Total Trades: </span><span class="hl-6">${</span><span class="hl-4">stats</span><span class="hl-9">.</span><span class="hl-4">totalTrades</span><span class="hl-6">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 5. Generate report</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-7">markdown</span><span class="hl-1"> = </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">getReport</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">);</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">markdown</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// 6. Save to disk</span><br/><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">dump</span><span class="hl-1">(</span><span class="hl-2">&quot;rsi-strategy&quot;</span><span class="hl-1">, </span><span class="hl-2">&quot;./reports&quot;</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#backtest-api"><span>Backtest API</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#architecture-and-data-flow"><span>Architecture and <wbr/>Data <wbr/>Flow</span></a></li><li><a href="#method-reference"><span>Method <wbr/>Reference</span></a></li><li><ul><li><a href="#backtestrun"><span>Backtest.run()</span></a></li><li><a href="#backtestbackground"><span>Backtest.background()</span></a></li><li><a href="#backtestgetdata"><span>Backtest.get<wbr/>Data()</span></a></li><li><a href="#backtestgetreport"><span>Backtest.get<wbr/>Report()</span></a></li><li><a href="#backtestdump"><span>Backtest.dump()</span></a></li></ul></li><li><a href="#integration-with-event-system"><span>Integration with <wbr/>Event <wbr/>System</span></a></li><li><a href="#execution-constraints"><span>Execution <wbr/>Constraints</span></a></li><li><ul><li><a href="#required-pre-registration"><span>Required <wbr/>Pre-<wbr/>Registration</span></a></li><li><a href="#symbol-strategy-isolation"><span>Symbol-<wbr/>Strategy <wbr/>Isolation</span></a></li><li><a href="#frame-interval-alignment"><span>Frame <wbr/>Interval <wbr/>Alignment</span></a></li></ul></li><li><a href="#performance-considerations"><span>Performance <wbr/>Considerations</span></a></li><li><ul><li><a href="#skip-ahead-optimization"><span>Skip-<wbr/>Ahead <wbr/>Optimization</span></a></li><li><a href="#clientstrategy-memoization"><span>Client<wbr/>Strategy <wbr/>Memoization</span></a></li><li><a href="#event-accumulation-limit"><span>Event <wbr/>Accumulation <wbr/>Limit</span></a></li></ul></li><li><a href="#complete-usage-example"><span>Complete <wbr/>Usage <wbr/>Example</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
