<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/39_running-demos | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_39_running-demos.html">design/39_running-demos</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="running-demos" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Running Demos<a href="#running-demos" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page explains how to set up, configure, and execute the demo applications included in the backtest-kit repository. The demos showcase different execution modes and integration patterns. For detailed information about execution mode internals, see <a href="design_16_execution-modes-detailed.html">Execution Modes (Detailed)</a>. For LLM-based strategy generation theory, see <a href="design_20_optimizer-mode.html">Optimizer Mode</a>.</p>
<hr>
<a id="demo-projects-overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Demo Projects Overview<a href="#demo-projects-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The repository includes three demonstration projects, each illustrating a different use case of the framework:</p>
<table>
<thead>
<tr>
<th>Demo</th>
<th>Purpose</th>
<th>Mode</th>
<th>Key Features</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>optimization</strong></td>
<td>LLM strategy generation</td>
<td>Optimizer</td>
<td>Ollama integration, multi-timeframe analysis, code export</td>
</tr>
<tr>
<td><strong>backtest</strong></td>
<td>Historical simulation</td>
<td>Backtest</td>
<td>Fast candle processing, statistics generation</td>
</tr>
<tr>
<td><strong>live</strong></td>
<td>Real-time trading</td>
<td>Live</td>
<td>Crash-safe persistence, continuous execution</td>
</tr>
</tbody>
</table>
<a id="directory-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Directory Structure<a href="#directory-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code><span class="hl-4">demo</span><span class="hl-1">/</span><br/><span class="hl-1">├── </span><span class="hl-4">optimization</span><span class="hl-1">/</span><br/><span class="hl-1">│   ├── </span><span class="hl-4">package</span><span class="hl-1">.</span><span class="hl-4">json</span><br/><span class="hl-1">│   ├── .</span><span class="hl-4">env</span><span class="hl-1">.</span><span class="hl-4">example</span><br/><span class="hl-1">│   ├── .</span><span class="hl-4">gitignore</span><br/><span class="hl-1">│   └── </span><span class="hl-4">src</span><span class="hl-1">/</span><br/><span class="hl-1">│       └── </span><span class="hl-4">index</span><span class="hl-1">.</span><span class="hl-4">mjs</span><br/><span class="hl-1">├── </span><span class="hl-4">backtest</span><span class="hl-1">/</span><br/><span class="hl-1">│   ├── </span><span class="hl-4">package</span><span class="hl-1">.</span><span class="hl-4">json</span><br/><span class="hl-1">│   └── </span><span class="hl-4">src</span><span class="hl-1">/</span><br/><span class="hl-1">│       └── </span><span class="hl-4">index</span><span class="hl-1">.</span><span class="hl-4">mjs</span><br/><span class="hl-1">└── </span><span class="hl-4">live</span><span class="hl-1">/</span><br/><span class="hl-1">    ├── </span><span class="hl-4">package</span><span class="hl-1">.</span><span class="hl-4">json</span><br/><span class="hl-1">    └── </span><span class="hl-4">src</span><span class="hl-1">/</span><br/><span class="hl-1">        └── </span><span class="hl-4">index</span><span class="hl-1">.</span><span class="hl-4">mjs</span>
</code><button>Copy</button></pre>

<hr>
<a id="demo-dependency-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Demo Dependency Architecture<a href="#demo-dependency-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/39-running-demos_0.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="installation-and-setup" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation and Setup<a href="#installation-and-setup" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="step-1-navigate-to-demo-directory" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Step 1: Navigate to Demo Directory<a href="#step-1-navigate-to-demo-directory" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">demo/optimization</span><span class="hl-1">  </span><span class="hl-5"># or demo/backtest or demo/live</span>
</code><button type="button">Copy</button></pre>

<a id="step-2-install-dependencies" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Step 2: Install Dependencies<a href="#step-2-install-dependencies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<p>This installs the following packages as specified in <a href="">demo/optimization/package.json:8-14</a>:</p>
<table>
<thead>
<tr>
<th>Package</th>
<th>Version</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>backtest-kit</code></td>
<td>1.5.20</td>
<td>Core framework</td>
</tr>
<tr>
<td><code>ccxt</code></td>
<td>4.5.24</td>
<td>Exchange data fetching</td>
</tr>
<tr>
<td><code>functools-kit</code></td>
<td>1.0.94</td>
<td>Async utilities, Subject pattern</td>
</tr>
<tr>
<td><code>ollama</code></td>
<td>0.6.3</td>
<td>LLM API client</td>
</tr>
<tr>
<td><code>uuid</code></td>
<td>13.0.0</td>
<td>Signal ID generation</td>
</tr>
<tr>
<td><code>dotenv-cli</code></td>
<td>11.0.0</td>
<td>Environment variable loading (dev)</td>
</tr>
</tbody>
</table>
<a id="step-3-configure-environment" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Step 3: Configure Environment<a href="#step-3-configure-environment" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Create <code>.env</code> file from template:</p>
<pre><code class="bash"><span class="hl-0">cp</span><span class="hl-1"> </span><span class="hl-2">.env.example</span><span class="hl-1"> </span><span class="hl-2">.env</span>
</code><button type="button">Copy</button></pre>

<p>Edit <code>.env</code> with required values:</p>
<pre><code class="bash"><span class="hl-4">OLLAMA_API_KEY</span><span class="hl-1">=</span><span class="hl-2">your_api_key_here</span><br/><span class="hl-4">CCXT_DUMPER_URL</span><span class="hl-1">=</span><span class="hl-2">http://localhost:3000</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="environment-configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Environment Configuration<a href="#environment-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="required-variables" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Required Variables<a href="#required-variables" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Variable</th>
<th>Required For</th>
<th>Purpose</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OLLAMA_API_KEY</code></td>
<td>optimization</td>
<td>Authentication for Ollama LLM API</td>
<td><code>sk-...</code></td>
</tr>
<tr>
<td><code>CCXT_DUMPER_URL</code></td>
<td>optimization</td>
<td>Base URL for historical data service</td>
<td><code>http://localhost:3000</code></td>
</tr>
</tbody>
</table>
<a id="ccxt-dumper-service" class="tsd-anchor"></a><h3 class="tsd-anchor-link">CCXT Dumper Service<a href="#ccxt-dumper-service" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The optimization demo requires a running CCXT dumper service (referenced at <a href="">demo/optimization/src/index.mjs:64-82</a>). This service provides historical candle data with pre-calculated technical indicators.</p>
<p><strong>Expected API endpoints</strong>:</p>
<ul>
<li><code>/view/long-term-range</code> - 1-hour candles with 48-hour lookback</li>
<li><code>/view/swing-term-range</code> - 30-minute candles with 48-hour lookback</li>
<li><code>/view/short-term-range</code> - 15-minute candles</li>
<li><code>/view/micro-term-range</code> - 1-minute candles with 1-hour lookback</li>
</ul>
<p><strong>Query parameters</strong>:</p>
<ul>
<li><code>symbol</code>: Trading pair (e.g., &quot;BTCUSDT&quot;)</li>
<li><code>startDate</code>: Unix timestamp in milliseconds</li>
<li><code>endDate</code>: Unix timestamp in milliseconds</li>
<li><code>limit</code>: Maximum rows (default: 1000)</li>
<li><code>offset</code>: Pagination offset (default: 0)</li>
</ul>
<p><strong>Response format</strong>:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">&quot;rows&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;timestamp&quot;</span><span class="hl-1">: </span><span class="hl-6">1234567890</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;open&quot;</span><span class="hl-1">: </span><span class="hl-6">42000.5</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;high&quot;</span><span class="hl-1">: </span><span class="hl-6">42100.2</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;low&quot;</span><span class="hl-1">: </span><span class="hl-6">41900.0</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;close&quot;</span><span class="hl-1">: </span><span class="hl-6">42050.8</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;rsi_14&quot;</span><span class="hl-1">: </span><span class="hl-6">65.3</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;macd&quot;</span><span class="hl-1">: </span><span class="hl-6">123.4</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-11">&quot;...&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;...&quot;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="running-demos-1" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running Demos<a href="#running-demos-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="optimization-demo-execution-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Optimization Demo Execution Flow<a href="#optimization-demo-execution-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/39-running-demos_1.svg" alt="Mermaid Diagram"></p>
<hr>
<a id="running-commands" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Running Commands<a href="#running-commands" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="optimization-demo" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Optimization Demo<a href="#optimization-demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">demo/optimization</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">start</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution</strong>: <a href="">demo/optimization/package.json:6</a></p>
<ul>
<li>Loads environment from <code>.env</code> via <code>dotenv-cli</code></li>
<li>Executes <code>node ./src/index.mjs</code></li>
<li>Connects to Ollama API for LLM inference</li>
<li>Fetches multi-timeframe historical data from CCXT Dumper</li>
<li>Generates strategy code via LLM</li>
<li>Exports executable <code>.mjs</code> file</li>
</ul>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Progress updates: <code>Progress: 25.00%</code> (one per data source)</li>
<li>Generated strategy code printed to console</li>
<li>File written: <code>./{optimizerName}_{symbol}.mjs</code></li>
</ul>
<a id="backtest-demo" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest Demo<a href="#backtest-demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">demo/backtest</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">start</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution</strong>: <a href="">demo/backtest/package.json:6</a></p>
<ul>
<li>Loads environment from <code>.env</code></li>
<li>Executes <code>node ./src/index.mjs</code></li>
<li>Runs backtest with historical candle iteration</li>
<li>Generates performance statistics</li>
<li>Outputs markdown reports</li>
</ul>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Signal events: <code>opened</code>, <code>closed</code> with PNL</li>
<li>Backtest completion event with statistics</li>
<li>Markdown report in <code>./dump/</code> directory</li>
</ul>
<a id="live-demo" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Live Demo<a href="#live-demo" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="bash"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">demo/live</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">start</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution</strong>: <a href="">demo/live/package.json:6</a></p>
<ul>
<li>Loads environment from <code>.env</code></li>
<li>Executes <code>node ./src/index.mjs</code></li>
<li>Runs infinite loop with 61-second tick interval</li>
<li>Persists state to JSON files after each tick</li>
<li>Monitors positions until closed</li>
</ul>
<p><strong>Expected output</strong>:</p>
<ul>
<li>Live tick events every 61 seconds</li>
<li>Signal lifecycle events: <code>opened</code>, <code>active</code>, <code>closed</code></li>
<li>Persistence confirmations</li>
<li>Graceful shutdown on Ctrl+C</li>
</ul>
<hr>
<a id="optimization-demo-source-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Optimization Demo Source Structure<a href="#optimization-demo-source-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="data-source-configuration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Data Source Configuration<a href="#data-source-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The optimization demo defines four data sources at <a href="">demo/optimization/src/index.mjs:66-298</a>, each with specific parameters:</p>
<p><img src="../media/39-running-demos_2.svg" alt="Mermaid Diagram"></p>
<a id="training-and-test-ranges" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Training and Test Ranges<a href="#training-and-test-ranges" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Configuration at <a href="">demo/optimization/src/index.mjs:19-61</a>:</p>
<p><strong>TRAIN_RANGE</strong>: Array of 7 date ranges</p>
<ul>
<li>November 24-30, 2025</li>
<li>Each range: <code>{ note, startDate, endDate }</code></li>
<li>Used for historical data fetching</li>
</ul>
<p><strong>TEST_RANGE</strong>: Single date range</p>
<ul>
<li>December 1, 2025</li>
<li>Format: <code>{ note, startDate, endDate }</code></li>
<li>Used for validation</li>
</ul>
<a id="helper-functions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Helper Functions<a href="#helper-functions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>arrayToMarkdownTable</strong> at <a href="">demo/optimization/src/index.mjs:6-17</a>:</p>
<ul>
<li>Converts array of objects to markdown table</li>
<li>Auto-generates header from object keys</li>
<li>Formats separator and data rows</li>
<li>Used for LLM data presentation</li>
</ul>
<hr>
<a id="packagejson-script-configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Package.json Script Configuration<a href="#packagejson-script-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="script-definition-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Script Definition Pattern<a href="#script-definition-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All three demos use identical script configuration at <a href="">demo/optimization/package.json:5-7</a>:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">&quot;scripts&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">    </span><span class="hl-11">&quot;start&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;dotenv -e .env -- node ./src/index.mjs&quot;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Component breakdown</strong>:</p>
<ul>
<li><code>dotenv</code>: CLI tool for loading environment variables</li>
<li><code>-e .env</code>: Specifies environment file path</li>
<li><code>--</code>: Separator between dotenv options and command</li>
<li><code>node ./src/index.mjs</code>: Execute demo entry point</li>
</ul>
<a id="module-type" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Module Type<a href="#module-type" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>All demos specify ES module mode at <a href="">demo/optimization/package.json:4</a>:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-11">&quot;type&quot;</span><span class="hl-1">: </span><span class="hl-2">&quot;module&quot;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>This enables:</p>
<ul>
<li><code>import</code>/<code>export</code> syntax instead of <code>require()</code></li>
<li>Top-level <code>await</code> support</li>
<li><code>.mjs</code> file execution</li>
<li>Async generator functions</li>
</ul>
<hr>
<a id="progress-monitoring" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Monitoring<a href="#progress-monitoring" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="optimizer-progress-events" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Optimizer Progress Events<a href="#optimizer-progress-events" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The optimization demo emits progress events via <code>progressOptimizerEmitter</code> (see <a href="design_20_optimizer-mode.html">Optimizer Mode</a> for implementation details).</p>
<p><strong>Listening to progress</strong> at <a href="">demo/optimization/src/index.mjs:1</a>:</p>
<pre><code class="javascript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">listenOptimizerProgress</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">listenOptimizerProgress</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Processing: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">processedSources</span><span class="hl-7">}</span><span class="hl-2">/</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">totalSources</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-7">${</span><span class="hl-9">(</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">progress</span><span class="hl-9"> </span><span class="hl-1">*</span><span class="hl-9"> </span><span class="hl-6">100</span><span class="hl-9">).</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event payload structure</strong>:</p>
<ul>
<li><code>optimizerName</code>: Name of optimizer being executed</li>
<li><code>symbol</code>: Trading pair being analyzed</li>
<li><code>totalSources</code>: Total number of data sources (4 in demo)</li>
<li><code>processedSources</code>: Number of completed sources (0-4)</li>
<li><code>progress</code>: Completion ratio from 0.0 to 1.0</li>
</ul>
<a id="progress-calculation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Progress Calculation<a href="#progress-calculation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>For 4 sources:</p>
<ul>
<li>Source 1 complete: <code>processedSources=1, progress=0.25</code></li>
<li>Source 2 complete: <code>processedSources=2, progress=0.50</code></li>
<li>Source 3 complete: <code>processedSources=3, progress=0.75</code></li>
<li>Source 4 complete: <code>processedSources=4, progress=1.00</code></li>
</ul>
<hr>
<a id="common-issues-and-solutions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Common Issues and Solutions<a href="#common-issues-and-solutions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="issue-cannot-find-module-backtest-kit" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Issue: &quot;Cannot find module 'backtest-kit'&quot;<a href="#issue-cannot-find-module-backtest-kit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Cause</strong>: Dependencies not installed</p>
<p><strong>Solution</strong>:</p>
<pre><code class="bash"><span class="hl-0">cd</span><span class="hl-1"> </span><span class="hl-2">demo/optimization</span><span class="hl-1">  </span><span class="hl-5"># or demo/backtest or demo/live</span><br/><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span>
</code><button type="button">Copy</button></pre>

<a id="issue-ollama_api_key-is-not-defined" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Issue: &quot;OLLAMA_API_KEY is not defined&quot;<a href="#issue-ollama_api_key-is-not-defined" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Cause</strong>: Environment file not configured</p>
<p><strong>Solution</strong>:</p>
<pre><code class="bash"><span class="hl-0">cp</span><span class="hl-1"> </span><span class="hl-2">.env.example</span><span class="hl-1"> </span><span class="hl-2">.env</span><br/><span class="hl-5"># Edit .env with your API key</span>
</code><button type="button">Copy</button></pre>

<a id="issue-failed-to-fetch-from-ccxt_dumper_url" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Issue: &quot;Failed to fetch from CCXT_DUMPER_URL&quot;<a href="#issue-failed-to-fetch-from-ccxt_dumper_url" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Cause</strong>: CCXT dumper service not running or wrong URL</p>
<p><strong>Solution</strong>:</p>
<ol>
<li>Start CCXT dumper service: <code>npm start</code> in dumper repo</li>
<li>Verify URL in <code>.env</code> matches service port</li>
<li>Test endpoint: <code>curl http://localhost:3000/view/long-term-range?symbol=BTCUSDT&amp;startDate=...</code></li>
</ol>
<a id="issue-ollama-connection-refused" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Issue: &quot;Ollama connection refused&quot;<a href="#issue-ollama-connection-refused" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><strong>Cause</strong>: Ollama service not running</p>
<p><strong>Solution</strong>:</p>
<pre><code class="bash"><span class="hl-5"># Start Ollama service</span><br/><span class="hl-0">ollama</span><span class="hl-1"> </span><span class="hl-2">serve</span><br/><br/><span class="hl-5"># Verify model is available</span><br/><span class="hl-0">ollama</span><span class="hl-1"> </span><span class="hl-2">list</span><span class="hl-1"> | </span><span class="hl-0">grep</span><span class="hl-1"> </span><span class="hl-2">deepseek</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="demo-project-comparison" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Demo Project Comparison<a href="#demo-project-comparison" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Feature</th>
<th>Optimization</th>
<th>Backtest</th>
<th>Live</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Execution</strong></td>
<td>One-time code generation</td>
<td>Historical simulation</td>
<td>Infinite loop</td>
</tr>
<tr>
<td><strong>Primary API</strong></td>
<td><code>addOptimizer</code>, <code>Optimizer.run</code></td>
<td><code>Backtest.run</code>, <code>listenSignalBacktest</code></td>
<td><code>Live.run</code>, <code>listenSignalLive</code></td>
</tr>
<tr>
<td><strong>Duration</strong></td>
<td>Minutes (LLM inference time)</td>
<td>Seconds to minutes (data size)</td>
<td>Continuous until stopped</td>
</tr>
<tr>
<td><strong>Output</strong></td>
<td><code>.mjs</code> code file</td>
<td>Markdown reports, statistics</td>
<td>JSON persistence files, live events</td>
</tr>
<tr>
<td><strong>External Deps</strong></td>
<td>Ollama API, CCXT Dumper</td>
<td>Exchange data (CCXT)</td>
<td>Exchange data (CCXT)</td>
</tr>
<tr>
<td><strong>Data Source</strong></td>
<td>Pre-aggregated historical</td>
<td>Raw historical candles</td>
<td>Real-time candles</td>
</tr>
<tr>
<td><strong>State</strong></td>
<td>Stateless</td>
<td>Stateless</td>
<td>Stateful (crash-safe)</td>
</tr>
<tr>
<td><strong>Use Case</strong></td>
<td>Strategy discovery</td>
<td>Strategy validation</td>
<td>Production trading</td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#running-demos"><span>Running <wbr/>Demos</span></a><ul><li><a href="#demo-projects-overview"><span>Demo <wbr/>Projects <wbr/>Overview</span></a></li><li><ul><li><a href="#directory-structure"><span>Directory <wbr/>Structure</span></a></li></ul></li><li><a href="#demo-dependency-architecture"><span>Demo <wbr/>Dependency <wbr/>Architecture</span></a></li><li><a href="#installation-and-setup"><span>Installation and <wbr/>Setup</span></a></li><li><ul><li><a href="#step-1-navigate-to-demo-directory"><span>Step 1: <wbr/>Navigate to <wbr/>Demo <wbr/>Directory</span></a></li><li><a href="#step-2-install-dependencies"><span>Step 2: <wbr/>Install <wbr/>Dependencies</span></a></li><li><a href="#step-3-configure-environment"><span>Step 3: <wbr/>Configure <wbr/>Environment</span></a></li></ul></li><li><a href="#environment-configuration"><span>Environment <wbr/>Configuration</span></a></li><li><ul><li><a href="#required-variables"><span>Required <wbr/>Variables</span></a></li><li><a href="#ccxt-dumper-service"><span>CCXT <wbr/>Dumper <wbr/>Service</span></a></li></ul></li><li><a href="#running-demos-1"><span>Running <wbr/>Demos</span></a></li><li><ul><li><a href="#optimization-demo-execution-flow"><span>Optimization <wbr/>Demo <wbr/>Execution <wbr/>Flow</span></a></li></ul></li><li><a href="#running-commands"><span>Running <wbr/>Commands</span></a></li><li><ul><li><a href="#optimization-demo"><span>Optimization <wbr/>Demo</span></a></li><li><a href="#backtest-demo"><span>Backtest <wbr/>Demo</span></a></li><li><a href="#live-demo"><span>Live <wbr/>Demo</span></a></li></ul></li><li><a href="#optimization-demo-source-structure"><span>Optimization <wbr/>Demo <wbr/>Source <wbr/>Structure</span></a></li><li><ul><li><a href="#data-source-configuration"><span>Data <wbr/>Source <wbr/>Configuration</span></a></li><li><a href="#training-and-test-ranges"><span>Training and <wbr/>Test <wbr/>Ranges</span></a></li><li><a href="#helper-functions"><span>Helper <wbr/>Functions</span></a></li></ul></li><li><a href="#packagejson-script-configuration"><span>Package.json <wbr/>Script <wbr/>Configuration</span></a></li><li><ul><li><a href="#script-definition-pattern"><span>Script <wbr/>Definition <wbr/>Pattern</span></a></li><li><a href="#module-type"><span>Module <wbr/>Type</span></a></li></ul></li><li><a href="#progress-monitoring"><span>Progress <wbr/>Monitoring</span></a></li><li><ul><li><a href="#optimizer-progress-events"><span>Optimizer <wbr/>Progress <wbr/>Events</span></a></li><li><a href="#progress-calculation"><span>Progress <wbr/>Calculation</span></a></li></ul></li><li><a href="#common-issues-and-solutions"><span>Common <wbr/>Issues and <wbr/>Solutions</span></a></li><li><ul><li><a href="#issue-cannot-find-module-backtest-kit"><span>Issue: &quot;<wbr/>Cannot find module &#39;backtest-<wbr/>kit&#39;&quot;</span></a></li><li><a href="#issue-ollama_api_key-is-not-defined"><span>Issue: &quot;OLLAMA_<wbr/>API_<wbr/>KEY is not defined&quot;</span></a></li><li><a href="#issue-failed-to-fetch-from-ccxt_dumper_url"><span>Issue: &quot;<wbr/>Failed to fetch from CCXT_<wbr/>DUMPER_<wbr/>URL&quot;</span></a></li><li><a href="#issue-ollama-connection-refused"><span>Issue: &quot;<wbr/>Ollama connection refused&quot;</span></a></li></ul></li><li><a href="#demo-project-comparison"><span>Demo <wbr/>Project <wbr/>Comparison</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
