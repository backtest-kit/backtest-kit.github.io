<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/23_event_listeners | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_23_event_listeners.html">design/23_event_listeners</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="event-listeners" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Event Listeners<a href="#event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This page documents all event listener functions available in the public API for subscribing to framework events. Event listeners enable real-time monitoring of signal lifecycle, execution progress, completion events, performance metrics, and errors.</p>
<p>For information about the underlying event system architecture and Subject-based pub-sub pattern, see <a href="design_14_event_system.html">3.4</a>. For details on signal lifecycle states that trigger events, see <a href="design_49_signal_states.html">8.1</a>. For execution mode differences in event emission, see <a href="design_06_execution_modes.html">2.1</a>.</p>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The framework provides 19 event listener functions organized into five categories:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Purpose</th>
<th>Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Signal Events</strong></td>
<td>Subscribe to signal lifecycle state changes</td>
<td><code>listenSignal</code>, <code>listenSignalOnce</code>, <code>listenSignalLive</code>, <code>listenSignalLiveOnce</code>, <code>listenSignalBacktest</code>, <code>listenSignalBacktestOnce</code></td>
</tr>
<tr>
<td><strong>Completion Events</strong></td>
<td>Subscribe to execution completion (done)</td>
<td><code>listenDoneLive</code>, <code>listenDoneLiveOnce</code>, <code>listenDoneBacktest</code>, <code>listenDoneBacktestOnce</code>, <code>listenDoneWalker</code>, <code>listenDoneWalkerOnce</code></td>
</tr>
<tr>
<td><strong>Progress Events</strong></td>
<td>Subscribe to execution progress updates</td>
<td><code>listenProgress</code>, <code>listenWalker</code>, <code>listenWalkerOnce</code></td>
</tr>
<tr>
<td><strong>Performance Events</strong></td>
<td>Subscribe to timing metrics for profiling</td>
<td><code>listenPerformance</code></td>
</tr>
<tr>
<td><strong>Error Events</strong></td>
<td>Subscribe to validation errors and failures</td>
<td><code>listenError</code>, <code>listenValidation</code>, <code>listenWalkerComplete</code></td>
</tr>
</tbody>
</table>
<p>All listener functions return an unsubscribe function that can be called to stop receiving events. Events are processed sequentially using a queued wrapper to prevent concurrent callback execution.</p>
<a id="event-emitter-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Emitter Architecture<a href="#event-emitter-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/23_Event_Listeners_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Event Flow</strong>: Event producers (ClientStrategy, logic services, ClientRisk) emit events to Subject instances. Listener functions subscribe to these Subjects and forward events to user callbacks wrapped in <code>queued()</code> for sequential processing.</p>
<a id="signal-event-listeners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Signal Event Listeners<a href="#signal-event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Signal event listeners subscribe to signal lifecycle state changes: <code>idle</code>, <code>scheduled</code>, <code>opened</code>, <code>active</code>, <code>closed</code>, <code>cancelled</code>. All signal listeners receive <code>IStrategyTickResult</code> discriminated union types.</p>
<a id="listensignal" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignal<a href="#listensignal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to all signal events from both live and backtest execution modes.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignal</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters</strong>:</p>
<ul>
<li><code>fn</code> - Callback function receiving signal events. Callback is wrapped with <code>queued()</code> for sequential async processing.</li>
</ul>
<p><strong>Returns</strong>: Unsubscribe function to stop listening.</p>
<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:13</a> <code>signalEmitter</code></p>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenSignal</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;opened&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Signal opened:&quot;</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">signal</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">);</span><br/><span class="hl-1">  } </span><span class="hl-3">else</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;closed&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Signal closed:&quot;</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">pnl</span><span class="hl-1">.</span><span class="hl-4">pnlPercentage</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">// Later: stop listening</span><br/><span class="hl-0">unsubscribe</span><span class="hl-1">();</span>
</code><button type="button">Copy</button></pre>

<a id="listensignalonce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignalOnce<a href="#listensignalonce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to filtered signal events with automatic one-time unsubscribe. Useful for waiting for specific signal conditions.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignalOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Parameters</strong>:</p>
<ul>
<li><code>filterFn</code> - Predicate function to filter events. Only matching events trigger the callback.</li>
<li><code>fn</code> - Callback function called once when filter matches.</li>
</ul>
<p><strong>Returns</strong>: Unsubscribe function to cancel before event fires.</p>
<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:13</a> <code>signalEmitter</code></p>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-5">// Wait for first take profit hit</span><br/><span class="hl-0">listenSignalOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  (</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;closed&quot;</span><span class="hl-1"> &amp;&amp; </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">closeReason</span><span class="hl-1"> === </span><span class="hl-2">&quot;take_profit&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  (</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Take profit hit! PNL:&quot;</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">pnl</span><span class="hl-1">.</span><span class="hl-4">pnlPercentage</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="listensignallive" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignalLive<a href="#listensignallive" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to signal events from live trading execution only. Does not receive backtest events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignalLive</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:19</a> <code>signalLiveEmitter</code></p>
<a id="listensignalliveonce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignalLiveOnce<a href="#listensignalliveonce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to live trading signal events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignalLiveOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:19</a> <code>signalLiveEmitter</code></p>
<a id="listensignalbacktest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignalBacktest<a href="#listensignalbacktest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to signal events from backtest execution only. Does not receive live events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignalBacktest</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:25</a> <code>signalBacktestEmitter</code></p>
<a id="listensignalbacktestonce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenSignalBacktestOnce<a href="#listensignalbacktestonce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to backtest signal events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenSignalBacktestOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IStrategyTickResult</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:25</a> <code>signalBacktestEmitter</code></p>
<a id="signal-event-types" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Signal Event Types<a href="#signal-event-types" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/23_Event_Listeners_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Discriminated Union</strong>: Use <code>event.action</code> for type-safe handling. Each action type has different properties available.</p>
<a id="completion-event-listeners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Completion Event Listeners<a href="#completion-event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Completion event listeners subscribe to execution done events. Emitted when <code>background()</code> methods complete execution for Live, Backtest, or Walker modes.</p>
<a id="listendonelive" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneLive<a href="#listendonelive" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to live trading background execution completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneLive</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:37</a> <code>doneLiveSubject</code></p>
<p><strong>Event Payload</strong> (<code>DoneContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">strategyName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">backtest</span><span class="hl-1">: </span><span class="hl-7">false</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Emission Point</strong>: <a href="">src/classes/Live.ts:123-128</a> after <code>Live.background()</code> completes.</p>
<a id="listendoneliveonce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneLiveOnce<a href="#listendoneliveonce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to live completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneLiveOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:37</a> <code>doneLiveSubject</code></p>
<a id="listendonebacktest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneBacktest<a href="#listendonebacktest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to backtest background execution completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneBacktest</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:43</a> <code>doneBacktestSubject</code></p>
<p><strong>Event Payload</strong> (<code>DoneContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">strategyName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">backtest</span><span class="hl-1">: </span><span class="hl-7">true</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Emission Point</strong>: <a href="">src/classes/Backtest.ts:108-113</a> after <code>Backtest.background()</code> completes.</p>
<a id="listendonebacktestonce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneBacktestOnce<a href="#listendonebacktestonce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to backtest completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneBacktestOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:43</a> <code>doneBacktestSubject</code></p>
<a id="listendonewalker" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneWalker<a href="#listendonewalker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to walker background execution completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneWalker</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:49</a> <code>doneWalkerSubject</code></p>
<p><strong>Event Payload</strong> (<code>DoneContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">strategyName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">; </span><span class="hl-5">// walkerName</span><br/><span class="hl-1">  </span><span class="hl-10">backtest</span><span class="hl-1">: </span><span class="hl-7">true</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Emission Point</strong>: <a href="">src/classes/Walker.ts:128-133</a> after <code>Walker.background()</code> completes all strategy comparisons.</p>
<a id="listendonewalkeronce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenDoneWalkerOnce<a href="#listendonewalkeronce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to walker completion events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenDoneWalkerOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">DoneContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:49</a> <code>doneWalkerSubject</code></p>
<a id="progress-event-listeners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Progress Event Listeners<a href="#progress-event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Progress event listeners subscribe to execution progress updates during backtest and walker execution.</p>
<a id="listenprogress" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenProgress<a href="#listenprogress" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to backtest execution progress events. Emitted periodically during <code>Backtest.run()</code> or <code>Backtest.background()</code> to track frame processing progress.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenProgress</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">ProgressContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:55</a> <code>progressEmitter</code></p>
<p><strong>Event Payload</strong> (<code>ProgressContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">progress</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;        </span><span class="hl-5">// 0.0 to 1.0</span><br/><span class="hl-1">  </span><span class="hl-10">processedFrames</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">totalFrames</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">strategyName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenProgress</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-7">${</span><span class="hl-9">(</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">progress</span><span class="hl-9"> </span><span class="hl-1">*</span><span class="hl-9"> </span><span class="hl-6">100</span><span class="hl-9">).</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">%`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">processedFrames</span><span class="hl-7">}</span><span class="hl-2"> / </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">totalFrames</span><span class="hl-7">}</span><span class="hl-2"> frames`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="listenwalker" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenWalker<a href="#listenwalker" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to walker progress events. Emitted after each strategy completes during <code>Walker.run()</code> execution.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenWalker</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">WalkerContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:67</a> <code>walkerEmitter</code></p>
<p><strong>Event Payload</strong> (<code>WalkerContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">strategiesTested</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">totalStrategies</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">bestStrategy</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">bestMetric</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">strategyName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;      </span><span class="hl-5">// current strategy</span><br/><span class="hl-1">  </span><span class="hl-10">metricValue</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;       </span><span class="hl-5">// current strategy metric</span><br/><span class="hl-1">  </span><span class="hl-10">walkerName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">exchangeName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">frameName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenWalker</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Progress: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategiesTested</span><span class="hl-7">}</span><span class="hl-2"> / </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">totalStrategies</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2"> (</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-7">}</span><span class="hl-2">)`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Current: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">strategyName</span><span class="hl-7">}</span><span class="hl-2"> (</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricValue</span><span class="hl-7">}</span><span class="hl-2">)`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="listenwalkeronce" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenWalkerOnce<a href="#listenwalkeronce" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Filtered one-time subscription to walker progress events.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenWalkerOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-0">filterFn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">WalkerContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">boolean</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">WalkerContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><br/><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:67</a> <code>walkerEmitter</code></p>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-5">// Wait for walker to complete all strategies</span><br/><span class="hl-0">listenWalkerOnce</span><span class="hl-1">(</span><br/><span class="hl-1">  (</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">strategiesTested</span><span class="hl-1"> === </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">totalStrategies</span><span class="hl-1">,</span><br/><span class="hl-1">  (</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Walker completed!&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Best strategy:&quot;</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">bestStrategy</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">bestMetric</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="listenwalkercomplete" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenWalkerComplete<a href="#listenwalkercomplete" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to walker final completion events with aggregated results. Emitted once when all strategies have been tested.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenWalkerComplete</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">IWalkerResults</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:73</a> <code>walkerCompleteSubject</code></p>
<p><strong>Event Payload</strong> (<code>IWalkerResults</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">walkerName</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">bestStrategy</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">bestMetric</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">metric</span><span class="hl-1">: </span><span class="hl-4">WalkerMetric</span><span class="hl-1">;         </span><span class="hl-5">// &quot;sharpeRatio&quot; | &quot;winRate&quot; | etc</span><br/><span class="hl-1">  </span><span class="hl-10">totalStrategies</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-10">results</span><span class="hl-1">: </span><span class="hl-4">IWalkerStrategyResult</span><span class="hl-1">[];  </span><span class="hl-5">// per-strategy details</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenWalkerComplete</span><span class="hl-1">((</span><span class="hl-4">results</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Walker </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">walkerName</span><span class="hl-7">}</span><span class="hl-2"> completed!`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best strategy: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestStrategy</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Best </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">metric</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">bestMetric</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Tested </span><span class="hl-7">${</span><span class="hl-4">results</span><span class="hl-9">.</span><span class="hl-4">totalStrategies</span><span class="hl-7">}</span><span class="hl-2"> strategies`</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="performance-event-listeners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Performance Event Listeners<a href="#performance-event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="listenperformance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenPerformance<a href="#listenperformance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to performance timing metric events for profiling strategy execution. Emitted during both backtest and live execution.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenPerformance</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">event</span><span class="hl-1">: </span><span class="hl-11">PerformanceContract</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:61</a> <code>performanceEmitter</code></p>
<p><strong>Event Payload</strong> (<code>PerformanceContract</code>):</p>
<pre><code class="typescript"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-10">metricType</span><span class="hl-1">: </span><span class="hl-4">PerformanceMetricType</span><span class="hl-1">;  </span><span class="hl-5">// &quot;backtest_total&quot; | &quot;backtest_timeframe&quot; | etc</span><br/><span class="hl-1">  </span><span class="hl-10">duration</span><span class="hl-1">: </span><span class="hl-4">number</span><span class="hl-1">;                   </span><span class="hl-5">// milliseconds</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Metric Types</strong>:</p>
<ul>
<li><code>backtest_total</code> - Total backtest execution time</li>
<li><code>backtest_timeframe</code> - Single timeframe iteration time</li>
<li><code>backtest_signal</code> - Single signal processing time</li>
<li><code>live_tick</code> - Single tick execution time</li>
</ul>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenPerformance</span><span class="hl-1">((</span><span class="hl-4">event</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`</span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">metricType</span><span class="hl-7">}</span><span class="hl-2">: </span><span class="hl-7">${</span><span class="hl-4">event</span><span class="hl-9">.</span><span class="hl-4">duration</span><span class="hl-9">.</span><span class="hl-0">toFixed</span><span class="hl-9">(</span><span class="hl-6">2</span><span class="hl-9">)</span><span class="hl-7">}</span><span class="hl-2">ms`</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">duration</span><span class="hl-1"> &gt; </span><span class="hl-6">100</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">warn</span><span class="hl-1">(</span><span class="hl-2">&quot;Slow operation detected:&quot;</span><span class="hl-1">, </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">metricType</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="error-event-listeners" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Event Listeners<a href="#error-event-listeners" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="listenerror" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenError<a href="#listenerror" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to background execution errors. Emitted when errors are caught in <code>background()</code> methods for Live, Backtest, or Walker execution.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenError</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">error</span><span class="hl-1">: </span><span class="hl-11">Error</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:31</a> <code>errorEmitter</code></p>
<p><strong>Emission Points</strong>:</p>
<ul>
<li><a href="">src/classes/Live.ts:130-132</a> - Errors in <code>Live.background()</code></li>
<li><a href="">src/classes/Backtest.ts:115-117</a> - Errors in <code>Backtest.background()</code></li>
<li><a href="">src/classes/Walker.ts:135-137</a> - Errors in <code>Walker.background()</code></li>
</ul>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenError</span><span class="hl-1">((</span><span class="hl-4">error</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Background execution error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">// Log to monitoring service, send alerts, etc.</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="listenvalidation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">listenValidation<a href="#listenvalidation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Subscribes to risk validation errors. Emitted when risk validation functions throw errors during signal checking in <code>ClientRisk.checkSignal()</code>.</p>
<p><strong>Function Signature</strong>:</p>
<pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">listenValidation</span><span class="hl-1">(</span><span class="hl-0">fn</span><span class="hl-1">: (</span><span class="hl-4">error</span><span class="hl-1">: </span><span class="hl-11">Error</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">): () </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span>
</code><button type="button">Copy</button></pre>

<p><strong>Event Source</strong>: <a href="">src/config/emitters.ts:79</a> <code>validationSubject</code></p>
<p><strong>Usage Example</strong>:</p>
<pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">unsubscribe</span><span class="hl-1"> = </span><span class="hl-0">listenValidation</span><span class="hl-1">((</span><span class="hl-4">error</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&quot;Risk validation error:&quot;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">.</span><span class="hl-4">message</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">// Log to monitoring service for debugging</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="queued-processing-pattern" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Queued Processing Pattern<a href="#queued-processing-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All event listener functions wrap user callbacks with <code>queued()</code> from <code>functools-kit</code> to ensure sequential async processing. This prevents concurrent execution of callbacks even if they are async functions.</p>
<p><img src="../media/23_Event_Listeners_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Key Behavior</strong>:</p>
<ul>
<li>Events arrive in order at Subject</li>
<li><code>queued()</code> wrapper enqueues events for processing</li>
<li>Each callback waits for previous callback to complete before executing</li>
<li>Prevents race conditions in async callbacks</li>
<li>No concurrent execution of same callback</li>
</ul>
<p><strong>Implementation</strong>: <a href="">src/function/event.ts:9</a> imports <code>queued</code> from <code>functools-kit</code>. All subscription calls use pattern: <code>emitter.subscribe(queued(async (event) =&gt; fn(event)))</code>.</p>
<a id="event-listener-summary-table" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Event Listener Summary Table<a href="#event-listener-summary-table" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Function</th>
<th>Event Type</th>
<th>Emitter</th>
<th>Mode</th>
<th>Filter</th>
<th>Once</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>listenSignal</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalEmitter</code></td>
<td>All</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenSignalOnce</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalEmitter</code></td>
<td>All</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenSignalLive</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalLiveEmitter</code></td>
<td>Live</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenSignalLiveOnce</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalLiveEmitter</code></td>
<td>Live</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenSignalBacktest</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalBacktestEmitter</code></td>
<td>Backtest</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenSignalBacktestOnce</code></td>
<td><code>IStrategyTickResult</code></td>
<td><code>signalBacktestEmitter</code></td>
<td>Backtest</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenError</code></td>
<td><code>Error</code></td>
<td><code>errorEmitter</code></td>
<td>All</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenDoneLive</code></td>
<td><code>DoneContract</code></td>
<td><code>doneLiveSubject</code></td>
<td>Live</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenDoneLiveOnce</code></td>
<td><code>DoneContract</code></td>
<td><code>doneLiveSubject</code></td>
<td>Live</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenDoneBacktest</code></td>
<td><code>DoneContract</code></td>
<td><code>doneBacktestSubject</code></td>
<td>Backtest</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenDoneBacktestOnce</code></td>
<td><code>DoneContract</code></td>
<td><code>doneBacktestSubject</code></td>
<td>Backtest</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenDoneWalker</code></td>
<td><code>DoneContract</code></td>
<td><code>doneWalkerSubject</code></td>
<td>Walker</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenDoneWalkerOnce</code></td>
<td><code>DoneContract</code></td>
<td><code>doneWalkerSubject</code></td>
<td>Walker</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenProgress</code></td>
<td><code>ProgressContract</code></td>
<td><code>progressEmitter</code></td>
<td>Backtest</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenPerformance</code></td>
<td><code>PerformanceContract</code></td>
<td><code>performanceEmitter</code></td>
<td>All</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenWalker</code></td>
<td><code>WalkerContract</code></td>
<td><code>walkerEmitter</code></td>
<td>Walker</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenWalkerOnce</code></td>
<td><code>WalkerContract</code></td>
<td><code>walkerEmitter</code></td>
<td>Walker</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr>
<td><code>listenWalkerComplete</code></td>
<td><code>IWalkerResults</code></td>
<td><code>walkerCompleteSubject</code></td>
<td>Walker</td>
<td>No</td>
<td>No</td>
</tr>
<tr>
<td><code>listenValidation</code></td>
<td><code>Error</code></td>
<td><code>validationSubject</code></td>
<td>All</td>
<td>No</td>
<td>No</td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#event-listeners"><span>Event <wbr/>Listeners</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#event-emitter-architecture"><span>Event <wbr/>Emitter <wbr/>Architecture</span></a></li><li><a href="#signal-event-listeners"><span>Signal <wbr/>Event <wbr/>Listeners</span></a></li><li><ul><li><a href="#listensignal"><span>listen<wbr/>Signal</span></a></li><li><a href="#listensignalonce"><span>listen<wbr/>Signal<wbr/>Once</span></a></li><li><a href="#listensignallive"><span>listen<wbr/>Signal<wbr/>Live</span></a></li><li><a href="#listensignalliveonce"><span>listen<wbr/>Signal<wbr/>Live<wbr/>Once</span></a></li><li><a href="#listensignalbacktest"><span>listen<wbr/>Signal<wbr/>Backtest</span></a></li><li><a href="#listensignalbacktestonce"><span>listen<wbr/>Signal<wbr/>Backtest<wbr/>Once</span></a></li></ul></li><li><a href="#signal-event-types"><span>Signal <wbr/>Event <wbr/>Types</span></a></li><li><a href="#completion-event-listeners"><span>Completion <wbr/>Event <wbr/>Listeners</span></a></li><li><ul><li><a href="#listendonelive"><span>listen<wbr/>Done<wbr/>Live</span></a></li><li><a href="#listendoneliveonce"><span>listen<wbr/>Done<wbr/>Live<wbr/>Once</span></a></li><li><a href="#listendonebacktest"><span>listen<wbr/>Done<wbr/>Backtest</span></a></li><li><a href="#listendonebacktestonce"><span>listen<wbr/>Done<wbr/>Backtest<wbr/>Once</span></a></li><li><a href="#listendonewalker"><span>listen<wbr/>Done<wbr/>Walker</span></a></li><li><a href="#listendonewalkeronce"><span>listen<wbr/>Done<wbr/>Walker<wbr/>Once</span></a></li></ul></li><li><a href="#progress-event-listeners"><span>Progress <wbr/>Event <wbr/>Listeners</span></a></li><li><ul><li><a href="#listenprogress"><span>listen<wbr/>Progress</span></a></li><li><a href="#listenwalker"><span>listen<wbr/>Walker</span></a></li><li><a href="#listenwalkeronce"><span>listen<wbr/>Walker<wbr/>Once</span></a></li><li><a href="#listenwalkercomplete"><span>listen<wbr/>Walker<wbr/>Complete</span></a></li></ul></li><li><a href="#performance-event-listeners"><span>Performance <wbr/>Event <wbr/>Listeners</span></a></li><li><ul><li><a href="#listenperformance"><span>listen<wbr/>Performance</span></a></li></ul></li><li><a href="#error-event-listeners"><span>Error <wbr/>Event <wbr/>Listeners</span></a></li><li><ul><li><a href="#listenerror"><span>listen<wbr/>Error</span></a></li><li><a href="#listenvalidation"><span>listen<wbr/>Validation</span></a></li></ul></li><li><a href="#queued-processing-pattern"><span>Queued <wbr/>Processing <wbr/>Pattern</span></a></li><li><a href="#event-listener-summary-table"><span>Event <wbr/>Listener <wbr/>Summary <wbr/>Table</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
