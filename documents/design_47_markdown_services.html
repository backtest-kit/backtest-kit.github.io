<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/47_markdown_services | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_47_markdown_services.html">design/47_markdown_services</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="markdown-services" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Markdown Services<a href="#markdown-services" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="purpose-and-scope" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Purpose and Scope<a href="#purpose-and-scope" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Markdown Services comprise the reporting and analytics layer of the backtest-kit framework. These services listen to various event emitters, accumulate signal and performance data, calculate trading statistics, and generate formatted markdown reports persisted to disk. Each service specializes in a specific aspect of trading analysis: backtest results, live trading events, scheduled signals, partial profit/loss milestones, strategy comparisons, portfolio heatmaps, and performance profiling.</p>
<p>For information about the event system that feeds these services, see <a href="design_14_event_system.html">3.4</a>. For details about the execution modes that generate events, see <a href="design_06_execution_modes.html">2.1</a>.</p>
<a id="architecture-overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Architecture Overview<a href="#architecture-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All Markdown Services follow a consistent architecture with three layers: <strong>Event Subscription</strong>, <strong>Storage Accumulation</strong>, and <strong>Report Generation</strong>. Each service subscribes to specific event emitters during initialization, maintains memoized storage instances per symbol-strategy pair, and provides methods to retrieve statistics or generate markdown reports.</p>
<p><img src="../media/47_Markdown_Services_0.svg" alt="Mermaid Diagram"></p>
<a id="service-catalog" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Service Catalog<a href="#service-catalog" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Service</th>
<th>Event Source</th>
<th>Scope</th>
<th>Report Type</th>
<th>Statistics Interface</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>BacktestMarkdownService</code></td>
<td><code>signalBacktestEmitter</code></td>
<td>Symbol-Strategy</td>
<td>Closed signals only</td>
<td><code>BacktestStatistics</code></td>
</tr>
<tr>
<td><code>LiveMarkdownService</code></td>
<td><code>signalLiveEmitter</code></td>
<td>Symbol-Strategy</td>
<td>All events (idle/opened/active/closed)</td>
<td><code>LiveStatistics</code></td>
</tr>
<tr>
<td><code>ScheduleMarkdownService</code></td>
<td><code>signalEmitter</code></td>
<td>Symbol-Strategy</td>
<td>Scheduled/opened/cancelled signals</td>
<td><code>ScheduleStatistics</code></td>
</tr>
<tr>
<td><code>PartialMarkdownService</code></td>
<td><code>partialProfitSubject</code>, <code>partialLossSubject</code></td>
<td>Symbol-Strategy</td>
<td>Profit/loss milestones</td>
<td><code>PartialStatistics</code></td>
</tr>
<tr>
<td><code>WalkerMarkdownService</code></td>
<td><code>walkerEmitter</code></td>
<td>Walker</td>
<td>Strategy comparison</td>
<td><code>WalkerStatistics</code></td>
</tr>
<tr>
<td><code>HeatMarkdownService</code></td>
<td><code>signalEmitter</code></td>
<td>Strategy</td>
<td>Portfolio heatmap</td>
<td><code>IHeatmapStatistics</code></td>
</tr>
<tr>
<td><code>PerformanceMarkdownService</code></td>
<td><code>performanceEmitter</code></td>
<td>Symbol-Strategy</td>
<td>Performance profiling</td>
<td><code>PerformanceStatistics</code></td>
</tr>
</tbody>
</table>
<a id="common-architecture-pattern" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Common Architecture Pattern<a href="#common-architecture-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All Markdown Services implement a consistent internal structure with a memoized <code>ReportStorage</code> class that handles data accumulation and report generation. The service layer provides dependency injection integration and event subscription.</p>
<p><img src="../media/47_Markdown_Services_1.svg" alt="Mermaid Diagram"></p>
<a id="memoized-storage-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memoized Storage Pattern<a href="#memoized-storage-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Each service uses <code>memoize</code> from <code>functools-kit</code> to create and cache <code>ReportStorage</code> instances. The key is typically <code>${symbol}:${strategyName}</code> for symbol-strategy scoped services, or just <code>${walkerName}</code> for walker services.</p>
<pre><code class="typescript"><span class="hl-0">// Example from BacktestMarkdownService</span><br/><span class="hl-6">private</span><span class="hl-2"> </span><span class="hl-6">getStorage</span><span class="hl-2"> = </span><span class="hl-1">memoize</span><span class="hl-2">&lt;(</span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">, </span><span class="hl-6">strategyName</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">ReportStorage</span><span class="hl-2">&gt;(</span><br/><span class="hl-2">  ([</span><span class="hl-6">symbol</span><span class="hl-2">, </span><span class="hl-6">strategyName</span><span class="hl-2">]) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-6">symbol</span><span class="hl-3">}</span><span class="hl-4">:</span><span class="hl-3">${</span><span class="hl-6">strategyName</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-2">,</span><br/><span class="hl-2">  () </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-3">new</span><span class="hl-2"> </span><span class="hl-1">ReportStorage</span><span class="hl-2">()</span><br/><span class="hl-2">);</span>
</code><button type="button">Copy</button></pre>

<p>This ensures that each unique symbol-strategy pair maintains isolated state, preventing cross-contamination of statistics.</p>
<a id="singleshot-initialization" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Singleshot Initialization<a href="#singleshot-initialization" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Services use <code>singleshot</code> from <code>functools-kit</code> to ensure event subscription occurs exactly once. This initialization happens lazily on first use.</p>
<pre><code class="typescript"><span class="hl-6">protected</span><span class="hl-2"> </span><span class="hl-6">init</span><span class="hl-2"> = </span><span class="hl-1">singleshot</span><span class="hl-2">(</span><span class="hl-3">async</span><span class="hl-2"> () </span><span class="hl-3">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">loggerService</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-4">&quot;backtestMarkdownService init&quot;</span><span class="hl-2">);</span><br/><span class="hl-2">  </span><span class="hl-6">signalBacktestEmitter</span><span class="hl-2">.</span><span class="hl-1">subscribe</span><span class="hl-2">(</span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">tick</span><span class="hl-2">);</span><br/><span class="hl-2">});</span>
</code><button type="button">Copy</button></pre>

<a id="backtestmarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">BacktestMarkdownService<a href="#backtestmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Accumulates closed signals from backtest executions and generates comprehensive performance reports. Only processes signals with <code>action === &quot;closed&quot;</code>, ignoring opened/active/idle states.</p>
<a id="key-features" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>signalBacktestEmitter</code></li>
<li>Stores up to <code>MAX_EVENTS</code> (250) closed signals per symbol-strategy pair</li>
<li>Calculates 9 performance metrics: win rate, average PNL, total PNL, standard deviation, Sharpe ratio, annualized Sharpe ratio, certainty ratio, and expected yearly returns</li>
<li>Generates markdown tables with 12 columns including signal ID, symbol, position, prices, PNL, close reason, duration, and timestamps</li>
</ul>
<a id="statistics-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">BacktestStatistics</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">signalList</span><span class="hl-2">: </span><span class="hl-11">IStrategyTickResultClosed</span><span class="hl-2">[];</span><br/><span class="hl-2">  </span><span class="hl-6">totalSignals</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">winCount</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">lossCount</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">winRate</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;        </span><span class="hl-0">// 0-100%, null if unsafe</span><br/><span class="hl-2">  </span><span class="hl-6">avgPnl</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;          </span><span class="hl-0">// percentage</span><br/><span class="hl-2">  </span><span class="hl-6">totalPnl</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;        </span><span class="hl-0">// cumulative percentage</span><br/><span class="hl-2">  </span><span class="hl-6">stdDev</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;          </span><span class="hl-0">// volatility</span><br/><span class="hl-2">  </span><span class="hl-6">sharpeRatio</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;     </span><span class="hl-0">// avgPnl / stdDev</span><br/><span class="hl-2">  </span><span class="hl-6">annualizedSharpeRatio</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;  </span><span class="hl-0">// sharpeRatio × √365</span><br/><span class="hl-2">  </span><span class="hl-6">certaintyRatio</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;  </span><span class="hl-0">// avgWin / |avgLoss|</span><br/><span class="hl-2">  </span><span class="hl-6">expectedYearlyReturns</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;  </span><span class="hl-0">// avgPnl × tradesPerYear</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="data-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Data Flow<a href="#data-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/47_Markdown_Services_2.svg" alt="Mermaid Diagram"></p>
<a id="livemarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">LiveMarkdownService<a href="#livemarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Tracks all tick events from live trading including idle, opened, active, and closed states. Provides real-time monitoring of strategy execution with automatic idle event deduplication.</p>
<a id="key-features-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>signalLiveEmitter</code></li>
<li>Stores up to <code>MAX_EVENTS</code> (250) events per symbol-strategy pair</li>
<li>Replaces idle events intelligently: only replaces the last idle if no opened/active signals occurred after it</li>
<li>Replaces active events with the same <code>signalId</code> to avoid duplicate active rows</li>
<li>Calculates same 9 performance metrics as BacktestMarkdownService</li>
<li>14-column markdown table includes percentage to TP/SL for active signals</li>
</ul>
<a id="idle-event-replacement-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Idle Event Replacement Logic<a href="#idle-event-replacement-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The service implements smart idle event deduplication to prevent idle event spam while preserving important state transitions:</p>
<p><img src="../media/47_Markdown_Services_3.svg" alt="Mermaid Diagram"></p>
<a id="active-event-replacement" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Active Event Replacement<a href="#active-event-replacement" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Active events for the same signal are replaced rather than accumulated, ensuring only the latest active state is stored:</p>
<pre><code class="typescript"><span class="hl-0">// Find the last active event with the same signalId</span><br/><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">lastActiveIndex</span><span class="hl-2"> = </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">_eventList</span><span class="hl-2">.</span><span class="hl-1">findLastIndex</span><span class="hl-2">(</span><br/><span class="hl-2">  (</span><span class="hl-6">event</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-6">event</span><span class="hl-2">.</span><span class="hl-6">action</span><span class="hl-2"> === </span><span class="hl-4">&quot;active&quot;</span><span class="hl-2"> &amp;&amp; </span><span class="hl-6">event</span><span class="hl-2">.</span><span class="hl-6">signalId</span><span class="hl-2"> === </span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">signal</span><span class="hl-2">.</span><span class="hl-6">id</span><br/><span class="hl-2">);</span><br/><br/><span class="hl-0">// Replace the last active event with the same signalId</span><br/><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-6">lastActiveIndex</span><span class="hl-2"> !== -</span><span class="hl-7">1</span><span class="hl-2">) {</span><br/><span class="hl-2">  </span><span class="hl-3">this</span><span class="hl-2">.</span><span class="hl-6">_eventList</span><span class="hl-2">[</span><span class="hl-6">lastActiveIndex</span><span class="hl-2">] = </span><span class="hl-6">newEvent</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-5">return</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="schedulemarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">ScheduleMarkdownService<a href="#schedulemarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Monitors scheduled signals (limit orders) through their lifecycle: scheduled → opened or cancelled. Tracks activation times and cancellation rates.</p>
<a id="key-features-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>signalEmitter</code> (global, not live-specific)</li>
<li>Filters for <code>scheduled</code>, <code>opened</code>, and <code>cancelled</code> actions</li>
<li>For opened events, only tracks if <code>scheduledAt !== pendingAt</code> (was previously scheduled)</li>
<li>Calculates activation rate, cancellation rate, average wait times</li>
</ul>
<a id="statistics-interface-1" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">ScheduleStatistics</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">eventList</span><span class="hl-2">: </span><span class="hl-11">ScheduledEvent</span><span class="hl-2">[];</span><br/><span class="hl-2">  </span><span class="hl-6">totalEvents</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalScheduled</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalOpened</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalCancelled</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">cancellationRate</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;     </span><span class="hl-0">// (cancelled / scheduled) × 100</span><br/><span class="hl-2">  </span><span class="hl-6">activationRate</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;        </span><span class="hl-0">// (opened / scheduled) × 100</span><br/><span class="hl-2">  </span><span class="hl-6">avgWaitTime</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;           </span><span class="hl-0">// minutes for cancelled signals</span><br/><span class="hl-2">  </span><span class="hl-6">avgActivationTime</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;     </span><span class="hl-0">// minutes for opened signals</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-processing-logic" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Processing Logic<a href="#event-processing-logic" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/47_Markdown_Services_4.svg" alt="Mermaid Diagram"></p>
<a id="partialmarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">PartialMarkdownService<a href="#partialmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Tracks partial profit and loss milestones (10%, 20%, 30%, etc.) as signals progress toward TP or SL. Provides insight into price action before final close.</p>
<a id="key-features-3" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>partialProfitSubject</code> and <code>partialLossSubject</code></li>
<li>Records timestamp, symbol, strategy, signal ID, position, current price, level, and mode (backtest/live)</li>
<li>Separate counters for profit vs loss events</li>
<li>9-column table with action, symbol, strategy, signal ID, position, level, current price, timestamp, mode</li>
</ul>
<a id="statistics-interface-2" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">PartialStatistics</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">eventList</span><span class="hl-2">: </span><span class="hl-11">PartialEvent</span><span class="hl-2">[];</span><br/><span class="hl-2">  </span><span class="hl-6">totalEvents</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalProfit</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;    </span><span class="hl-0">// count of profit milestone events</span><br/><span class="hl-2">  </span><span class="hl-6">totalLoss</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;      </span><span class="hl-0">// count of loss milestone events</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="event-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event Flow<a href="#event-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/47_Markdown_Services_5.svg" alt="Mermaid Diagram"></p>
<a id="walkermarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">WalkerMarkdownService<a href="#walkermarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Aggregates results from walker strategy comparisons. Ranks strategies by optimization metric and generates comparison tables with PNL details for all closed signals across all strategies.</p>
<a id="key-features-4" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>walkerEmitter</code></li>
<li>One <code>ReportStorage</code> instance per walker name (not per symbol-strategy)</li>
<li>Stores metadata: <code>totalStrategies</code>, <code>bestStats</code>, <code>bestMetric</code>, <code>bestStrategy</code></li>
<li>Accumulates all strategy results for comparison table</li>
<li>Generates two tables: Top N strategies comparison + All signals PNL table</li>
</ul>
<a id="statistics-interface-3" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">WalkerStatistics</span><span class="hl-2"> </span><span class="hl-3">extends</span><span class="hl-2"> </span><span class="hl-11">IWalkerResults</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">strategyResults</span><span class="hl-2">: </span><span class="hl-11">IStrategyResult</span><span class="hl-2">[];  </span><span class="hl-0">// Array of all strategy results</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">IStrategyResult</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">strategyName</span><span class="hl-2">: </span><span class="hl-11">StrategyName</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">stats</span><span class="hl-2">: </span><span class="hl-11">BacktestStatistics</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">metricValue</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;  </span><span class="hl-0">// Value of optimization metric</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="comparison-table-generation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Comparison Table Generation<a href="#comparison-table-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The service dynamically creates column configuration based on the optimization metric:</p>
<p><img src="../media/47_Markdown_Services_6.svg" alt="Mermaid Diagram"></p>
<a id="heatmarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">HeatMarkdownService<a href="#heatmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Provides portfolio-level analytics by aggregating signals across all symbols for a strategy. Calculates per-symbol statistics and portfolio-wide metrics.</p>
<a id="key-features-5" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>signalEmitter</code> (global)</li>
<li>Memoizes storage by <code>strategyName</code> only (not symbol)</li>
<li>Maintains <code>Map&lt;string, IStrategyTickResultClosed[]&gt;</code> for symbol-level storage</li>
<li>Calculates 13 metrics per symbol: Total PNL, Sharpe Ratio, Max Drawdown, Profit Factor, Expectancy, Win Rate, Avg Win/Loss, Max Win/Loss Streak, Total Trades</li>
<li>Sorts symbols by Sharpe Ratio (best performers first)</li>
<li>Calculates portfolio-wide aggregates</li>
</ul>
<a id="statistics-interface-4" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">IHeatmapStatistics</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">symbols</span><span class="hl-2">: </span><span class="hl-11">IHeatmapRow</span><span class="hl-2">[];          </span><span class="hl-0">// Per-symbol stats</span><br/><span class="hl-2">  </span><span class="hl-6">totalSymbols</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">portfolioTotalPnl</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">portfolioSharpeRatio</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;  </span><span class="hl-0">// Weighted by trade count</span><br/><span class="hl-2">  </span><span class="hl-6">portfolioTotalTrades</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">IHeatmapRow</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">symbol</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalPnl</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">sharpeRatio</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">maxDrawdown</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">profitFactor</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;     </span><span class="hl-0">// sumWins / |sumLosses|</span><br/><span class="hl-2">  </span><span class="hl-6">expectancy</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;        </span><span class="hl-0">// winRate × avgWin + lossRate × avgLoss</span><br/><span class="hl-2">  </span><span class="hl-6">winRate</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">avgWin</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">avgLoss</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">maxWinStreak</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">maxLossStreak</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalTrades</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-0">// ... additional fields</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="portfolio-metrics-calculation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Portfolio Metrics Calculation<a href="#portfolio-metrics-calculation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/47_Markdown_Services_7.svg" alt="Mermaid Diagram"></p>
<a id="performancemarkdownservice" class="tsd-anchor"></a><h2 class="tsd-anchor-link">PerformanceMarkdownService<a href="#performancemarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Profiles execution performance by tracking metric durations, percentiles, and wait times. Identifies bottlenecks in strategy execution.</p>
<a id="key-features-6" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Key Features<a href="#key-features-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>Subscribes to <code>performanceEmitter</code></li>
<li>Groups events by <code>metricType</code> (e.g., &quot;getSignal&quot;, &quot;getCandles&quot;, &quot;checkSignal&quot;)</li>
<li>Stores up to <code>MAX_EVENTS</code> (10,000) per symbol-strategy pair</li>
<li>Calculates 13 statistics per metric type: count, total/avg/min/max duration, std dev, median, P95, P99, avg/min/max wait time</li>
<li>Sorts metrics by total duration (descending) to show bottlenecks first</li>
<li>Displays time distribution as percentages</li>
</ul>
<a id="statistics-interface-5" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Statistics Interface<a href="#statistics-interface-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">PerformanceStatistics</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">strategyName</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalEvents</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalDuration</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;  </span><span class="hl-0">// milliseconds</span><br/><span class="hl-2">  </span><span class="hl-6">metricStats</span><span class="hl-2">: </span><span class="hl-11">Record</span><span class="hl-2">&lt;</span><span class="hl-11">string</span><span class="hl-2">, </span><span class="hl-11">MetricStats</span><span class="hl-2">&gt;;</span><br/><span class="hl-2">  </span><span class="hl-6">events</span><span class="hl-2">: </span><span class="hl-11">PerformanceContract</span><span class="hl-2">[];</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">MetricStats</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">metricType</span><span class="hl-2">: </span><span class="hl-11">PerformanceMetricType</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">count</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">totalDuration</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">avgDuration</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">minDuration</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">maxDuration</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">stdDev</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">median</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">p95</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;    </span><span class="hl-0">// 95th percentile</span><br/><span class="hl-2">  </span><span class="hl-6">p99</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;    </span><span class="hl-0">// 99th percentile</span><br/><span class="hl-2">  </span><span class="hl-6">avgWaitTime</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;    </span><span class="hl-0">// interval between consecutive events</span><br/><span class="hl-2">  </span><span class="hl-6">minWaitTime</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-6">maxWaitTime</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">;</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="percentile-calculation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Percentile Calculation<a href="#percentile-calculation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The service calculates percentiles to identify outliers and tail latencies:</p>
<pre><code class="typescript"><span class="hl-3">function</span><span class="hl-2"> </span><span class="hl-1">percentile</span><span class="hl-2">(</span><span class="hl-6">sortedArray</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">[], </span><span class="hl-6">p</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2">): </span><span class="hl-11">number</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-6">sortedArray</span><span class="hl-2">.</span><span class="hl-6">length</span><span class="hl-2"> === </span><span class="hl-7">0</span><span class="hl-2">) </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-7">0</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">index</span><span class="hl-2"> = </span><span class="hl-6">Math</span><span class="hl-2">.</span><span class="hl-1">ceil</span><span class="hl-2">((</span><span class="hl-6">sortedArray</span><span class="hl-2">.</span><span class="hl-6">length</span><span class="hl-2"> * </span><span class="hl-6">p</span><span class="hl-2">) / </span><span class="hl-7">100</span><span class="hl-2">) - </span><span class="hl-7">1</span><span class="hl-2">;</span><br/><span class="hl-2">  </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-6">sortedArray</span><span class="hl-2">[</span><span class="hl-6">Math</span><span class="hl-2">.</span><span class="hl-1">max</span><span class="hl-2">(</span><span class="hl-7">0</span><span class="hl-2">, </span><span class="hl-6">index</span><span class="hl-2">)];</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// Usage</span><br/><span class="hl-10">median</span><span class="hl-2">: </span><span class="hl-1">percentile</span><span class="hl-2">(</span><span class="hl-6">durations</span><span class="hl-2">, </span><span class="hl-7">50</span><span class="hl-2">),</span><br/><span class="hl-10">p95</span><span class="hl-2">: </span><span class="hl-1">percentile</span><span class="hl-2">(</span><span class="hl-6">durations</span><span class="hl-2">, </span><span class="hl-7">95</span><span class="hl-2">),</span><br/><span class="hl-10">p99</span><span class="hl-2">: </span><span class="hl-1">percentile</span><span class="hl-2">(</span><span class="hl-6">durations</span><span class="hl-2">, </span><span class="hl-7">99</span><span class="hl-2">),</span>
</code><button type="button">Copy</button></pre>

<a id="column-configuration-pattern" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Column Configuration Pattern<a href="#column-configuration-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All services use a <code>Column[]</code> array to define table structure. Each column specifies how to extract and format data from event objects.</p>
<a id="column-interface" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Column Interface<a href="#column-interface" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">interface</span><span class="hl-2"> </span><span class="hl-11">Column</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-6">key</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">;                                  </span><span class="hl-0">// Unique identifier</span><br/><span class="hl-2">  </span><span class="hl-6">label</span><span class="hl-2">: </span><span class="hl-11">string</span><span class="hl-2">;                                </span><span class="hl-0">// Table header</span><br/><span class="hl-2">  </span><span class="hl-1">format</span><span class="hl-2">: (</span><span class="hl-6">data</span><span class="hl-2">: </span><span class="hl-11">EventType</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">string</span><span class="hl-2">;         </span><span class="hl-0">// Data formatter</span><br/><span class="hl-2">  </span><span class="hl-1">isVisible</span><span class="hl-2">: () </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-11">boolean</span><span class="hl-2">;                     </span><span class="hl-0">// Conditional rendering</span><br/><span class="hl-2">}</span>
</code><button type="button">Copy</button></pre>

<a id="example-from-backtestmarkdownservice" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example from BacktestMarkdownService<a href="#example-from-backtestmarkdownservice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">columns</span><span class="hl-2">: </span><span class="hl-11">Column</span><span class="hl-2">[] = [</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-6">key:</span><span class="hl-2"> </span><span class="hl-4">&quot;signalId&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">label:</span><span class="hl-2"> </span><span class="hl-4">&quot;Signal ID&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-1">format</span><span class="hl-6">:</span><span class="hl-2"> (</span><span class="hl-6">data</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">signal</span><span class="hl-2">.</span><span class="hl-6">id</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-1">isVisible</span><span class="hl-6">:</span><span class="hl-2"> () </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">,</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-6">key:</span><span class="hl-2"> </span><span class="hl-4">&quot;note&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">label:</span><span class="hl-2"> </span><span class="hl-4">&quot;Note&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-1">format</span><span class="hl-6">:</span><span class="hl-2"> (</span><span class="hl-6">data</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-1">toPlainString</span><span class="hl-2">(</span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">signal</span><span class="hl-2">.</span><span class="hl-6">note</span><span class="hl-2"> ?? </span><span class="hl-4">&quot;N/A&quot;</span><span class="hl-2">),</span><br/><span class="hl-2">    </span><span class="hl-1">isVisible</span><span class="hl-6">:</span><span class="hl-2"> () </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-8">GLOBAL_CONFIG</span><span class="hl-2">.</span><span class="hl-8">CC_REPORT_SHOW_SIGNAL_NOTE</span><span class="hl-2">,</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  {</span><br/><span class="hl-2">    </span><span class="hl-6">key:</span><span class="hl-2"> </span><span class="hl-4">&quot;pnl&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-6">label:</span><span class="hl-2"> </span><span class="hl-4">&quot;PNL (net)&quot;</span><span class="hl-2">,</span><br/><span class="hl-2">    </span><span class="hl-1">format</span><span class="hl-6">:</span><span class="hl-2"> (</span><span class="hl-6">data</span><span class="hl-2">) </span><span class="hl-3">=&gt;</span><span class="hl-2"> {</span><br/><span class="hl-2">      </span><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">pnlPercentage</span><span class="hl-2"> = </span><span class="hl-6">data</span><span class="hl-2">.</span><span class="hl-6">pnl</span><span class="hl-2">.</span><span class="hl-6">pnlPercentage</span><span class="hl-2">;</span><br/><span class="hl-2">      </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-4">`</span><span class="hl-3">${</span><span class="hl-6">pnlPercentage</span><span class="hl-9"> </span><span class="hl-2">&gt;</span><span class="hl-9"> </span><span class="hl-7">0</span><span class="hl-9"> </span><span class="hl-2">?</span><span class="hl-9"> </span><span class="hl-4">&quot;+&quot;</span><span class="hl-9"> </span><span class="hl-2">:</span><span class="hl-9"> </span><span class="hl-4">&quot;&quot;</span><span class="hl-3">}${</span><span class="hl-6">pnlPercentage</span><span class="hl-9">.</span><span class="hl-1">toFixed</span><span class="hl-9">(</span><span class="hl-7">2</span><span class="hl-9">)</span><span class="hl-3">}</span><span class="hl-4">%`</span><span class="hl-2">;</span><br/><span class="hl-2">    },</span><br/><span class="hl-2">    </span><span class="hl-1">isVisible</span><span class="hl-6">:</span><span class="hl-2"> () </span><span class="hl-3">=&gt;</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">,</span><br/><span class="hl-2">  },</span><br/><span class="hl-2">  </span><span class="hl-0">// ... more columns</span><br/><span class="hl-2">];</span>
</code><button type="button">Copy</button></pre>

<a id="table-generation-process" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Table Generation Process<a href="#table-generation-process" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/47_Markdown_Services_8.svg" alt="Mermaid Diagram"></p>
<p>The generated markdown follows this format:</p>
<pre><code class="markdown">| Signal ID | Symbol | Position | PNL (net) | Close Reason | Duration (min) |
| --- | --- | --- | --- | --- | --- |
| abc123 | BTCUSDT | LONG | +2.45% | take_profit | 45 |
| def456 | ETHUSDT | SHORT | -1.20% | stop_loss | 30 |
</code><button type="button">Copy</button></pre>

<a id="safe-math-and-null-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Safe Math and Null Handling<a href="#safe-math-and-null-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All services implement <code>isUnsafe()</code> function to detect NaN, Infinity, or null values. Unsafe values are replaced with <code>null</code> in statistics interfaces, ensuring reports display &quot;N/A&quot; instead of corrupted numbers.</p>
<pre><code class="typescript"><span class="hl-3">function</span><span class="hl-2"> </span><span class="hl-1">isUnsafe</span><span class="hl-2">(</span><span class="hl-6">value</span><span class="hl-2">: </span><span class="hl-11">number</span><span class="hl-2"> | </span><span class="hl-11">null</span><span class="hl-2">): </span><span class="hl-11">boolean</span><span class="hl-2"> {</span><br/><span class="hl-2">  </span><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-3">typeof</span><span class="hl-2"> </span><span class="hl-6">value</span><span class="hl-2"> !== </span><span class="hl-4">&quot;number&quot;</span><span class="hl-2">) {</span><br/><span class="hl-2">    </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">  </span><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-1">isNaN</span><span class="hl-2">(</span><span class="hl-6">value</span><span class="hl-2">)) {</span><br/><span class="hl-2">    </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">  </span><span class="hl-5">if</span><span class="hl-2"> (!</span><span class="hl-1">isFinite</span><span class="hl-2">(</span><span class="hl-6">value</span><span class="hl-2">)) {</span><br/><span class="hl-2">    </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-3">true</span><span class="hl-2">;</span><br/><span class="hl-2">  }</span><br/><span class="hl-2">  </span><span class="hl-5">return</span><span class="hl-2"> </span><span class="hl-3">false</span><span class="hl-2">;</span><br/><span class="hl-2">}</span><br/><br/><span class="hl-0">// Usage</span><br/><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-1">isUnsafe</span><span class="hl-2">(</span><span class="hl-6">winRate</span><span class="hl-2">)) </span><span class="hl-6">winRate</span><span class="hl-2"> = </span><span class="hl-3">null</span><span class="hl-2">;</span><br/><span class="hl-5">if</span><span class="hl-2"> (</span><span class="hl-1">isUnsafe</span><span class="hl-2">(</span><span class="hl-6">sharpeRatio</span><span class="hl-2">)) </span><span class="hl-6">sharpeRatio</span><span class="hl-2"> = </span><span class="hl-3">null</span><span class="hl-2">;</span>
</code><button type="button">Copy</button></pre>

<p>This prevents division by zero, empty array reductions, and other edge cases from producing invalid statistics.</p>
<a id="public-api-methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Public API Methods<a href="#public-api-methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All services expose four public methods for programmatic access:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Parameters</th>
<th>Returns</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>getData()</code></td>
<td><code>symbol</code>, <code>strategyName</code></td>
<td><code>Promise&lt;Statistics&gt;</code></td>
<td>Retrieve calculated statistics</td>
</tr>
<tr>
<td><code>getReport()</code></td>
<td><code>symbol</code>, <code>strategyName</code></td>
<td><code>Promise&lt;string&gt;</code></td>
<td>Generate markdown report</td>
</tr>
<tr>
<td><code>dump()</code></td>
<td><code>symbol</code>, <code>strategyName</code>, <code>path?</code></td>
<td><code>Promise&lt;void&gt;</code></td>
<td>Save report to disk</td>
</tr>
<tr>
<td><code>clear()</code></td>
<td><code>ctx?</code></td>
<td><code>Promise&lt;void&gt;</code></td>
<td>Clear accumulated data</td>
</tr>
</tbody>
</table>
<a id="example-usage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Example Usage<a href="#example-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-0">// Get statistics programmatically</span><br/><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">stats</span><span class="hl-2"> = </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">Backtest</span><span class="hl-2">.</span><span class="hl-1">getData</span><span class="hl-2">(</span><span class="hl-4">&quot;BTCUSDT&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;my-strategy&quot;</span><span class="hl-2">);</span><br/><span class="hl-6">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-4">`Win Rate: </span><span class="hl-3">${</span><span class="hl-6">stats</span><span class="hl-9">.</span><span class="hl-6">winRate</span><span class="hl-3">}</span><span class="hl-4">%`</span><span class="hl-2">);</span><br/><span class="hl-6">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-4">`Sharpe Ratio: </span><span class="hl-3">${</span><span class="hl-6">stats</span><span class="hl-9">.</span><span class="hl-6">sharpeRatio</span><span class="hl-3">}</span><span class="hl-4">`</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Generate markdown string</span><br/><span class="hl-3">const</span><span class="hl-2"> </span><span class="hl-8">markdown</span><span class="hl-2"> = </span><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">Backtest</span><span class="hl-2">.</span><span class="hl-1">getReport</span><span class="hl-2">(</span><span class="hl-4">&quot;BTCUSDT&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;my-strategy&quot;</span><span class="hl-2">);</span><br/><span class="hl-6">console</span><span class="hl-2">.</span><span class="hl-1">log</span><span class="hl-2">(</span><span class="hl-6">markdown</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Save to disk</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">Backtest</span><span class="hl-2">.</span><span class="hl-1">dump</span><span class="hl-2">(</span><span class="hl-4">&quot;BTCUSDT&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;my-strategy&quot;</span><span class="hl-2">, </span><span class="hl-4">&quot;./custom/path&quot;</span><span class="hl-2">);</span><br/><br/><span class="hl-0">// Clear data</span><br/><span class="hl-5">await</span><span class="hl-2"> </span><span class="hl-6">Backtest</span><span class="hl-2">.</span><span class="hl-1">clear</span><span class="hl-2">({ </span><span class="hl-6">symbol:</span><span class="hl-2"> </span><span class="hl-4">&quot;BTCUSDT&quot;</span><span class="hl-2">, </span><span class="hl-6">strategyName:</span><span class="hl-2"> </span><span class="hl-4">&quot;my-strategy&quot;</span><span class="hl-2"> });</span>
</code><button type="button">Copy</button></pre>

<a id="file-output-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">File Output Structure<a href="#file-output-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Reports are written to <code>./dump/</code> directory with subdirectories per service type:</p>
<pre><code><span class="hl-2">.</span><span class="hl-15">/dump/</span><br/><span class="hl-2">├── </span><span class="hl-6">backtest</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">b</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">├── </span><span class="hl-6">live</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">b</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">├── </span><span class="hl-6">schedule</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">b</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">├── </span><span class="hl-6">partial</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">BTCUSDT_strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">ETHUSDT_strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">├── </span><span class="hl-6">walker</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">walker</span><span class="hl-2">-</span><span class="hl-6">comparison</span><span class="hl-2">-1.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">walker</span><span class="hl-2">-</span><span class="hl-6">comparison</span><span class="hl-2">-2.</span><span class="hl-6">md</span><br/><span class="hl-2">├── </span><span class="hl-6">heatmap</span><span class="hl-2">/</span><br/><span class="hl-2">│   ├── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">│   └── </span><span class="hl-6">strategy</span><span class="hl-2">-</span><span class="hl-6">b</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">└── </span><span class="hl-6">performance</span><span class="hl-2">/</span><br/><span class="hl-2">    ├── </span><span class="hl-6">BTCUSDT_strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span><br/><span class="hl-2">    └── </span><span class="hl-6">ETHUSDT_strategy</span><span class="hl-2">-</span><span class="hl-6">a</span><span class="hl-2">.</span><span class="hl-6">md</span>
</code><button>Copy</button></pre>

<p>Naming conventions:</p>
<ul>
<li>Backtest/Live/Schedule/Heatmap: <code>{strategyName}.md</code></li>
<li>Partial/Performance: <code>{symbol}_{strategyName}.md</code></li>
<li>Walker: <code>{walkerName}.md</code></li>
</ul>
<a id="integration-with-event-system" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Event System<a href="#integration-with-event-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Markdown Services are automatically initialized and subscribed to their respective emitters. The initialization occurs lazily via <code>singleshot</code> wrapper, ensuring subscriptions happen only once regardless of how many times the service is accessed.</p>
<p><img src="../media/47_Markdown_Services_9.svg" alt="Mermaid Diagram"></p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#markdown-services"><span>Markdown <wbr/>Services</span></a><ul><li><a href="#purpose-and-scope"><span>Purpose and <wbr/>Scope</span></a></li><li><a href="#architecture-overview"><span>Architecture <wbr/>Overview</span></a></li><li><a href="#service-catalog"><span>Service <wbr/>Catalog</span></a></li><li><a href="#common-architecture-pattern"><span>Common <wbr/>Architecture <wbr/>Pattern</span></a></li><li><ul><li><a href="#memoized-storage-pattern"><span>Memoized <wbr/>Storage <wbr/>Pattern</span></a></li><li><a href="#singleshot-initialization"><span>Singleshot <wbr/>Initialization</span></a></li></ul></li><li><a href="#backtestmarkdownservice"><span>Backtest<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#data-flow"><span>Data <wbr/>Flow</span></a></li></ul></li><li><a href="#livemarkdownservice"><span>Live<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-1"><span>Key <wbr/>Features</span></a></li><li><a href="#idle-event-replacement-logic"><span>Idle <wbr/>Event <wbr/>Replacement <wbr/>Logic</span></a></li><li><a href="#active-event-replacement"><span>Active <wbr/>Event <wbr/>Replacement</span></a></li></ul></li><li><a href="#schedulemarkdownservice"><span>Schedule<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-2"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface-1"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#event-processing-logic"><span>Event <wbr/>Processing <wbr/>Logic</span></a></li></ul></li><li><a href="#partialmarkdownservice"><span>Partial<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-3"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface-2"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#event-flow"><span>Event <wbr/>Flow</span></a></li></ul></li><li><a href="#walkermarkdownservice"><span>Walker<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-4"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface-3"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#comparison-table-generation"><span>Comparison <wbr/>Table <wbr/>Generation</span></a></li></ul></li><li><a href="#heatmarkdownservice"><span>Heat<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-5"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface-4"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#portfolio-metrics-calculation"><span>Portfolio <wbr/>Metrics <wbr/>Calculation</span></a></li></ul></li><li><a href="#performancemarkdownservice"><span>Performance<wbr/>Markdown<wbr/>Service</span></a></li><li><ul><li><a href="#key-features-6"><span>Key <wbr/>Features</span></a></li><li><a href="#statistics-interface-5"><span>Statistics <wbr/>Interface</span></a></li><li><a href="#percentile-calculation"><span>Percentile <wbr/>Calculation</span></a></li></ul></li><li><a href="#column-configuration-pattern"><span>Column <wbr/>Configuration <wbr/>Pattern</span></a></li><li><ul><li><a href="#column-interface"><span>Column <wbr/>Interface</span></a></li><li><a href="#example-from-backtestmarkdownservice"><span>Example from <wbr/>Backtest<wbr/>Markdown<wbr/>Service</span></a></li><li><a href="#table-generation-process"><span>Table <wbr/>Generation <wbr/>Process</span></a></li></ul></li><li><a href="#safe-math-and-null-handling"><span>Safe <wbr/>Math and <wbr/>Null <wbr/>Handling</span></a></li><li><a href="#public-api-methods"><span>Public API <wbr/>Methods</span></a></li><li><ul><li><a href="#example-usage"><span>Example <wbr/>Usage</span></a></li></ul></li><li><a href="#file-output-structure"><span>File <wbr/>Output <wbr/>Structure</span></a></li><li><a href="#integration-with-event-system"><span>Integration with <wbr/>Event <wbr/>System</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
