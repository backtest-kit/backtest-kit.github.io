<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/35_clientframe | backtest-kit</title><meta name="description" content="Documentation for backtest-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">backtest-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">backtest-kit</a></li><li><a href="design_35_clientframe.html">design/35_clientframe</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="clientframe" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ClientFrame<a href="#clientframe" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p><strong>Purpose</strong>: ClientFrame implements timeframe generation for backtesting by creating arrays of timestamps spaced according to configured intervals. It transforms frame schemas (startDate, endDate, interval) into concrete arrays of Date objects that BacktestLogicPrivateService iterates through during historical simulation.</p>
<p>For information about the Frame schema configuration that ClientFrame consumes, see <a href="design_27_frame_schemas.html">Frame Schemas</a>. For backtest execution flow that uses these timeframes, see <a href="design_55_backtest_execution_flow.html">Backtest Execution Flow</a>.</p>
<hr>
<a id="overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Overview<a href="#overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ClientFrame is a client implementation that generates timeframe arrays for backtest iteration. It bridges the gap between declarative frame configuration (IFrameSchema) and concrete timestamp arrays used during backtest execution.</p>
<p><strong>Key Responsibilities</strong>:</p>
<ul>
<li>Generate arrays of Date objects from startDate to endDate</li>
<li>Space timestamps according to FrameInterval (1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d, 3d)</li>
<li>Invoke onTimeframe callbacks after generation</li>
<li>Support symbol parameter for API consistency (currently unused)</li>
</ul>
<p><strong>Core Interface</strong>:</p>
<pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">IFrame</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">getTimeframe</span><span class="hl-1">: (</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-11">string</span><span class="hl-1">, </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-11">FrameName</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">Promise</span><span class="hl-1">&lt;</span><span class="hl-11">Date</span><span class="hl-1">[]&gt;;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="frame-schema-configuration" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Frame Schema Configuration<a href="#frame-schema-configuration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>ClientFrame is instantiated with IFrameParams which extends IFrameSchema with runtime dependencies.</p>
<a id="iframeschema-structure" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IFrameSchema Structure<a href="#iframeschema-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>frameName</code></td>
<td><code>FrameName</code> (string)</td>
<td>Unique identifier for this frame</td>
</tr>
<tr>
<td><code>interval</code></td>
<td><code>FrameInterval</code></td>
<td>Timestamp spacing (1m, 3m, 5m, 15m, 30m, 1h, 2h, 4h, 6h, 8h, 12h, 1d, 3d)</td>
</tr>
<tr>
<td><code>startDate</code></td>
<td><code>Date</code></td>
<td>Beginning of backtest period (inclusive)</td>
</tr>
<tr>
<td><code>endDate</code></td>
<td><code>Date</code></td>
<td>End of backtest period (inclusive)</td>
</tr>
<tr>
<td><code>note?</code></td>
<td><code>string</code></td>
<td>Optional developer documentation</td>
</tr>
<tr>
<td><code>callbacks?</code></td>
<td><code>Partial&lt;IFrameCallbacks&gt;</code></td>
<td>Optional lifecycle event handlers</td>
</tr>
</tbody>
</table>
<a id="iframeparams-extension" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IFrameParams Extension<a href="#iframeparams-extension" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">IFrameParams</span><span class="hl-1"> </span><span class="hl-7">extends</span><span class="hl-1"> </span><span class="hl-11">IFrameSchema</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">logger</span><span class="hl-1">: </span><span class="hl-11">ILogger</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>Adds LoggerService instance for internal debug logging during timeframe generation.</p>
<a id="iframecallbacks" class="tsd-anchor"></a><h3 class="tsd-anchor-link">IFrameCallbacks<a href="#iframecallbacks" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">interface</span><span class="hl-1"> </span><span class="hl-11">IFrameCallbacks</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">onTimeframe</span><span class="hl-1">: (</span><br/><span class="hl-1">    </span><span class="hl-4">timeframe</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">[], </span><br/><span class="hl-1">    </span><span class="hl-4">startDate</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">, </span><br/><span class="hl-1">    </span><span class="hl-4">endDate</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">, </span><br/><span class="hl-1">    </span><span class="hl-4">interval</span><span class="hl-1">: </span><span class="hl-11">FrameInterval</span><br/><span class="hl-1">  ) </span><span class="hl-7">=&gt;</span><span class="hl-1"> </span><span class="hl-11">void</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p>The <code>onTimeframe</code> callback fires after timeframe array generation, providing the complete array and configuration for validation or logging.</p>
<hr>
<a id="supported-frame-intervals" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Supported Frame Intervals<a href="#supported-frame-intervals" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/35_ClientFrame_0.svg" alt="Mermaid Diagram"></p>
<p><strong>Interval Millisecond Conversion</strong>:</p>
<table>
<thead>
<tr>
<th>Interval</th>
<th>Milliseconds</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>1m</td>
<td>60,000</td>
<td>High-frequency tick generation</td>
</tr>
<tr>
<td>3m</td>
<td>180,000</td>
<td>Short-term pattern analysis</td>
</tr>
<tr>
<td>5m</td>
<td>300,000</td>
<td>Common scalping timeframe</td>
</tr>
<tr>
<td>15m</td>
<td>900,000</td>
<td>Intraday trading strategies</td>
</tr>
<tr>
<td>30m</td>
<td>1,800,000</td>
<td>Short-term swing trading</td>
</tr>
<tr>
<td>1h</td>
<td>3,600,000</td>
<td>Standard hourly analysis</td>
</tr>
<tr>
<td>2h</td>
<td>7,200,000</td>
<td>Extended intraday periods</td>
</tr>
<tr>
<td>4h</td>
<td>14,400,000</td>
<td>Multi-hour trend analysis</td>
</tr>
<tr>
<td>6h</td>
<td>21,600,000</td>
<td>Quarter-day intervals</td>
</tr>
<tr>
<td>8h</td>
<td>28,800,000</td>
<td>Third-of-day intervals</td>
</tr>
<tr>
<td>12h</td>
<td>43,200,000</td>
<td>Half-day intervals</td>
</tr>
<tr>
<td>1d</td>
<td>86,400,000</td>
<td>Daily candle backtests</td>
</tr>
<tr>
<td>3d</td>
<td>259,200,000</td>
<td>Multi-day pattern testing</td>
</tr>
</tbody>
</table>
<hr>
<a id="frame-system-architecture" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Frame System Architecture<a href="#frame-system-architecture" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/35_ClientFrame_1.svg" alt="Mermaid Diagram"></p>
<p><strong>Architecture Layers</strong>:</p>
<ol>
<li><strong>Schema Layer</strong>: Stores and validates frame configurations via <code>FrameSchemaService</code> and <code>FrameValidationService</code></li>
<li><strong>Connection Layer</strong>: <code>FrameConnectionService</code> provides memoized factory access to <code>ClientFrame</code> instances</li>
<li><strong>Client Layer</strong>: <code>ClientFrame</code> implements timeframe generation via <code>getTimeframe()</code> method</li>
<li><strong>Core Layer</strong>: <code>FrameCoreService</code> contains interval conversion and date iteration algorithms</li>
<li><strong>Execution Layer</strong>: <code>BacktestLogicPrivateService</code> consumes generated timeframe arrays for iteration</li>
</ol>
<hr>
<a id="timeframe-generation-algorithm" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Timeframe Generation Algorithm<a href="#timeframe-generation-algorithm" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/35_ClientFrame_2.svg" alt="Mermaid Diagram"></p>
<p><strong>Algorithm Steps</strong>:</p>
<ol>
<li><strong>Schema Retrieval</strong>: Fetch IFrameSchema by frameName from FrameSchemaService</li>
<li><strong>Interval Conversion</strong>: Convert FrameInterval string to milliseconds via FrameCoreService</li>
<li><strong>Array Initialization</strong>: Create empty Date array</li>
<li><strong>Timestamp Iteration</strong>:
<ul>
<li>Start at <code>startDate.getTime()</code></li>
<li>While <code>current &lt;= endDate.getTime()</code>:
<ul>
<li>Add <code>new Date(current)</code> to array</li>
<li>Increment <code>current</code> by <code>intervalMs</code></li>
</ul>
</li>
</ul>
</li>
<li><strong>Callback Invocation</strong>: Call <code>onTimeframe</code> with generated array and configuration</li>
<li><strong>Return Array</strong>: Return complete Date[] for backtest iteration</li>
</ol>
<p><strong>Example Output</strong>:</p>
<p>For <code>startDate = 2024-01-01T00:00:00Z</code>, <code>endDate = 2024-01-01T02:00:00Z</code>, <code>interval = 1h</code>:</p>
<pre><code class="typescript"><span class="hl-1">[</span><br/><span class="hl-1">  </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01T00:00:00.000Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01T01:00:00.000Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01T02:00:00.000Z&quot;</span><span class="hl-1">)</span><br/><span class="hl-1">]</span><br/><span class="hl-5">// 3 timestamps covering 2-hour period at 1-hour intervals</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="service-integration-pattern" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Service Integration Pattern<a href="#service-integration-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/35_ClientFrame_3.svg" alt="Mermaid Diagram"></p>
<p><strong>Connection Service Responsibilities</strong>:</p>
<ol>
<li><strong>Factory Pattern</strong>: <code>FrameConnectionService</code> creates <code>ClientFrame</code> instances on demand</li>
<li><strong>Memoization</strong>: Cache instances by <code>frameName</code> to prevent redundant instantiation</li>
<li><strong>Schema Access</strong>: Retrieve <code>IFrameSchema</code> from <code>FrameSchemaService</code> during construction</li>
<li><strong>Dependency Injection</strong>: All services injected via <code>inject()</code> from DI container</li>
</ol>
<p><strong>Memoization Key</strong>: <code>frameName</code> (string)</p>
<p><strong>Example</strong>:</p>
<pre><code class="typescript"><span class="hl-5">// First call - creates new ClientFrame</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">frame1</span><span class="hl-1"> = </span><span class="hl-4">frameConnectionService</span><span class="hl-1">.</span><span class="hl-0">getFrame</span><span class="hl-1">(</span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// Second call - returns cached instance</span><br/><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">frame2</span><span class="hl-1"> = </span><span class="hl-4">frameConnectionService</span><span class="hl-1">.</span><span class="hl-0">getFrame</span><span class="hl-1">(</span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-5">// frame1 === frame2 (same instance)</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="integration-with-backtest-execution" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Backtest Execution<a href="#integration-with-backtest-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><img src="../media/35_ClientFrame_4.svg" alt="Mermaid Diagram"></p>
<p><strong>Execution Flow</strong>:</p>
<ol>
<li><strong>User Invocation</strong>: <code>Backtest.run(symbol, {strategyName, exchangeName, frameName})</code></li>
<li><strong>Command Service</strong>: Routes to <code>BacktestCommandService.run()</code></li>
<li><strong>Logic Service</strong>: Calls <code>BacktestLogicPrivateService.run()</code> (async generator)</li>
<li><strong>Frame Retrieval</strong>: Gets <code>ClientFrame</code> instance via <code>FrameConnectionService.getFrame(frameName)</code></li>
<li><strong>Timeframe Generation</strong>: <code>ClientFrame.getTimeframe()</code> produces <code>Date[]</code> array</li>
<li><strong>Timestamp Iteration</strong>: Loop through each <code>Date</code> in timeframe</li>
<li><strong>Context Propagation</strong>: Wrap each iteration in <code>ExecutionContextService.runInContext({symbol, when: date, backtest: true})</code></li>
<li><strong>Strategy Execution</strong>: Call <code>StrategyCoreService.backtest()</code> for current timestamp</li>
<li><strong>Result Yielding</strong>: <code>yield</code> each closed/cancelled signal to user</li>
<li><strong>Completion</strong>: Generator exhausts when all timestamps processed</li>
</ol>
<p><strong>Temporal Isolation</strong>: Each timestamp iteration updates <code>ExecutionContextService.context.when</code>, ensuring strategies cannot access future data during <code>getSignal()</code> calls.</p>
<hr>
<a id="usage-example" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Usage Example<a href="#usage-example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="frame-registration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Frame Registration<a href="#frame-registration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">addFrame</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-0">addFrame</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">interval:</span><span class="hl-1"> </span><span class="hl-2">&quot;1m&quot;</span><span class="hl-1">, </span><span class="hl-5">// 1-minute tick resolution</span><br/><span class="hl-1">  </span><span class="hl-4">startDate:</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-01T00:00:00Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">endDate:</span><span class="hl-1"> </span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-2">&quot;2024-01-02T00:00:00Z&quot;</span><span class="hl-1">),</span><br/><span class="hl-1">  </span><span class="hl-4">callbacks:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onTimeframe</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">timeframe</span><span class="hl-1">, </span><span class="hl-4">startDate</span><span class="hl-1">, </span><span class="hl-4">endDate</span><span class="hl-1">, </span><span class="hl-4">interval</span><span class="hl-1">) </span><span class="hl-7">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Generated </span><span class="hl-7">${</span><span class="hl-4">timeframe</span><span class="hl-9">.</span><span class="hl-4">length</span><span class="hl-7">}</span><span class="hl-2"> timestamps`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Period: </span><span class="hl-7">${</span><span class="hl-4">startDate</span><span class="hl-7">}</span><span class="hl-2"> to </span><span class="hl-7">${</span><span class="hl-4">endDate</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">`Interval: </span><span class="hl-7">${</span><span class="hl-4">interval</span><span class="hl-7">}</span><span class="hl-2">`</span><span class="hl-1">);</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<p><strong>Result</strong>: 1440 timestamps (24 hours Ã— 60 minutes) spanning 2024-01-01 at 1-minute intervals.</p>
<a id="backtest-execution-with-frame" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Backtest Execution with Frame<a href="#backtest-execution-with-frame" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">Backtest</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;backtest-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">for</span><span class="hl-1"> </span><span class="hl-3">await</span><span class="hl-1"> (</span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">result</span><span class="hl-1"> </span><span class="hl-7">of</span><span class="hl-1"> </span><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;1d-backtest&quot;</span><span class="hl-1"> </span><span class="hl-5">// Uses frame defined above</span><br/><span class="hl-1">})) {</span><br/><span class="hl-1">  </span><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">action</span><span class="hl-1"> === </span><span class="hl-2">&quot;closed&quot;</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;Signal closed at:&quot;</span><span class="hl-1">, </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">closeTimestamp</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&quot;PNL:&quot;</span><span class="hl-1">, </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">pnl</span><span class="hl-1">.</span><span class="hl-4">pnlPercentage</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Execution</strong>: BacktestLogicPrivateService iterates through all 1440 timestamps, invoking strategy logic at each tick.</p>
<hr>
<a id="framecoreservice-algorithms" class="tsd-anchor"></a><h2 class="tsd-anchor-link">FrameCoreService Algorithms<a href="#framecoreservice-algorithms" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="interval-to-milliseconds-conversion" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Interval to Milliseconds Conversion<a href="#interval-to-milliseconds-conversion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">INTERVAL_MS</span><span class="hl-1">: </span><span class="hl-11">Record</span><span class="hl-1">&lt;</span><span class="hl-11">FrameInterval</span><span class="hl-1">, </span><span class="hl-11">number</span><span class="hl-1">&gt; = {</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;1m&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">60_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;3m&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">180_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;5m&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">300_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;15m&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">900_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;30m&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">1_800_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">3_600_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;2h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">7_200_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;4h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">14_400_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;6h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">21_600_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;8h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">28_800_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;12h&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">43_200_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;1d&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">86_400_000</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">&quot;3d&quot;</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">259_200_000</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">convertInterval</span><span class="hl-1">(</span><span class="hl-4">interval</span><span class="hl-1">: </span><span class="hl-11">FrameInterval</span><span class="hl-1">): </span><span class="hl-11">number</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-8">INTERVAL_MS</span><span class="hl-1">[</span><span class="hl-4">interval</span><span class="hl-1">];</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="date-range-generation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Date Range Generation<a href="#date-range-generation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-7">function</span><span class="hl-1"> </span><span class="hl-0">generateTimeframe</span><span class="hl-1">(</span><br/><span class="hl-1">  </span><span class="hl-4">startDate</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">endDate</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">intervalMs</span><span class="hl-1">: </span><span class="hl-11">number</span><br/><span class="hl-1">): </span><span class="hl-11">Date</span><span class="hl-1">[] {</span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">timeframe</span><span class="hl-1">: </span><span class="hl-11">Date</span><span class="hl-1">[] = [];</span><br/><span class="hl-1">  </span><span class="hl-7">let</span><span class="hl-1"> </span><span class="hl-4">current</span><span class="hl-1"> = </span><span class="hl-4">startDate</span><span class="hl-1">.</span><span class="hl-0">getTime</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-7">const</span><span class="hl-1"> </span><span class="hl-8">end</span><span class="hl-1"> = </span><span class="hl-4">endDate</span><span class="hl-1">.</span><span class="hl-0">getTime</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">while</span><span class="hl-1"> (</span><span class="hl-4">current</span><span class="hl-1"> &lt;= </span><span class="hl-4">end</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-4">timeframe</span><span class="hl-1">.</span><span class="hl-0">push</span><span class="hl-1">(</span><span class="hl-7">new</span><span class="hl-1"> </span><span class="hl-0">Date</span><span class="hl-1">(</span><span class="hl-4">current</span><span class="hl-1">));</span><br/><span class="hl-1">    </span><span class="hl-4">current</span><span class="hl-1"> += </span><span class="hl-4">intervalMs</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">timeframe</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<p><strong>Edge Cases</strong>:</p>
<ul>
<li><strong>Empty Range</strong>: If <code>startDate &gt; endDate</code>, returns <code>[]</code> (empty array)</li>
<li><strong>Single Timestamp</strong>: If <code>startDate === endDate</code>, returns <code>[startDate]</code> (one element)</li>
<li><strong>Inclusive End</strong>: Final timestamp included if <code>endDate</code> aligns with interval boundary</li>
</ul>
<hr>
<a id="symbol-parameter-usage" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Symbol Parameter Usage<a href="#symbol-parameter-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>getTimeframe()</code> method signature includes a <code>symbol</code> parameter:</p>
<pre><code class="typescript"><span class="hl-0">getTimeframe</span><span class="hl-1">(</span><span class="hl-4">symbol</span><span class="hl-1">: </span><span class="hl-4">string</span><span class="hl-1">, </span><span class="hl-4">frameName</span><span class="hl-1">: </span><span class="hl-4">FrameName</span><span class="hl-1">): </span><span class="hl-11">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">Date</span><span class="hl-1">[]&gt;</span>
</code><button type="button">Copy</button></pre>

<p><strong>Current Implementation</strong>: The <code>symbol</code> parameter is <strong>currently unused</strong> by ClientFrame but maintained for API consistency with other client interfaces (ClientStrategy, ClientExchange, ClientRisk).</p>
<p><strong>Rationale for Inclusion</strong>:</p>
<ul>
<li>Consistent method signature across all client implementations</li>
<li>Future extensibility for symbol-specific timeframe customization</li>
<li>Alignment with execution context pattern where symbol is always available</li>
</ul>
<p><strong>Future Use Cases</strong>:</p>
<ul>
<li>Symbol-specific trading hours (e.g., market open/close times)</li>
<li>Exchange-specific interval restrictions</li>
<li>Holiday calendar integration per market</li>
</ul>
<hr>
<a id="validation-and-error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Validation and Error Handling<a href="#validation-and-error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="registration-time-validation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Registration-Time Validation<a href="#registration-time-validation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">// Performed by FrameValidationService during addFrame()</span><br/><span class="hl-1">- </span><span class="hl-4">frameName</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-0">unique</span><span class="hl-1"> (</span><span class="hl-4">no</span><span class="hl-1"> </span><span class="hl-4">duplicates</span><span class="hl-1">)</span><br/><span class="hl-1">- </span><span class="hl-4">interval</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-4">valid</span><span class="hl-1"> </span><span class="hl-4">FrameInterval</span><span class="hl-1"> </span><span class="hl-4">string</span><br/><span class="hl-1">- </span><span class="hl-4">startDate</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-4">valid</span><span class="hl-1"> </span><span class="hl-4">Date</span><span class="hl-1"> </span><span class="hl-4">instance</span><br/><span class="hl-1">- </span><span class="hl-4">endDate</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-4">valid</span><span class="hl-1"> </span><span class="hl-4">Date</span><span class="hl-1"> </span><span class="hl-4">instance</span><br/><span class="hl-1">- </span><span class="hl-4">callbacks</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">conform</span><span class="hl-1"> </span><span class="hl-4">to</span><span class="hl-1"> </span><span class="hl-4">Partial</span><span class="hl-1">&lt;</span><span class="hl-4">IFrameCallbacks</span><span class="hl-1">&gt; </span><span class="hl-3">if</span><span class="hl-1"> </span><span class="hl-4">provided</span>
</code><button type="button">Copy</button></pre>

<a id="runtime-validation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Runtime Validation<a href="#runtime-validation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-5">// Performed by BacktestUtils before execution</span><br/><span class="hl-1">- </span><span class="hl-4">Frame</span><span class="hl-1"> </span><span class="hl-4">must</span><span class="hl-1"> </span><span class="hl-4">be</span><span class="hl-1"> </span><span class="hl-4">registered</span><span class="hl-1"> </span><span class="hl-4">via</span><span class="hl-1"> </span><span class="hl-0">addFrame</span><span class="hl-1">()</span><br/><span class="hl-1">- </span><span class="hl-4">FrameValidationService</span><span class="hl-1">.</span><span class="hl-0">validate</span><span class="hl-1">(</span><span class="hl-4">frameName</span><span class="hl-1">, </span><span class="hl-4">methodName</span><span class="hl-1">) </span><span class="hl-4">called</span><br/><span class="hl-1">- </span><span class="hl-4">Throws</span><span class="hl-1"> </span><span class="hl-4">error</span><span class="hl-1"> </span><span class="hl-3">if</span><span class="hl-1"> </span><span class="hl-4">frameName</span><span class="hl-1"> </span><span class="hl-4">not</span><span class="hl-1"> </span><span class="hl-4">found</span>
</code><button type="button">Copy</button></pre>

<p><strong>Example Error</strong>:</p>
<pre><code class="typescript"><span class="hl-4">Backtest</span><span class="hl-1">.</span><span class="hl-0">run</span><span class="hl-1">(</span><span class="hl-2">&quot;BTCUSDT&quot;</span><span class="hl-1">, {</span><br/><span class="hl-1">  </span><span class="hl-4">strategyName:</span><span class="hl-1"> </span><span class="hl-2">&quot;my-strategy&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">exchangeName:</span><span class="hl-1"> </span><span class="hl-2">&quot;binance&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">frameName:</span><span class="hl-1"> </span><span class="hl-2">&quot;non-existent-frame&quot;</span><span class="hl-1"> </span><span class="hl-5">// Error: frame not found</span><br/><span class="hl-1">});</span><br/><span class="hl-5">// Error: Frame &quot;non-existent-frame&quot; not registered</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="relationship-to-other-components" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Relationship to Other Components<a href="#relationship-to-other-components" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><table>
<thead>
<tr>
<th>Component</th>
<th>Relationship</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>FrameSchemaService</strong></td>
<td>Storage</td>
<td>Stores registered IFrameSchema configurations via ToolRegistry</td>
</tr>
<tr>
<td><strong>FrameValidationService</strong></td>
<td>Validation</td>
<td>Validates frame registration and runtime lookups</td>
</tr>
<tr>
<td><strong>FrameConnectionService</strong></td>
<td>Factory</td>
<td>Creates and caches ClientFrame instances</td>
</tr>
<tr>
<td><strong>FrameCoreService</strong></td>
<td>Logic</td>
<td>Provides interval conversion and date iteration algorithms</td>
</tr>
<tr>
<td><strong>BacktestLogicPrivateService</strong></td>
<td>Consumer</td>
<td>Iterates through generated timeframe arrays</td>
</tr>
<tr>
<td><strong>ExecutionContextService</strong></td>
<td>Context</td>
<td>Updates <code>context.when</code> for each timestamp iteration</td>
</tr>
<tr>
<td><strong>MethodContextService</strong></td>
<td>Routing</td>
<td>Provides <code>frameName</code> for frame instance lookup</td>
</tr>
</tbody>
</table>
<hr>
<a id="performance-considerations" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Performance Considerations<a href="#performance-considerations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="memory-usage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Memory Usage<a href="#memory-usage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Timeframe Array Size</strong>: <code>(endDate - startDate) / intervalMs + 1</code> Date objects</li>
<li><strong>Example</strong>: 1-day backtest at 1-minute intervals = 1440 Date objects (~23KB)</li>
<li><strong>Large Backtests</strong>: Multi-month 1-minute backtests can generate 40,000+ timestamps</li>
</ul>
<p><strong>Optimization</strong>: Date objects created once during <code>getTimeframe()</code> call, then reused throughout backtest iteration.</p>
<a id="computational-complexity" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Computational Complexity<a href="#computational-complexity" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Generation Time</strong>: O(n) where n = number of timestamps</li>
<li><strong>Memoization</strong>: <code>FrameConnectionService</code> caches ClientFrame instances, preventing regeneration</li>
<li><strong>Callback Overhead</strong>: Single <code>onTimeframe</code> callback invocation per generation</li>
</ul>
<a id="recommendations" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Recommendations<a href="#recommendations" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li><strong>Choose Appropriate Intervals</strong>: Use coarser intervals (1h, 1d) for long-term backtests</li>
<li><strong>Split Large Ranges</strong>: Break multi-year backtests into smaller frame periods</li>
<li><strong>Memory Monitoring</strong>: Monitor heap usage for 1-minute backtests &gt; 3 months</li>
</ol>
<hr>
<a id="related-components" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Related Components<a href="#related-components" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><ul>
<li><a href="design_27_frame_schemas.html">Frame Schemas</a> - Configuration interface for addFrame()</li>
<li><a href="design_55_backtest_execution_flow.html">Backtest Execution Flow</a> - How timeframes are consumed during backtesting</li>
<li><a href="design_56_timeframe_generation.html">Timeframe Generation</a> - FrameCoreService algorithms</li>
<li><a href="design_42_connection_services.html">Connection Services</a> - Factory pattern and memoization strategy</li>
<li><a href="design_43_schema_services.html">Schema Services</a> - ToolRegistry storage pattern</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#clientframe"><span>Client<wbr/>Frame</span></a><ul><li><a href="#overview"><span>Overview</span></a></li><li><a href="#frame-schema-configuration"><span>Frame <wbr/>Schema <wbr/>Configuration</span></a></li><li><ul><li><a href="#iframeschema-structure"><span>IFrame<wbr/>Schema <wbr/>Structure</span></a></li><li><a href="#iframeparams-extension"><span>IFrame<wbr/>Params <wbr/>Extension</span></a></li><li><a href="#iframecallbacks"><span>IFrame<wbr/>Callbacks</span></a></li></ul></li><li><a href="#supported-frame-intervals"><span>Supported <wbr/>Frame <wbr/>Intervals</span></a></li><li><a href="#frame-system-architecture"><span>Frame <wbr/>System <wbr/>Architecture</span></a></li><li><a href="#timeframe-generation-algorithm"><span>Timeframe <wbr/>Generation <wbr/>Algorithm</span></a></li><li><a href="#service-integration-pattern"><span>Service <wbr/>Integration <wbr/>Pattern</span></a></li><li><a href="#integration-with-backtest-execution"><span>Integration with <wbr/>Backtest <wbr/>Execution</span></a></li><li><a href="#usage-example"><span>Usage <wbr/>Example</span></a></li><li><ul><li><a href="#frame-registration"><span>Frame <wbr/>Registration</span></a></li><li><a href="#backtest-execution-with-frame"><span>Backtest <wbr/>Execution with <wbr/>Frame</span></a></li></ul></li><li><a href="#framecoreservice-algorithms"><span>Frame<wbr/>Core<wbr/>Service <wbr/>Algorithms</span></a></li><li><ul><li><a href="#interval-to-milliseconds-conversion"><span>Interval to <wbr/>Milliseconds <wbr/>Conversion</span></a></li><li><a href="#date-range-generation"><span>Date <wbr/>Range <wbr/>Generation</span></a></li></ul></li><li><a href="#symbol-parameter-usage"><span>Symbol <wbr/>Parameter <wbr/>Usage</span></a></li><li><a href="#validation-and-error-handling"><span>Validation and <wbr/>Error <wbr/>Handling</span></a></li><li><ul><li><a href="#registration-time-validation"><span>Registration-<wbr/>Time <wbr/>Validation</span></a></li><li><a href="#runtime-validation"><span>Runtime <wbr/>Validation</span></a></li></ul></li><li><a href="#relationship-to-other-components"><span>Relationship to <wbr/>Other <wbr/>Components</span></a></li><li><a href="#performance-considerations"><span>Performance <wbr/>Considerations</span></a></li><li><ul><li><a href="#memory-usage"><span>Memory <wbr/>Usage</span></a></li><li><a href="#computational-complexity"><span>Computational <wbr/>Complexity</span></a></li><li><a href="#recommendations"><span>Recommendations</span></a></li></ul></li><li><a href="#related-components"><span>Related <wbr/>Components</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">backtest-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript">
    (function(m,e,t,r,i,k,a){
        m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
    })(window, document,'script','https://mc.yandex.ru/metrika/tag.js?id=105455585', 'ym');

    ym(105455585, 'init', {ssr:true, webvisor:true, clickmap:true, ecommerce:"dataLayer", accurateTrackBounce:true, trackLinks:true});
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/105455585" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3MQZEBBDDR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-3MQZEBBDDR');
</script>
